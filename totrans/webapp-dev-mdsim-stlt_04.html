<html><head></head><body>
<div id="_idContainer097">
<h1 class="chapter-number" id="_idParaDest-45"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-46"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.2.1">Streamlit Essentials – Configuring the Environment, Managing Packages, and More</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This chapter covers the basics of building a Python web application using the Streamlit framework. </span><span class="koboSpan" id="kobo.3.2">It is designed for beginners who want to learn how to develop a web application from scratch and covers several important topics, including setting up a virtual environment, installing and managing packages, creating an app skeleton, and adding a menu and decoration to </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the app.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter is the first of a section consisting of four more chapters. </span><span class="koboSpan" id="kobo.5.2">In these chapters, we will learn how to build basic web applications while developing essential Streamlit skills. </span><span class="koboSpan" id="kobo.5.3">We are </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.6.1">adopting a </span><em class="italic"><span class="koboSpan" id="kobo.7.1">learning-by-doing</span></em><span class="koboSpan" id="kobo.8.1"> approach, so we </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.9.1">are going to build, test, and deploy a real working web app – a </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">natural language processing</span></strong><span class="koboSpan" id="kobo.11.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.12.1">NLP</span></strong><span class="koboSpan" id="kobo.13.1">) app – from scratch. </span><span class="koboSpan" id="kobo.13.2">So, let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">make it!</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">This chapter starts by recalling the concept of virtual environments and explains why they are important for Python development. </span><span class="koboSpan" id="kobo.15.2">Once the development environment has been set up, the focus moves on to creating the application skeleton, which involves defining the structure and layout of the app. </span><span class="koboSpan" id="kobo.15.3">This kind of skeleton is a very valuable resource to be used for future web app development. </span><span class="koboSpan" id="kobo.15.4">After that, we’ll cover how to add a menu and decoration to the app to create a nice, good-looking, and user-friendly </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">web interface.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">By the end of this chapter, you should have a basic understanding of how to build a Python web application using Streamlit and be able to create an app with custom menus and decorations while leveraging the skeleton that </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">you’ve created.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.21.1">Configuring </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">our environment</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Installing and </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">importing packages</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">App </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">skeleton building</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Building the menu and </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">adding decorations</span></span></li>
</ul>
<h1 id="_idParaDest-47"><span class="koboSpan" id="kobo.29.1">Technical requirement</span><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.30.1">s</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.31.1">In this chapter, we will use the following libraries, packages, </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">and tools:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.33.1">Sublime Text</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.34.1">Python 3</span></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">pipenv</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.36.1">streamlit</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.37.1">textblob</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">spacy</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.39.1">neattext</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">matplotlib</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.41.1">wordcloud</span></strong></span></li></ul></li>
<li><span class="koboSpan" id="kobo.42.1">The code for this chapter can be found in this book’s GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">repository: </span></span><a href="https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/4306036e2ddf9a714f2f058f76363aac5b402d5b/Chapter04"><span class="No-Break"><span class="koboSpan" id="kobo.44.1">https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/4306036e2ddf9a714f2f058f76363aac5b402d5b/Chapter04</span></span></a></li>
</ul>
<h1 id="_idParaDest-48"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.45.1">Configuring our environment</span></h1>
<p><span class="koboSpan" id="kobo.46.1">We are finally here and building our first web application from scratch! </span><span class="koboSpan" id="kobo.46.2">From scratch means working </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.47.1">from the beginning, even before an empty Python file. </span><span class="koboSpan" id="kobo.47.2">The approach is easy – we start by sitting and coding together. </span><span class="koboSpan" id="kobo.47.3">Let’s start by creating our virtual environment, which is dedicated exclusively to this new app we </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">will develop:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.49.1">As we’ve already learned in previous chapters, we must fire up our Terminator terminal and create an empty directory named </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">web_app1</span></strong><span class="koboSpan" id="kobo.51.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">following instructions:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.53.1">mkdir web_app1</span></strong></pre></li> <li><span class="koboSpan" id="kobo.54.1">Then, we must enter the following instruction in </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">the terminal:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.56.1">cd web_app1</span></strong></pre></li> <li><span class="koboSpan" id="kobo.57.1">Finally, we must write </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">the following:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.59.1">pipenv shell</span></strong></pre></li> </ol>
<p><span class="koboSpan" id="kobo.60.1">The last </span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.61.1">instruction, as we saw previously and already know, will create the virtual environment with </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">pipenv</span></strong><span class="koboSpan" id="kobo.63.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.64.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.65.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer072">
<span class="koboSpan" id="kobo.67.1"><img alt="Figure 4.1: Creating a virtual environment in pipenv" src="image/B21147_04_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.68.1">Figure 4.1: Creating a virtual environment in pipenv</span></p>
<p><span class="koboSpan" id="kobo.69.1">Since it will help us a lot in managing code and Streamlit’s execution, let’s divide our Terminator terminal into two parts, splitting </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">it horizontally.</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.71.1">Write the following line in the </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">lower tile:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.73.1">pipes</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.74.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.75.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.76.1">.2</span></em><span class="koboSpan" id="kobo.77.1">, the list of available virtual environments </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">will appear.</span></span></p></li> <li><span class="koboSpan" id="kobo.79.1">Select </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">web_app1</span></strong><span class="koboSpan" id="kobo.81.1"> by moving the cursor up or down, then </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">hitting </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.83.1">Enter</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer073">
<span class="koboSpan" id="kobo.85.1"><img alt="Figure 4.2: Selecting a virtual environment" src="image/B21147_04_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.86.1">Figure 4.2: Selecting a virtual environment</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.87.1">Once you </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.88.1">are inside the virtual environment, in your terminal prompt, you will see its name in parentheses (in our </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">case, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">web_app1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">).</span></span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.92.1">We are inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">web_app1</span></strong><span class="koboSpan" id="kobo.94.1">, so we can open our editor, Sublime Text, by typing </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">the following:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.96.1">subl .</span></strong></pre></li> </ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.97.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.98.1">Please be aware of the point (</span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">.</span></strong><span class="koboSpan" id="kobo.100.1">) after the blank space; in other words, there is a blank space between </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">subl</span></strong><span class="koboSpan" id="kobo.102.1"> and the </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">point (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">.</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.106.1">By doing this, Sublime Text will fire up from our </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">working folder:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer074">
<span class="koboSpan" id="kobo.108.1"><img alt="Figure 4.3: Launching Sublime Text from the virtual environment" src="image/B21147_04_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">Figure 4.3: Launching Sublime Text from the virtual environment</span></p>
<p><span class="koboSpan" id="kobo.110.1">With that, our virtual environment is working, and our editor is ready. </span><span class="koboSpan" id="kobo.110.2">This means that it’s time to deal with all the packages that are required by the web application. </span><span class="koboSpan" id="kobo.110.3">We need to install these packages to make the web app </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">work correctly.</span></span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.112.1">Installing and importing packages</span></h1>
<p><span class="koboSpan" id="kobo.113.1">To make </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.114.1">our web application work properly, we need the </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.115.1">following </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">Python packages:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.117.1">streamlit</span></strong><span class="koboSpan" id="kobo.118.1">: This is the core – that is, the framework that makes the </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">magic happen</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">textblob</span></strong><span class="koboSpan" id="kobo.121.1">: This is a nice package for basic sentiment analysis and some other basic NLP tasks (NLP is how computers understand human language, its meaning, its syntax, and </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">so on)</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.123.1">spacy</span></strong><span class="koboSpan" id="kobo.124.1">: This is quite an advanced package; it’s state of the art and can be used for almost any </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">NLP task</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">neattext</span></strong><span class="koboSpan" id="kobo.127.1">: A very simple package for </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">text cleaning</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">matplotlib</span></strong><span class="koboSpan" id="kobo.130.1">: Python’s most famous package for plotting graphs, diagrams, and </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">so on</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">wordcloud</span></strong><span class="koboSpan" id="kobo.133.1">: A package dedicated to nice word cloud creation </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">and visualizations</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.135.1">We can install all these packages in our virtual environment (so we must already be inside the virtual environment) by typing the following </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">unique instruction:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.137.1">
pipenv install streamlit textblob spacy neattext matplotlib wordcloud</span></pre> <p><span class="koboSpan" id="kobo.138.1">Please note that this operation can take a few minutes </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">to run:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer075">
<span class="koboSpan" id="kobo.140.1"><img alt="Figure 4.4: Package installation" src="image/B21147_04_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.141.1">Figure 4.4: Package installation</span></p>
<p><span class="koboSpan" id="kobo.142.1">If you check the Pipfile from Sublime Text, you will see that all the packages have been installed correctly, as reported in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.143.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.144.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer076">
<span class="koboSpan" id="kobo.146.1"><img alt="Figure 4.5: Pipfile with the installed packages" src="image/B21147_04_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.147.1">Figure 4.5: Pipfile with the installed packages</span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.148.1">spaCy</span></em><span class="koboSpan" id="kobo.149.1"> is a very powerful </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.150.1">package for NLP and requires a dedicated language model for each language we want to manage. </span><span class="koboSpan" id="kobo.150.2">So, before we start coding, we need to </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.151.1">download the English language model. </span><span class="koboSpan" id="kobo.151.2">Let’s write the </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.152.1">following instruction in </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">our terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.154.1">
pipenv run python –m spacy download en_core_web_sm</span></pre> <p><span class="koboSpan" id="kobo.155.1">This instruction will download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">en_core_web_sm</span></strong><span class="koboSpan" id="kobo.157.1"> English language model, whose size is 12.8 MB. </span><span class="koboSpan" id="kobo.157.2">The file’s name is quite self-explanatory: </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">en</span></strong><span class="koboSpan" id="kobo.159.1"> means English, </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">core_web</span></strong><span class="koboSpan" id="kobo.161.1"> means that the model has been trained on a dataset containing text coming from the web, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">sm</span></strong><span class="koboSpan" id="kobo.163.1"> stands for small (if you want to get an idea of all languages, models, and their size, you can check spaCy’s </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">official website):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer077">
<span class="koboSpan" id="kobo.165.1"><img alt="Figure 4.6: Downloading the spaCy language model" src="image/B21147_04_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.166.1">Figure 4.6: Downloading the spaCy language model</span></p>
<p><span class="koboSpan" id="kobo.167.1">Now, we have </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.168.1">everything we need to start coding. </span><span class="koboSpan" id="kobo.168.2">There’s just </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.169.1">one thing missing: the Python file! </span><span class="koboSpan" id="kobo.169.2">Without it, we cannot code. </span><span class="koboSpan" id="kobo.169.3">Let’s create it by typing a </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">simple instruction:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.171.1">
touch app.py</span></pre> <p><span class="koboSpan" id="kobo.172.1">Here’s </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">the output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer078">
<span class="koboSpan" id="kobo.174.1"><img alt="Figure 4.7: The app.py file" src="image/B21147_04_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.175.1">Figure 4.7: The app.py file</span></p>
<p><span class="koboSpan" id="kobo.176.1">So far, everything is ready: our environment is OK, our packages have been installed, and our empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">app.py</span></strong><span class="koboSpan" id="kobo.178.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">is there.</span></span></p>
<p><span class="koboSpan" id="kobo.180.1">We are now ready to start writing the code for our first working </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">The first step is to open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">app.py</span></strong><span class="koboSpan" id="kobo.184.1"> file in Sublime Text and import all the libraries we have installed so that we can write the code, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.185.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.186.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer079">
<span class="koboSpan" id="kobo.188.1"><img alt="Figure 4.8: Importing the necessary libraries" src="image/B21147_04_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.189.1">Figure 4.8: Importing the necessary libraries</span></p>
<p><span class="koboSpan" id="kobo.190.1">The preceding </span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.191.1">code imports </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1">streamlit</span></strong><span class="koboSpan" id="kobo.193.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">st</span></strong><span class="koboSpan" id="kobo.195.1"> alias and </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.196.1">imports all NLP packages (</span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">textblob</span></strong><span class="koboSpan" id="kobo.198.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">spacy</span></strong><span class="koboSpan" id="kobo.200.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">neattext</span></strong><span class="koboSpan" id="kobo.202.1">) and all the visualization libraries. </span><span class="koboSpan" id="kobo.202.2">Please note that for </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">matplotlib</span></strong><span class="koboSpan" id="kobo.204.1">, we are using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">Agg</span></strong><span class="koboSpan" id="kobo.206.1"> engine since, with Streamlit, it works better than the </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">default one.</span></span></p>
<p><span class="koboSpan" id="kobo.208.1">After importing, we are finally ready to write all the code for our first real web application. </span><span class="koboSpan" id="kobo.208.2">Let’s do it </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1">right now!</span></span></p>
<h1 id="_idParaDest-50"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.210.1">App skeleton building</span></h1>
<p><span class="koboSpan" id="kobo.211.1">First of all, we need a main function – a function that contains all the business logic of our app </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.212.1">and the frontend too. </span><span class="koboSpan" id="kobo.212.2">This is the power of Streamlit – building the frontend directly inside Python code. </span><span class="koboSpan" id="kobo.212.3">There’s no need for different programming languages, files, and so on; everything is in one place using the same language. </span><span class="koboSpan" id="kobo.212.4">Writing this function is very easy – we can add the code shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.213.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.214.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer080">
<span class="koboSpan" id="kobo.216.1"><img alt="Figure 4.9: Importing the necessary libraries and the main function" src="image/B21147_04_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.217.1">Figure 4.9: Importing the necessary libraries and the main function</span></p>
<p><span class="koboSpan" id="kobo.218.1">The first part </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.219.1">of the code is quite self-explanatory – we are just importing all the libraries that were introduced a couple of pages before. </span><span class="koboSpan" id="kobo.219.2">Just note that when we import </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">matplotlib</span></strong><span class="koboSpan" id="kobo.221.1"> (the library needed for plotting), we are specifying that we wish to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.222.1">Agg</span></strong><span class="koboSpan" id="kobo.223.1"> engine (without this instruction, </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">matplotlib</span></strong><span class="koboSpan" id="kobo.225.1"> would use its default engine). </span><span class="koboSpan" id="kobo.225.2">With Streamlit’s initial versions, this </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">Agg</span></strong><span class="koboSpan" id="kobo.227.1"> engine used to work better, but with the very recent versions, </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">matplotlib</span></strong><span class="koboSpan" id="kobo.229.1">’s standard engine performs well too. </span><span class="koboSpan" id="kobo.229.2">So, the suggestion is to try with and without this instruction and to use it only in the case of a </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">real improvement.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">So, thanks to </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">def</span></strong><span class="koboSpan" id="kobo.233.1">, we can create a function named </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">main</span></strong><span class="koboSpan" id="kobo.235.1">. </span><span class="koboSpan" id="kobo.235.2">At the moment, this function just prints a title on the screen (</span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">st.title</span></strong><span class="koboSpan" id="kobo.237.1">): </span><em class="italic"><span class="koboSpan" id="kobo.238.1">NLP </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.239.1">Web App</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.241.1">That’s it – we are ready to launch the web application we’ve made with Streamlit. </span><span class="koboSpan" id="kobo.241.2">In our browser, we’ll see our beautiful title: </span><em class="italic"><span class="koboSpan" id="kobo.242.1">NLP </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.243.1">Web App</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.245.1">To run the app in our terminal, we should write </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">streamlit run app.py</span></strong><span class="koboSpan" id="kobo.247.1">. </span><span class="koboSpan" id="kobo.247.2">However, since we are inside a </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">pipenv</span></strong><span class="koboSpan" id="kobo.249.1"> environment, we have to type </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">the following:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.251.1">
pipenv run streamlit run app.py</span></pre> <p><span class="koboSpan" id="kobo.252.1">This instruction </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.253.1">starts a web server that runs our Streamlit app on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">8501</span></strong><span class="koboSpan" id="kobo.255.1">. </span><span class="koboSpan" id="kobo.255.2">Our Streamlit app is the code contained in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">app.py</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.257.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.258.1">Immediately, the browser will open up on </span><strong class="source-inline"><span class="koboSpan" id="kobo.259.1">localhost port 8501</span></strong><span class="koboSpan" id="kobo.260.1"> and we will see the web app, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.261.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.262.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer081">
<span class="koboSpan" id="kobo.264.1"><img alt="Figure 4.10: Web app running on localhost:8501" src="image/B21147_04_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.265.1">Figure 4.10: Web app running on localhost:8501</span></p>
<p><span class="koboSpan" id="kobo.266.1">At the moment, the web application is doing nothing but showing the </span><em class="italic"><span class="koboSpan" id="kobo.267.1">NLP Web App</span></em><span class="koboSpan" id="kobo.268.1"> title, together with the </span><em class="italic"><span class="koboSpan" id="kobo.269.1">hamburger menu</span></em><span class="koboSpan" id="kobo.270.1"> at the top right. </span><span class="koboSpan" id="kobo.270.2">Please explore all the options contained in </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">this menu.</span></span></p>
<p><span class="koboSpan" id="kobo.272.1">What is important to understand now is that usually, all applications perform a set of tasks, let’s say three or four or </span><em class="italic"><span class="koboSpan" id="kobo.273.1">N</span></em><span class="koboSpan" id="kobo.274.1"> (any number), and for this reason, all applications have the same </span><em class="italic"><span class="koboSpan" id="kobo.275.1">skeleton</span></em><span class="koboSpan" id="kobo.276.1">, a common structure or backbone that enables each task. </span><span class="koboSpan" id="kobo.276.2">These tasks can be included in an application menu and built up by a </span><em class="italic"><span class="koboSpan" id="kobo.277.1">selectbox</span></em><span class="koboSpan" id="kobo.278.1">, allowing the user to choose what to do. </span><span class="koboSpan" id="kobo.278.2">We can put this selectbox on the left-hand side of our app. </span><span class="koboSpan" id="kobo.278.3">So, assuming that the tasks of </span><em class="italic"><span class="koboSpan" id="kobo.279.1">NLP Web App</span></em><span class="koboSpan" id="kobo.280.1"> will be </span><strong class="bold"><span class="koboSpan" id="kobo.281.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.282.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.283.1">Translation</span></strong><span class="koboSpan" id="kobo.284.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.285.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.286.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.287.1">About</span></strong><span class="koboSpan" id="kobo.288.1">, we can create a </span><em class="italic"><span class="koboSpan" id="kobo.289.1">list</span></em><span class="koboSpan" id="kobo.290.1"> of them and a selectbox that works on this list by adding the following code in the main function just after the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.291.1">st.title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.292.1"> line:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.293.1">
activity = ["Text Analysis", "Translation", "Sentiment Analysis", "About"]
choice = st.sidebar.selectbox("Menu", activity)</span></pre> <p><span class="koboSpan" id="kobo.294.1">Now, save the </span><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">app.py</span></strong><span class="koboSpan" id="kobo.296.1"> file and click on </span><strong class="bold"><span class="koboSpan" id="kobo.297.1">Always rerun</span></strong><span class="koboSpan" id="kobo.298.1"> in the web app (in the top-right corner); in this way, all the new lines of code will be immediately executed as soon as we save them. </span><span class="koboSpan" id="kobo.298.2">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.299.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.300.1">.11</span></em><span class="koboSpan" id="kobo.301.1">, we have added the menu on the left-hand side of our web app. </span><span class="koboSpan" id="kobo.301.2">This menu contains the four tasks we included in the </span><em class="italic"><span class="koboSpan" id="kobo.302.1">activity</span></em><span class="koboSpan" id="kobo.303.1"> list. </span><span class="koboSpan" id="kobo.303.2">If you want, you can </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.304.1">click on the </span><strong class="bold"><span class="koboSpan" id="kobo.305.1">x</span></strong><span class="koboSpan" id="kobo.306.1"> button to minimize the left-hand </span><span class="No-Break"><span class="koboSpan" id="kobo.307.1">side column:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer082">
<span class="koboSpan" id="kobo.308.1"><img alt="Figure 4.11: Left-hand side menu" src="image/B21147_04_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.309.1">Figure 4.11: Left-hand side menu</span></p>
<p><span class="koboSpan" id="kobo.310.1">To let our menu do something, we have to add some logic for each of its items. </span><span class="koboSpan" id="kobo.310.2">We can do this by adding the following code in the main function. </span><span class="koboSpan" id="kobo.310.3">At the moment, we are just displaying some sub-headers any time we select a specific option on </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">the menu:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer083">
<span class="koboSpan" id="kobo.312.1"><img alt="Figure 4.12: Adding some logic to the main menu" src="image/B21147_04_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.313.1">Figure 4.12: Adding some logic to the main menu</span></p>
<p><span class="koboSpan" id="kobo.314.1">The code in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.315.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.316.1">.12</span></em><span class="koboSpan" id="kobo.317.1"> is quite easy: we create a list of four items (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">activity</span></strong><span class="koboSpan" id="kobo.319.1"> variable) and use </span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.320.1">it to populate a </span><em class="italic"><span class="koboSpan" id="kobo.321.1">selectbox</span></em><span class="koboSpan" id="kobo.322.1"> on the sidebar. </span><span class="koboSpan" id="kobo.322.2">This means that this selectbox will show only four options. </span><span class="koboSpan" id="kobo.322.3">When we select one of these options (for example, </span><strong class="bold"><span class="koboSpan" id="kobo.323.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.324.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.325.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.326.1">.13</span></em><span class="koboSpan" id="kobo.327.1">), we need to perform a related action. </span><span class="koboSpan" id="kobo.327.2">This logic is valid for all four different options, so we need some </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">if</span></strong><span class="koboSpan" id="kobo.329.1">s (four ifs because we have four options) to understand the value of the selection in the selectbox. </span><span class="koboSpan" id="kobo.329.2">Simply put, we check </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">if</span></strong><span class="koboSpan" id="kobo.331.1"> our selection in the selectbox is </span><em class="italic"><span class="koboSpan" id="kobo.332.1">equal to</span></em><span class="koboSpan" id="kobo.333.1"> any of the items in the menu; if so, we just print a subheader (for now, the related action is only printing a subheader; we’ll write a more complex action in the future) with the item’s name and a blank line. </span><span class="koboSpan" id="kobo.333.2">So, if we select </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.335.1">, we print a </span><strong class="bold"><span class="koboSpan" id="kobo.336.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.337.1"> subheader on the screen, as displayed in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.338.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.339.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer084">
<span class="koboSpan" id="kobo.341.1"><img alt="Figure 4.13: “Sentiment Analysis” selection from the left-hand side menu" src="image/B21147_04_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.342.1">Figure 4.13: “Sentiment Analysis” selection from the left-hand side menu</span></p>
<p><span class="koboSpan" id="kobo.343.1">At this point, it should be clear that any kind of logic has to be applied in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">main</span></strong><span class="koboSpan" id="kobo.345.1"> function inside </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.346.1">its specific </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">if</span></strong><span class="koboSpan" id="kobo.348.1"> clause. </span><span class="koboSpan" id="kobo.348.2">For example, if we want the </span><strong class="bold"><span class="koboSpan" id="kobo.349.1">About</span></strong><span class="koboSpan" id="kobo.350.1"> section to do something more than just display a subheader containing the </span><strong class="bold"><span class="koboSpan" id="kobo.351.1">About</span></strong><span class="koboSpan" id="kobo.352.1"> text, we can write the code for its business logic in the </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">following way:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer085">
<span class="koboSpan" id="kobo.354.1"><img alt="Figure 4.14: Business logic inside the “About” section" src="image/B21147_04_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.355.1">Figure 4.14: Business logic inside the “About” section</span></p>
<p><span class="koboSpan" id="kobo.356.1">To summarize, when the </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">choice</span></strong><span class="koboSpan" id="kobo.358.1"> variable is </span><em class="italic"><span class="koboSpan" id="kobo.359.1">equal to</span></em> <strong class="bold"><span class="koboSpan" id="kobo.360.1">About</span></strong><span class="koboSpan" id="kobo.361.1">, we display a subheader on the screen containing the </span><strong class="bold"><span class="koboSpan" id="kobo.362.1">About</span></strong><span class="koboSpan" id="kobo.363.1"> text, followed by an empty line (</span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">st.write("")</span></strong><span class="koboSpan" id="kobo.365.1">), and then some text formatted with the </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">Markdown language.</span></span></p>
<p><span class="koboSpan" id="kobo.367.1">The code we </span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.368.1">wrote with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">st.markdown</span></strong><span class="koboSpan" id="kobo.370.1"> instruction is quite self-explanatory; we are just printing (using the Markdown format) some information on the screen about our web application and a clickable link to Streamlit’s website, considering that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">[streamlit](</span></strong><a href="https://streamlit.io"><span class="koboSpan" id="kobo.372.1">https://streamlit.io</span></a><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">)</span></strong><span class="koboSpan" id="kobo.374.1"> instruction is just the Markdown syntax to include hyperlinks in </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">the text:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer086">
<span class="koboSpan" id="kobo.376.1"><img alt="Figure 4.15: The “About” section of our web app" src="image/B21147_04_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.377.1">Figure 4.15: The “About” section of our web app</span></p>
<p><span class="koboSpan" id="kobo.378.1">So far, we’ve created a very neat skeleton (that is, a structure) for our web application, imported all the libraries we are going to use, created a main function where we created a menu (..., which will be displayed on the left-hand side of the app and is collapsible) containing all the tasks our web application is going to cover, and created the </span><strong class="bold"><span class="koboSpan" id="kobo.379.1">About</span></strong><span class="koboSpan" id="kobo.380.1"> section of the app, putting some business logic inside its </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">if</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.382.1"> clause.</span></span></p>
<p><span class="koboSpan" id="kobo.383.1">It’s incredible, but this simple skeleton can be applied to all the web applications we are going to build from now on. </span><span class="koboSpan" id="kobo.383.2">All we need to change or adapt is the list of tasks (the list inside the menu on the left-hand side) and the business logic for each of </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">these items.</span></span></p>
<p><span class="koboSpan" id="kobo.385.1">The point is that, even if the web app is working well now, it is not very appealing. </span><span class="koboSpan" id="kobo.385.2">So, let’s try adding </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">some decorations.</span></span></p>
<h1 id="_idParaDest-51"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.387.1">Building the menu and adding decorations</span></h1>
<p><em class="italic"><span class="koboSpan" id="kobo.388.1">NLP Web App</span></em><span class="koboSpan" id="kobo.389.1"> might be a good title for our application, but to be honest, it’s just some black text on a white background, so it’s not very appealing at </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">the moment.</span></span></p>
<p><span class="koboSpan" id="kobo.391.1">One of the </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.392.1">greatest features of Streamlit is that we can use HTML very easily. </span><span class="koboSpan" id="kobo.392.2">So, let’s add some simple HTML code to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.393.1">main</span></strong><span class="koboSpan" id="kobo.394.1"> function just to make everything much </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.395.1">more stylish! </span><span class="koboSpan" id="kobo.395.2">We can change the old </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">st.title("NLP Web App")</span></strong><span class="koboSpan" id="kobo.397.1"> first line of code that sits after the main function declaration with the </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">following one:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer087">
<span class="koboSpan" id="kobo.399.1"><img alt="Figure 4.16: Adding some HTML to our title" src="image/B21147_04_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.400.1">Figure 4.16: Adding some HTML to our title</span></p>
<p><span class="koboSpan" id="kobo.401.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">title_template</span></strong><span class="koboSpan" id="kobo.403.1">, we are specifying the </span><em class="italic"><span class="koboSpan" id="kobo.404.1">background color</span></em><span class="koboSpan" id="kobo.405.1"> (blue), the </span><em class="italic"><span class="koboSpan" id="kobo.406.1">padding size</span></em><span class="koboSpan" id="kobo.407.1">, and the </span><em class="italic"><span class="koboSpan" id="kobo.408.1">text style</span></em><span class="koboSpan" id="kobo.409.1"> (h1) and its </span><em class="italic"><span class="koboSpan" id="kobo.410.1">color</span></em><span class="koboSpan" id="kobo.411.1"> (cyan). </span><span class="koboSpan" id="kobo.411.2">With the </span><strong class="source-inline"><span class="koboSpan" id="kobo.412.1">st.markdown</span></strong><span class="koboSpan" id="kobo.413.1"> instruction, as we learned previously, we are just visualizing the HTML; you can play around and customize it as you want by changing the background and text color, padding, text, and more. </span><span class="koboSpan" id="kobo.413.2">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer088">
<span class="koboSpan" id="kobo.415.1"><img alt="Figure 4.17: A colored title for our app" src="image/B21147_04_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.416.1">Figure 4.17: A colored title for our app</span></p>
<p><span class="koboSpan" id="kobo.417.1">The effect </span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.418.1">is </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">very nice.</span></span></p>
<p><span class="koboSpan" id="kobo.420.1">Now, let’s create </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.421.1">a subtitle. </span><span class="koboSpan" id="kobo.421.2">To do this, we can use a subheader and use more or less the same HTML code. </span><span class="koboSpan" id="kobo.421.3">We just need to add another couple of lines of code, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer089">
<span class="koboSpan" id="kobo.423.1"><img alt="Figure 4.18: The final code for the title and subheader" src="image/B21147_04_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.424.1">Figure 4.18: The final code for the title and subheader</span></p>
<p><span class="koboSpan" id="kobo.425.1">We approached </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.426.1">this the same way we approached </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">title_template</span></strong><span class="koboSpan" id="kobo.428.1"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.429.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.430.1">.16</span></em><span class="koboSpan" id="kobo.431.1">: we defined some HTML in a variable (in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">subheader_template</span></strong><span class="koboSpan" id="kobo.433.1">) and then </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.434.1">visualized it using </span><strong class="source-inline"><span class="koboSpan" id="kobo.435.1">st.markdown</span></strong><span class="koboSpan" id="kobo.436.1"> and by setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">unsafe_allow_html</span></strong><span class="koboSpan" id="kobo.438.1"> argument </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">True</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.442.1">As mentioned previously, everything is fully customizable according to your ideas. </span><span class="koboSpan" id="kobo.442.2">This is the </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">final result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer090">
<span class="koboSpan" id="kobo.444.1"><img alt="Figure 4.19: The final colored title and subheader" src="image/B21147_04_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.445.1">Figure 4.19: The final colored title and subheader</span></p>
<p><span class="koboSpan" id="kobo.446.1">Since we put </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.447.1">these decorations at the very beginning of the main function – that is, before creating the left-hand side menu and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">if</span></strong><span class="koboSpan" id="kobo.449.1"> clauses that are in charge of selecting </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.450.1">various tasks – the colored HTML title and header will not change when we switch the various menu items since they are fixed on the top of the screen and give our web application a very good </span><em class="italic"><span class="koboSpan" id="kobo.451.1">style consistency</span></em><span class="koboSpan" id="kobo.452.1">. </span><span class="koboSpan" id="kobo.452.2">In short, since we put this HTML code at the beginning of the main function, it will be applied to the entire web application and not to any specific task – everything will be affected by this title. </span><span class="koboSpan" id="kobo.452.3">The title will be a fixed element of our </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.454.1">If we look at our web application’s panel in the browser, we will see that the icon and the title are the default ones since the icon is Streamlit’s, and the title is just the name of our Python </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">file (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">app.py</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer091">
<span class="koboSpan" id="kobo.458.1"><img alt="Figure 4.20: The web app’s default icon and title in the browser" src="image/B21147_04_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.459.1">Figure 4.20: The web app’s default icon and title in the browser</span></p>
<p><span class="koboSpan" id="kobo.460.1">Let’s customize </span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.461.1">these two very important features. </span><span class="koboSpan" id="kobo.461.2">In Streamlit, there is an </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.462.1">instruction dedicated exactly to this purpose, but – and this is very important – it has to be placed immediately after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">streamlit import</span></strong><span class="koboSpan" id="kobo.464.1"> line. </span><span class="koboSpan" id="kobo.464.2">This instruction is </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1">set_page_config</span></strong><span class="koboSpan" id="kobo.466.1">. </span><span class="koboSpan" id="kobo.466.2">Let’s add it to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">app.py</span></strong><span class="koboSpan" id="kobo.468.1"> file and then explain how </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">it works:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer092">
<span class="koboSpan" id="kobo.470.1"><img alt="Figure 4.21: The set_page_config instruction" src="image/B21147_04_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.471.1">Figure 4.21: The set_page_config instruction</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">set_page_config</span></strong><span class="koboSpan" id="kobo.473.1"> accepts a certain number of arguments, </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">page_title</span></strong><span class="koboSpan" id="kobo.476.1">: The title of our page; this is </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">a string</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">page_icon</span></strong><span class="koboSpan" id="kobo.479.1">: An icon (an image file) or an emoji (the emoji itself or </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">its code)</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.481.1">layout</span></strong><span class="koboSpan" id="kobo.482.1">: This can be </span><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">centered</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.484.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">wide</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">initial_sidebar_state</span></strong><span class="koboSpan" id="kobo.487.1">: This can be </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">wide</span></strong><span class="koboSpan" id="kobo.489.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">expanded</span></strong><span class="koboSpan" id="kobo.491.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">collapsed</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.494.1">You can experiment with different configurations and easily find information on how to use each instruction in Streamlit’s </span><strong class="bold"><span class="koboSpan" id="kobo.495.1">Documentation</span></strong><span class="koboSpan" id="kobo.496.1"> section, which includes input arguments and </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">output results.</span></span></p>
<p><span class="koboSpan" id="kobo.498.1">The following </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.499.1">screenshot explains the </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">set_page_config()</span></strong><span class="koboSpan" id="kobo.501.1"> instruction. </span><span class="koboSpan" id="kobo.501.2">As you can see, there are several different configurations that we didn’t explore, and it’s </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.502.1">possible to combine them to fully customize your web application. </span><span class="koboSpan" id="kobo.502.2">So, please don’t forget to carefully check the official Streamlit documentation to get the most value out of this </span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">incredible framework:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer093">
<span class="koboSpan" id="kobo.504.1"><img alt="Figure 4.22: Streamlit’s official documentation" src="image/B21147_04_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.505.1">Figure 4.22: Streamlit’s official documentation</span></p>
<p><span class="koboSpan" id="kobo.506.1">Now that we’ve looked at Streamlit’s official documentation, let’s have a look at our web application with the new page title </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">and icon:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer094">
<span class="koboSpan" id="kobo.508.1"><img alt="Figure 4.23: Icon and title customization in the browser panel" src="image/B21147_04_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.509.1">Figure 4.23: Icon and title customization in the browser panel</span></p>
<p><span class="koboSpan" id="kobo.510.1">As you can see, in the browser tile related to our web application, we have a full set of customizations: an icon representing a thumb and a personalized title stating </span><em class="italic"><span class="koboSpan" id="kobo.511.1">NLP Web App</span></em><span class="koboSpan" id="kobo.512.1">. </span><span class="koboSpan" id="kobo.512.2">This is the result of the code we saw in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.513.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.514.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.516.1">If you want to, you can </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.517.1">see what happens upon changing the 👍 emoji we used </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.518.1">as an icon with an image, such as a PNG file that you like. </span><span class="koboSpan" id="kobo.518.2">You can also check how the web application behaves when we set </span><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">initial_sidebar_state</span></strong><span class="koboSpan" id="kobo.520.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.521.1">wide</span></strong><span class="koboSpan" id="kobo.522.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">expanded</span></strong><span class="koboSpan" id="kobo.524.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">collapsed</span></strong><span class="koboSpan" id="kobo.526.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">layout</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.528.1">to wide.</span></span></p>
<p><span class="koboSpan" id="kobo.529.1">The decorations we added to our web app skeleton are clean, neat, and good-looking but up until now, excluding the </span><strong class="bold"><span class="koboSpan" id="kobo.530.1">About</span></strong><span class="koboSpan" id="kobo.531.1"> section, which can be considered closed, the rest need to be completed with some business logic to make the various </span><strong class="bold"><span class="koboSpan" id="kobo.532.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.533.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.534.1">Translation</span></strong><span class="koboSpan" id="kobo.535.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.536.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.537.1"> tasks work properly. </span><span class="koboSpan" id="kobo.537.2">This is exactly what we are going to do in the </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">next chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.539.1">The following figure shows all the code we wrote. </span><span class="koboSpan" id="kobo.539.2">It’s quite interesting to point out how, in only 64 lines of code, including empty lines and comments, we have built up a working web application that lives on the web and can be used by a browser and that contains </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.540.1">a menu, some </span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.541.1">sections, HTML, titles, </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">and decorations:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer095">
<span class="koboSpan" id="kobo.543.1"><img alt="" role="presentation" src="image/B21147_04_24.jpg"/></span>
</div>
</div>
<div>
<div class="IMG---Figure" id="_idContainer096">
<span class="koboSpan" id="kobo.544.1"><img alt="" role="presentation" src="image/B21147_04_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.545.1">Figure 4.24: The app.py file</span></p>
<p><span class="koboSpan" id="kobo.546.1">The best </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.547.1">part is that </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.548.1">you can reuse it as </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">you wish!</span></span></p>
<h1 id="_idParaDest-52"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.550.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.551.1">In this chapter, we began from scratch. </span><span class="koboSpan" id="kobo.551.2">First of all, we prepared our </span><strong class="source-inline"><span class="koboSpan" id="kobo.552.1">pipenv</span></strong><span class="koboSpan" id="kobo.553.1"> environment, installed all packages needed for the web application, and finally created an empty </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">Python file.</span></span></p>
<p><span class="koboSpan" id="kobo.555.1">After that, we built up a </span><em class="italic"><span class="koboSpan" id="kobo.556.1">skeleton</span></em><span class="koboSpan" id="kobo.557.1"> that can be reused any time we want to develop a new web application. </span><span class="koboSpan" id="kobo.557.2">This skeleton is made up of an initial part where we import all the packages we need and a </span><em class="italic"><span class="koboSpan" id="kobo.558.1">main</span></em><span class="koboSpan" id="kobo.559.1"> function that is dedicated to containing all the business logic of our </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">web app.</span></span></p>
<p><span class="koboSpan" id="kobo.561.1">In the first part of the main function, some features must be applied to the entire web application, such as its title and subtitle, which we created with very beautiful and colorful HTML, and the web browser’s panel icon </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">and title.</span></span></p>
<p><span class="koboSpan" id="kobo.563.1">In the second part of the main function, we created a menu that will be shown on the left-hand side of our web application and that lets the user choose from the various tasks our web application can perform. </span><span class="koboSpan" id="kobo.563.2">Upon selecting one of the tasks in the menu, the web application will show its specific section performing its specific task. </span><span class="koboSpan" id="kobo.563.3">We implemented this because we wanted to start with a very easy case. </span><span class="koboSpan" id="kobo.563.4">The </span><strong class="bold"><span class="koboSpan" id="kobo.564.1">About</span></strong><span class="koboSpan" id="kobo.565.1"> section now performs well, showing the name/title of the web application and some useful information – in this case, the working link to </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">Streamlit’s website.</span></span></p>
<p><span class="koboSpan" id="kobo.567.1">Everything is working well and has been customized according to our willingness and future needs. </span><span class="koboSpan" id="kobo.567.2">This shows that this skeleton is a great weapon in our </span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">developer’s toolkit!</span></span></p>
<p><span class="koboSpan" id="kobo.569.1">In the next chapter, we’ll start building the complete business logic of our application by using and learning about some very powerful widgets such as columns and expanders, as well as some </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">NLP techniques!</span></span></p>
</div>
</body></html>