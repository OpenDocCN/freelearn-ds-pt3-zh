<html><head></head><body>
<div class="IMG---Figure" id="_idContainer129">
<h1 class="chapter-number" id="_idParaDest-53"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 id="_idParaDest-54"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.2.1">Organizing and Displaying Content with Columns, Expanders, and NLP Techniques</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this chapter, we will develop all the business logic required for the skeleton app we implemented in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.4.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.5.1">. </span><span class="koboSpan" id="kobo.5.2">We are going to learn about some extremely important features </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">of Streamlit.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">Columns and expanders are two layout features in the Streamlit framework that allow for more flexible and organized display of content in a </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">Columns allow for dividing the screen horizontally into multiple sections, each with its own content. </span><span class="koboSpan" id="kobo.9.2">This is useful for displaying multiple visualizations or data tables side by side, or for separating different parts of the app’s interface. </span><span class="koboSpan" id="kobo.9.3">Expanders, on the other hand, allow for collapsing and expanding sections of content within a column. </span><span class="koboSpan" id="kobo.9.4">This is useful for hiding less important or less frequently used parts of the app’s interface, and allowing users to expand them only </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">when needed.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">In NLP, tokens are individual text units segmented by white space or punctuation. </span><span class="koboSpan" id="kobo.11.2">Lemmas, on the other hand, are the base or dictionary form of a word, which may differ from the inflected or derived form found in </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">the text.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">By the end of the chapter, our first web application should appear much more complete and you should have a wider understanding of how to build a Python web application </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">using Streamlit.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.17.1">Organizing and arranging content in a </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">web app</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Hiding and showing parts depending </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">on importance</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Introducing NLP concepts – tokens </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">and lemmas</span></span></li>
</ul>
<h1 id="_idParaDest-55"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.23.1">Technical requirements</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.24.1">In this chapter, we will use the following libraries, packages, </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">and tools:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.26.1">Sublime Text</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.27.1">Python 3</span></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.28.1">pipenv</span></strong></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Streamlit</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.30.1">Spacy</span></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.31.1">neattext</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.32.1">matplotlib</span></strong></span></li></ul></li>
<li><span class="koboSpan" id="kobo.33.1">Code in the chapter can be accessed through the following GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">link: </span></span><a href="https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/bd70c6ee45d046134e71c3c8a93c3d97172bf3f9/Chapter05"><span class="No-Break"><span class="koboSpan" id="kobo.35.1">https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/bd70c6ee45d046134e71c3c8a93c3d97172bf3f9/Chapter05</span></span></a></li>
</ul>
<h1 id="_idParaDest-56"><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.36.1">Organizing and arranging content in a web app</span></h1>
<p><span class="koboSpan" id="kobo.37.1">In </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.38.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.39.1">, we built the </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.40.1">foundations of our first web application </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.41.1">and wrote some Python code that, once executed, gives us the </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">following result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer098">
<span class="koboSpan" id="kobo.43.1"><img alt="Figure 5.1: Chapter 5 starting point" src="image/B21147_05_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.44.1">Figure 5.1: </span><a href="B21147_05.xhtml#_idTextAnchor053"><em class="italic"><span class="koboSpan" id="kobo.45.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.46.1"> starting point</span></p>
<p><span class="koboSpan" id="kobo.47.1">We completed the </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">About</span></strong><span class="koboSpan" id="kobo.49.1"> section, made some decorations in terms of colors, and added an icon (the so-called </span><em class="italic"><span class="koboSpan" id="kobo.50.1">favicon</span></em><span class="koboSpan" id="kobo.51.1">) and a title to the web </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">browser page.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">It’s time to complete the three remaining voices of the menu: </span><strong class="bold"><span class="koboSpan" id="kobo.54.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.55.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.56.1">Translation</span></strong><span class="koboSpan" id="kobo.57.1">, and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.58.1">Sentiment Analysis</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">.</span></span></p>
<h2 id="_idParaDest-57"><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.60.1">Adding decorations</span></h2>
<p><span class="koboSpan" id="kobo.61.1">Before completing the three voices of the menu, however, let’s add a nice decoration to the sidebar </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.62.1">of our web app. </span><span class="koboSpan" id="kobo.62.2">So, once again, open the Sublime Text editor and </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">restart coding.</span></span></p>
<p><span class="koboSpan" id="kobo.64.1">We need to add an image to the sidebar immediately after the second HTML of the title on </span><em class="italic"><span class="koboSpan" id="kobo.65.1">lines 35-36</span></em><span class="koboSpan" id="kobo.66.1"> of our code. </span><span class="koboSpan" id="kobo.66.2">This is an easy coding task, and it is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer099">
<span class="koboSpan" id="kobo.68.1"><img alt="Figure 5.2: st.sidebar.image" src="image/B21147_05_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.69.1">Figure 5.2: st.sidebar.image</span></p>
<p><span class="koboSpan" id="kobo.70.1">The process is extremely easy: we are adding to the sidebar </span><strong class="source-inline"><span class="koboSpan" id="kobo.71.1">(st.sidebar)</span></strong><span class="koboSpan" id="kobo.72.1"> an image. </span><span class="koboSpan" id="kobo.72.2">We just wrote </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">NLP</span></strong><span class="koboSpan" id="kobo.74.1"> in Google and downloaded an image, saving it as </span><strong class="source-inline"><span class="koboSpan" id="kobo.75.1">nlp.jpg</span></strong><span class="koboSpan" id="kobo.76.1"> in the same folder as our Python script. </span><span class="koboSpan" id="kobo.76.2">Since we are setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">unsafe_allow_width</span></strong><span class="koboSpan" id="kobo.78.1"> argument to </span><strong class="source-inline"><span class="koboSpan" id="kobo.79.1">True</span></strong><span class="koboSpan" id="kobo.80.1">, the width of our image will be exactly the same as that of all other elements in the sidebar. </span><span class="koboSpan" id="kobo.80.2">If you want, instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.81.1">unsafe_allow_width</span></strong><span class="koboSpan" id="kobo.82.1">, you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.83.1">width</span></strong><span class="koboSpan" id="kobo.84.1"> one in the </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">following way:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.86.1">
width = 200</span></pre> <p><span class="koboSpan" id="kobo.87.1">You can try with different widths (100, 300, etc.) and observe the </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">different results.</span></span></p>
<p><span class="koboSpan" id="kobo.89.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.90.1">Figure 5</span></em></span><em class="italic"><span class="koboSpan" id="kobo.91.1">.3</span></em><span class="koboSpan" id="kobo.92.1">, we can see the result of the </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">last decoration:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer100">
<span class="koboSpan" id="kobo.94.1"><img alt="Figure 5.3: A picture in the sidebar" src="image/B21147_05_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.95.1">Figure 5.3: A picture in the sidebar</span></p>
<p><span class="koboSpan" id="kobo.96.1">Our web </span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.97.1">application is starting to look appealing! </span><span class="koboSpan" id="kobo.97.2">Now we can move on to the text </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">analysis part.</span></span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.99.1">Adding the Text Analysis part</span></h2>
<p><span class="koboSpan" id="kobo.100.1">In this part, we will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">textblob</span></strong><span class="koboSpan" id="kobo.102.1">, a Python library for processing textual data. </span><span class="koboSpan" id="kobo.102.2">It provides a </span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.103.1">simple API for diving into common NLP tasks </span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.104.1">such as part-of-speech tagging, sentiment analysis, classification, and more. </span><span class="koboSpan" id="kobo.104.2">For more details, visit </span><a href="http://pypi.org"><span class="koboSpan" id="kobo.105.1">pypi.org</span></a><span class="koboSpan" id="kobo.106.1"> (the famous Python </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">Package Index).</span></span></p>
<p><span class="koboSpan" id="kobo.108.1">As usual, we need to install the package in our virtual environment by just typing the </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.110.1">
pipenv install textblob</span></pre> <p><span class="koboSpan" id="kobo.111.1">And then, we import it into our Python script, adding the following line at the very beginning in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">importing </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.113.1">libraries</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.114.1"> part:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.115.1">
from textblob import TextBlob</span></pre> <p><span class="koboSpan" id="kobo.116.1">Anyway, if you followed </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.117.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.118.1"> carefully, you have already done this, but it’s better to repeat it just </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">in case.</span></span></p>
<p><span class="koboSpan" id="kobo.120.1">Let’s jump to the </span><em class="italic"><span class="koboSpan" id="kobo.121.1">Text Analysis</span></em><span class="koboSpan" id="kobo.122.1"> part of our script and finally add its specific business logic. </span><em class="italic"><span class="koboSpan" id="kobo.123.1">Text Analysis</span></em><span class="koboSpan" id="kobo.124.1">, as we will see during the coding, is a function focused on text stats (length, number of words, etc.), wordstopping, lemmas and tokens, and so on. </span><span class="koboSpan" id="kobo.124.2">We will quickly explain these concepts one by one in the next pages. </span><span class="koboSpan" id="kobo.124.3">Besides NLP concepts, what is very important here is to understand how to use the various Streamlit widgets, functions, and technicalities in order to create and build up solid and well-performing </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">web applications.</span></span></p>
<h3><span class="koboSpan" id="kobo.126.1">Adding a text area</span></h3>
<p><span class="koboSpan" id="kobo.127.1">Currently, in this part, we just have a header and a subheader. </span><span class="koboSpan" id="kobo.127.2">In order to perform text analysis, for sure </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.128.1">we need some text, so as the very first operation, let’s add a text area where we can input all the text </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">we want:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer101">
<span class="koboSpan" id="kobo.130.1"><img alt="Figure 5.4: st.text_area" src="image/B21147_05_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.131.1">Figure 5.4: st.text_area</span></p>
<p><span class="koboSpan" id="kobo.132.1">We are using </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">text_area</span></strong><span class="koboSpan" id="kobo.134.1"> to get some text and put it in a variable named </span><strong class="source-inline"><span class="koboSpan" id="kobo.135.1">raw_text</span></strong><span class="koboSpan" id="kobo.136.1">. </span><span class="koboSpan" id="kobo.136.2">Try to play with </span><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">st.text_area</span></strong><span class="koboSpan" id="kobo.138.1"> arguments a little, and especially try to discover what happens if you don’t </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">use </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.140.1">height</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.142.1">Adding the Analyze button</span></h3>
<p><span class="koboSpan" id="kobo.143.1">We want to </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.144.1">do something with the text typed in this </span><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">text_area</span></strong><span class="koboSpan" id="kobo.146.1"> so, just to understand better how it works, let’s add a button named </span><strong class="bold"><span class="koboSpan" id="kobo.147.1">Analyze</span></strong><span class="koboSpan" id="kobo.148.1"> that, when pushed, writes our text on the screen. </span><span class="koboSpan" id="kobo.148.2">The code is quite simple, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer102">
<span class="koboSpan" id="kobo.150.1"><img alt="Figure 5.5: A button to show our text" src="image/B21147_05_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.151.1">Figure 5.5: A button to show our text</span></p>
<p><span class="koboSpan" id="kobo.152.1">To keep it very neat and clean, we write something in the text area – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">Hello everybody!</span></strong><span class="koboSpan" id="kobo.154.1"> – click on the button, and see what we wrote on the screen. </span><span class="koboSpan" id="kobo.154.2">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer103">
<span class="koboSpan" id="kobo.156.1"><img alt="Figure 5.6: Hello everybody!" src="image/B21147_05_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.157.1">Figure 5.6: Hello everybody!</span></p>
<p><span class="koboSpan" id="kobo.158.1">To perform </span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.159.1">any NLP task, TextBlob needs to convert any text into a </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">Blob</span></strong><span class="koboSpan" id="kobo.161.1"> object, something specific to this nice package. </span><span class="koboSpan" id="kobo.161.2">Let us </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">see how.</span></span></p>
<h3><span class="koboSpan" id="kobo.163.1">Creating the Blob object</span></h3>
<p><span class="koboSpan" id="kobo.164.1">To perform all our NLP tasks with TextBlob, we have to be sure that this Blob can be created, and it can </span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.165.1">be created only if the text area contains some text – in other words, if the text area is </span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">not empty.</span></span></p>
<p><span class="koboSpan" id="kobo.167.1">Let’s modify the preceding code a bit, just to be sure that the text area is not empty and that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">Blob</span></strong><span class="koboSpan" id="kobo.169.1"> object will be created </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">without issues:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer104">
<span class="koboSpan" id="kobo.171.1"><img alt="Figure 5.7: TextBlob in action" src="image/B21147_05_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.172.1">Figure 5.7: TextBlob in action</span></p>
<p><span class="koboSpan" id="kobo.173.1">So, </span><em class="italic"><span class="koboSpan" id="kobo.174.1">if</span></em><span class="koboSpan" id="kobo.175.1"> there is no </span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.176.1">text in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">text_area</span></strong><span class="koboSpan" id="kobo.178.1">, its length (</span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">len</span></strong><span class="koboSpan" id="kobo.180.1">) is equal to zero and we display a warning message; otherwise (</span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">else</span></strong><span class="koboSpan" id="kobo.182.1">) we create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">TextBlob</span></strong><span class="koboSpan" id="kobo.184.1"> object, save it as a variable named </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">blob</span></strong><span class="koboSpan" id="kobo.186.1">, and display a confirmation </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">message (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">OK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">And now, we have our </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">TextBlob</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.192.1">object working.</span></span></p>
<h3><span class="koboSpan" id="kobo.193.1">Adding basic functions</span></h3>
<p><span class="koboSpan" id="kobo.194.1">Up to now, we have edited all code properly and we are ready to implement some real text analysis </span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.195.1">functions. </span><span class="koboSpan" id="kobo.195.2">In fact, we will be using </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">TextBlob</span></strong><span class="koboSpan" id="kobo.197.1"> later on for the sentiment analysis function. </span><span class="koboSpan" id="kobo.197.2">Now, we just use it to check that the application runs correctly, so if you want, you can comment on the following line of code, </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.199.1">
#blob = TextBlob(raw_text)</span></pre> <p><span class="koboSpan" id="kobo.200.1">Let’s get started with </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">Basic Functions</span></strong><span class="koboSpan" id="kobo.202.1">, so replace the </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">st.write("OK")</span></strong><span class="koboSpan" id="kobo.204.1"> line with </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.206.1">
st.info("Basic Function")</span></pre> <p><span class="koboSpan" id="kobo.207.1">So far, we are at the stage shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer105">
<span class="koboSpan" id="kobo.209.1"><img alt="Figure 5.8: Basic functions" src="image/B21147_05_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.210.1">Figure 5.8: Basic functions</span></p>
<p><span class="koboSpan" id="kobo.211.1">It’s time to </span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.212.1">understand how to show and hide information on the screen using columns, expanders, and more </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">advanced coding.</span></span></p>
<h1 id="_idParaDest-59"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.214.1">Hiding and showing parts depending on importance</span></h1>
<p><span class="koboSpan" id="kobo.215.1">From a very broad point of view, an application is just a way to visualize, transform, and save information. </span><span class="koboSpan" id="kobo.215.2">Not always </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.216.1">showing all the available information </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.217.1">at the same time is a winning idea. </span><span class="koboSpan" id="kobo.217.2">For example, having all the information on a unique screen could make our app very crowded. </span><span class="koboSpan" id="kobo.217.3">In other cases, we are not interested in visualizing all the information simultaneously because we want to see only a specific piece of information that is of our interest. </span><span class="koboSpan" id="kobo.217.4">So, hiding and properly showing information in our web application is a very valuable skill </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">to acquire.</span></span></p>
<h2 id="_idParaDest-60"><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.219.1">Adding columns, expanders, and a textbox</span></h2>
<p><span class="koboSpan" id="kobo.220.1">Columns </span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.221.1">are very </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.222.1">useful because </span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.223.1">they allow us to create some </span><em class="italic"><span class="koboSpan" id="kobo.224.1">layers</span></em><span class="koboSpan" id="kobo.225.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.226.1">different parts</span></em><span class="koboSpan" id="kobo.227.1">. </span><span class="koboSpan" id="kobo.227.2">This means that by using columns, we can divide the screen into as many vertical sections as we want and use these sections (or columns) for any kind of specific purpose we think should be in a specific – or let’s say dedicated – container. </span><span class="koboSpan" id="kobo.227.3">All we </span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.228.1">need to do is create or declare </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">these widgets.</span></span></p>
<p><span class="koboSpan" id="kobo.230.1">We start </span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.231.1">using them by adopting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">with</span></strong><span class="koboSpan" id="kobo.233.1"> instruction. </span><span class="koboSpan" id="kobo.233.2">Let’s </span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.234.1">see it </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">in detail:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer106">
<span class="koboSpan" id="kobo.236.1"><img alt="Figure 5.9: Columns and expanders" src="image/B21147_05_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.237.1">Figure 5.9: Columns and expanders</span></p>
<p><span class="koboSpan" id="kobo.238.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">col1, col2 = st.columns(2)</span></strong><span class="koboSpan" id="kobo.240.1"> line just creates two columns named </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">col1</span></strong><span class="koboSpan" id="kobo.242.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">col2</span></strong><span class="koboSpan" id="kobo.244.1">. </span><span class="koboSpan" id="kobo.244.2">In the two </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">with</span></strong><span class="koboSpan" id="kobo.246.1"> lines, we use these columns. </span><span class="koboSpan" id="kobo.246.2">In each of the columns, we create an </span><em class="italic"><span class="koboSpan" id="kobo.247.1">expander</span></em><span class="koboSpan" id="kobo.248.1">; any expander has its own label (</span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1">Basic Info</span></strong><span class="koboSpan" id="kobo.250.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">Processed Text</span></strong><span class="koboSpan" id="kobo.252.1">). </span><span class="koboSpan" id="kobo.252.2">Expanders are clickable since they have an </span><em class="italic"><span class="koboSpan" id="kobo.253.1">up arrow</span></em><span class="koboSpan" id="kobo.254.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.255.1">down arrow</span></em><span class="koboSpan" id="kobo.256.1"> symbol. </span><span class="koboSpan" id="kobo.256.2">Clicking on these symbols, we </span><em class="italic"><span class="koboSpan" id="kobo.257.1">expand</span></em><span class="koboSpan" id="kobo.258.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.259.1">collapse</span></em><span class="koboSpan" id="kobo.260.1"> these widgets to reveal their content – in our example, just </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">st.write</span></strong><span class="koboSpan" id="kobo.262.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">st.success</span></strong><span class="koboSpan" id="kobo.264.1"> instructions. </span><span class="koboSpan" id="kobo.264.2">The effect in the browser is </span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">very beautiful:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer107">
<span class="koboSpan" id="kobo.266.1"><img alt="Figure 5.10: Columns and expanders in our web application" src="image/B21147_05_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.267.1">Figure 5.10: Columns and expanders in our web application</span></p>
<p><span class="koboSpan" id="kobo.268.1">Since we </span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.269.1">want to also include a couple of </span><em class="italic"><span class="koboSpan" id="kobo.270.1">Advanced Features</span></em><span class="koboSpan" id="kobo.271.1"> in our </span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.272.1">web app, let’s copy the latest part </span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.273.1">of the code in order to create another couple of columns and expanders, plus an </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">info</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.275.1">text box:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer108">
<span class="koboSpan" id="kobo.276.1"><img alt="Figure 5.11: New columns and expanders" src="image/B21147_05_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.277.1">Figure 5.11: New columns and expanders</span></p>
<p><span class="koboSpan" id="kobo.278.1">The code </span><a id="_idIndexMarker200"/><span class="koboSpan" id="kobo.279.1">we added </span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.280.1">is the same </span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.281.1">as we already commented previously. </span><span class="koboSpan" id="kobo.281.2">Its impact on the web application is </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer109">
<span class="koboSpan" id="kobo.283.1"><img alt="Figure 5.12: Our application layout is going to be completed" src="image/B21147_05_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.284.1">Figure 5.12: Our application layout is going to be completed</span></p>
<p><span class="koboSpan" id="kobo.285.1">To summarize, up to </span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.286.1">now we have two layers, two expanders, and two </span><a id="_idIndexMarker204"/><span class="koboSpan" id="kobo.287.1">columns for every layer; the effect is very </span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.288.1">clean and well-balanced. </span><span class="koboSpan" id="kobo.288.2">Now we can take care of the four functions: two basic and </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">two advanced.</span></span></p>
<h2 id="_idParaDest-61"><a id="_idTextAnchor061"/><span class="koboSpan" id="kobo.290.1">Adding the two basic functions</span></h2>
<p><span class="koboSpan" id="kobo.291.1">Let’s start </span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.292.1">with the first basic function: </span><strong class="bold"><span class="koboSpan" id="kobo.293.1">Basic Info</span></strong><span class="koboSpan" id="kobo.294.1">. </span><span class="koboSpan" id="kobo.294.2">Expanding </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">Basic Info</span></strong><span class="koboSpan" id="kobo.296.1">, we get </span><strong class="bold"><span class="koboSpan" id="kobo.297.1">Text Stats</span></strong><span class="koboSpan" id="kobo.298.1">. </span><span class="koboSpan" id="kobo.298.2">In </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.299.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.300.1">, among others, we imported the </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">neattext</span></strong><span class="koboSpan" id="kobo.302.1"> package, which is very useful for our statistics as it has a function named </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">word_stats</span></strong><span class="koboSpan" id="kobo.304.1">. </span><span class="koboSpan" id="kobo.304.2">If you haven’t already imported it, it’s time to </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">do so.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">word_stats</span></strong><span class="koboSpan" id="kobo.307.1"> returns a dictionary, so a </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">key:value</span></strong><span class="koboSpan" id="kobo.309.1"> data structure; all we need to do is to get the information from it (putting in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.310.1">word_desc</span></strong><span class="koboSpan" id="kobo.311.1"> variable), then write everything on the screen in the proper column. </span><span class="koboSpan" id="kobo.311.2">The following screenshot shows the code that obviously is part </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">col1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer110">
<span class="koboSpan" id="kobo.315.1"><img alt="Figure 5.13: Text Stats" src="image/B21147_05_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.316.1">Figure 5.13: Text Stats</span></p>
<p><span class="koboSpan" id="kobo.317.1">We can </span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.318.1">access the stats using a simple key:value combination. </span><span class="koboSpan" id="kobo.318.2">However, the logic of the required code is outside the scope of this book, which focuses on Streamlit. </span><span class="koboSpan" id="kobo.318.3">The important thing to understand is that any specific function must be coded in the correct column section. </span><span class="koboSpan" id="kobo.318.4">This is what we see in our </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">web application:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer111">
<span class="koboSpan" id="kobo.320.1"><img alt="Figure 5.14: Text Stats function effect on the screen" src="image/B21147_05_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.321.1">Figure 5.14: Text Stats function effect on the screen</span></p>
<p><span class="koboSpan" id="kobo.322.1">Now, let’s add </span><a id="_idIndexMarker208"/><span class="koboSpan" id="kobo.323.1">the second basic function: </span><strong class="bold"><span class="koboSpan" id="kobo.324.1">Processed Text</span></strong><span class="koboSpan" id="kobo.325.1">. </span><span class="koboSpan" id="kobo.325.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">nexttext</span></strong><span class="koboSpan" id="kobo.327.1"> library is also very useful for </span><strong class="bold"><span class="koboSpan" id="kobo.328.1">Processed Text</span></strong><span class="koboSpan" id="kobo.329.1"> and this task is quite easy. </span><span class="koboSpan" id="kobo.329.2">We can jump to the </span><strong class="bold"><span class="koboSpan" id="kobo.330.1">Processed Text</span></strong><span class="koboSpan" id="kobo.331.1"> part of the code and add a very simple instruction, as illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer112">
<span class="koboSpan" id="kobo.333.1"><img alt="Figure 5.15: The Processed Text expander" src="image/B21147_05_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.334.1">Figure 5.15: The Processed Text expander</span></p>
<p><span class="koboSpan" id="kobo.335.1">We can </span><a id="_idIndexMarker209"/><span class="koboSpan" id="kobo.336.1">use </span><strong class="source-inline"><span class="koboSpan" id="kobo.337.1">neattext</span></strong><span class="koboSpan" id="kobo.338.1">’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">remove_stopwords()</span></strong><span class="koboSpan" id="kobo.340.1"> to get the text we input without the stopwords, then cast it to a string (</span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">str</span></strong><span class="koboSpan" id="kobo.342.1">), and save it in a variable named </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">processed_text</span></strong><span class="koboSpan" id="kobo.344.1">; finally, we write the processed text on the screen. </span><span class="koboSpan" id="kobo.344.2">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer113">
<span class="koboSpan" id="kobo.346.1"><img alt="Figure 5.16: The Processed Text function effect on the screen" src="image/B21147_05_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.347.1">Figure 5.16: The Processed Text function effect on the screen</span></p>
<p><span class="koboSpan" id="kobo.348.1">The result </span><a id="_idIndexMarker210"/><span class="koboSpan" id="kobo.349.1">is nice, but we can do even better – for example, writing on the screen the list of the stopwords we removed from the text. </span><span class="koboSpan" id="kobo.349.2">Please note that stopwords are, let’s say, </span><em class="italic"><span class="koboSpan" id="kobo.350.1">common words</span></em><span class="koboSpan" id="kobo.351.1"> that don’t add any information to our </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">original text.</span></span></p>
<p><span class="koboSpan" id="kobo.353.1">We can add this list into the first column, adding to it a second expander exactly below the first one; this is </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">the code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer114">
<span class="koboSpan" id="kobo.355.1"><img alt="Figure 5.17: The code to extract the stopwords" src="image/B21147_05_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.356.1">Figure 5.17: The code to extract the stopwords</span></p>
<p><span class="koboSpan" id="kobo.357.1">So, we add </span><a id="_idIndexMarker211"/><span class="koboSpan" id="kobo.358.1">a second expander </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">(st.expander()"Stopwords")</span></strong><span class="koboSpan" id="kobo.360.1"> and, once again using </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">neattext</span></strong><span class="koboSpan" id="kobo.362.1">, we extract </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">stopwords (extract_stopwords)</span></strong><span class="koboSpan" id="kobo.364.1"> and put them into a variable </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">(stop_w)</span></strong><span class="koboSpan" id="kobo.366.1">, then print this variable on the screen, this time using </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">st.error</span></strong><span class="koboSpan" id="kobo.368.1">. </span><span class="koboSpan" id="kobo.368.2">Here is </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer115">
<span class="koboSpan" id="kobo.370.1"><img alt="Figure 5.18: ﻿Stopwords visualization" src="image/B21147_05_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.371.1">Figure 5.18: Stopwords visualization</span></p>
<p><span class="koboSpan" id="kobo.372.1">Everything is </span><a id="_idIndexMarker212"/><span class="koboSpan" id="kobo.373.1">working fine: </span><strong class="bold"><span class="koboSpan" id="kobo.374.1">Text Stats</span></strong><span class="koboSpan" id="kobo.375.1"> tells us how many stopwords we have, </span><strong class="bold"><span class="koboSpan" id="kobo.376.1">Stop Words List</span></strong><span class="koboSpan" id="kobo.377.1"> shows us those stopwords in a list, and </span><strong class="bold"><span class="koboSpan" id="kobo.378.1">Processed Text</span></strong><span class="koboSpan" id="kobo.379.1"> shows the text without </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">these items.</span></span></p>
<h2 id="_idParaDest-62"><a id="_idTextAnchor062"/><span class="koboSpan" id="kobo.381.1">Adding a wordcloud</span></h2>
<p><span class="koboSpan" id="kobo.382.1">Since the </span><strong class="bold"><span class="koboSpan" id="kobo.383.1">Basic Functions</span></strong><span class="koboSpan" id="kobo.384.1"> layer is now unbalanced, let’s add a beautiful </span><em class="italic"><span class="koboSpan" id="kobo.385.1">wordcloud</span></em><span class="koboSpan" id="kobo.386.1"> on the right, just to </span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.387.1">make everything much more symmetric. </span><span class="koboSpan" id="kobo.387.2">Please double-check that you already imported the </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">Wordcloud</span></strong><span class="koboSpan" id="kobo.389.1"> library, as suggested in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.390.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.391.1">. </span><span class="koboSpan" id="kobo.391.2">This time, we can add another expander into the second column and write a few lines of code, as illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer116">
<span class="koboSpan" id="kobo.393.1"><img alt="Figure 5.19: Wordcloud plotting code" src="image/B21147_05_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.394.1">Figure 5.19: Wordcloud plotting code</span></p>
<p><span class="koboSpan" id="kobo.395.1">A few lines </span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.396.1">of code and a wordcloud will appear! </span><span class="koboSpan" id="kobo.396.2">So, we add another expander, then create a wordcloud from the original text using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">generate</span></strong><span class="koboSpan" id="kobo.398.1"> method, and then define a figure with its size. </span><span class="koboSpan" id="kobo.398.2">Finally, use </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">plt</span></strong><span class="koboSpan" id="kobo.400.1"> (we already imported </span><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">pyplot</span></strong><span class="koboSpan" id="kobo.402.1">) to plot the wordcloud without </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">axis</span></strong><span class="koboSpan" id="kobo.404.1">. </span><span class="koboSpan" id="kobo.404.2">We used a longer original text for a richer wordcloud. </span><span class="koboSpan" id="kobo.404.3">The bigger the words appear, the more often they occur in the text. </span><span class="koboSpan" id="kobo.404.4">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer117">
<span class="koboSpan" id="kobo.406.1"><img alt="Figure 5.20: Wordcloud on the screen" src="image/B21147_05_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.407.1">Figure 5.20: Wordcloud on the screen</span></p>
<p><span class="koboSpan" id="kobo.408.1">Now our </span><strong class="bold"><span class="koboSpan" id="kobo.409.1">Basic Functions</span></strong><span class="koboSpan" id="kobo.410.1"> part really is finished. </span><span class="koboSpan" id="kobo.410.2">We have a beautiful text that shows the beginning </span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.411.1">of the section and two columns, and in each of them, two expanders, with everything working well and fluidly. </span><span class="koboSpan" id="kobo.411.2">It’s time to address the advanced features, such as handling tokens, lemmas, and summarization. </span><span class="koboSpan" id="kobo.411.3">We will discuss these in detail further in </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">this chapter.</span></span></p>
<h1 id="_idParaDest-63"><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.413.1">Introducing NLP concepts – tokens and lemmas</span></h1>
<p><span class="koboSpan" id="kobo.414.1">Let’s begin </span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.415.1">exploring </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">Advanced Features</span></strong><span class="koboSpan" id="kobo.417.1"> by creating a simple summarization function in Python and Streamlit. </span><span class="koboSpan" id="kobo.417.2">Although many packages and libraries offer powerful summarization capabilities, this book focuses on web application development rather than NLP </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">or summarization.</span></span></p>
<h2 id="_idParaDest-64"><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.419.1">Adding the summarization function</span></h2>
<p><span class="koboSpan" id="kobo.420.1">Though the name is self-explanatory, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">summarization</span></strong><span class="koboSpan" id="kobo.422.1"> function is a piece of code that summarizes </span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.423.1">a sentence or a text, extracting only the most important part of it. </span><span class="koboSpan" id="kobo.423.2">This task can be achieved in many ways – some very easy, like the one we are proposing just to show how to develop complex web applications with Streamlit, and some very sophisticated, leveraging artificial intelligence and neural networks. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.424.1">Figure 5</span></em></span><em class="italic"><span class="koboSpan" id="kobo.425.1">.21</span></em><span class="koboSpan" id="kobo.426.1"> shows the code where we add the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">summarize_text</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1"> function:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer118">
<span class="koboSpan" id="kobo.429.1"><img alt="Figure 5.21: The summarize_text function" src="image/B21147_05_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.430.1">Figure 5.21: The summarize_text function</span></p>
<p><span class="koboSpan" id="kobo.431.1">An attention point is that after the NLP packages, we imported two </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">new libraries:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.433.1">
from collections import Counter
import re</span></pre> <p><span class="koboSpan" id="kobo.434.1">Both of them are Python standard packages; the first one is a set of collections that includes a counter and the second is the regular </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">expressions package.</span></span></p>
<p><span class="koboSpan" id="kobo.436.1">After this import activity, we defined the </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">summarize_text</span></strong><span class="koboSpan" id="kobo.438.1"> function by writing the </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.440.1">
def summarize_text(text, num_sentences=3):</span></pre> <p><span class="koboSpan" id="kobo.441.1">This function </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.442.1">is very simple: it takes text as input, cleans the text by lowercasing it, splits everything into words, calculates the frequency of each word (that’s why we need the counter), sorts the words according to their frequency, extracts the most frequent, and then creates a summary just by joining the </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">top words.</span></span></p>
<p><span class="koboSpan" id="kobo.444.1">This function can be used inside the expander of the summarization </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer119">
<span class="koboSpan" id="kobo.446.1"><img alt="Figure 5.22: The Summarize expander" src="image/B21147_05_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.447.1">Figure 5.22: The Summarize expander</span></p>
<p><span class="koboSpan" id="kobo.448.1">In the expander of </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">col4</span></strong><span class="koboSpan" id="kobo.450.1">, we are just using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">summarize_text</span></strong><span class="koboSpan" id="kobo.452.1"> function with the input text (</span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">raw_text</span></strong><span class="koboSpan" id="kobo.454.1">) and showing the result on the screen, </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer120">
<span class="koboSpan" id="kobo.456.1"><img alt="Figure 5.23: Summarize in action" src="image/B21147_05_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.457.1">Figure 5.23: Summarize in action</span></p>
<p><span class="koboSpan" id="kobo.458.1">OK, this feature </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.459.1">is not the best, but why don’t you try to improve it by yourself? </span><span class="koboSpan" id="kobo.459.2">For example, you could add some advanced summarization features offered online by many companies via </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">API calls.</span></span></p>
<p><span class="koboSpan" id="kobo.461.1">Next, let us learn what tokens and </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">lemmas are.</span></span></p>
<h2 id="_idParaDest-65"><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.463.1">Tokens and lemmas</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.464.1">Tokens</span></strong><span class="koboSpan" id="kobo.465.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.466.1">lemmas</span></strong><span class="koboSpan" id="kobo.467.1"> are quite </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.468.1">classical concepts of NLP. </span><span class="koboSpan" id="kobo.468.2">Tokens are the smallest </span><em class="italic"><span class="koboSpan" id="kobo.469.1">units</span></em><span class="koboSpan" id="kobo.470.1"> of a text </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.471.1">and are usually identified with words. </span><span class="koboSpan" id="kobo.471.2">So, if we say </span><em class="italic"><span class="koboSpan" id="kobo.472.1">I write code</span></em><span class="koboSpan" id="kobo.473.1">, we have </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.474.1">three tokens: </span><em class="italic"><span class="koboSpan" id="kobo.475.1">I</span></em><span class="koboSpan" id="kobo.476.1">, </span><em class="italic"><span class="koboSpan" id="kobo.477.1">write</span></em><span class="koboSpan" id="kobo.478.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.479.1">code</span></em><span class="koboSpan" id="kobo.480.1">. </span><span class="koboSpan" id="kobo.480.2">Depending </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.481.1">on the granularity level, things can get more complex because sometimes tokens can be identified with single letters. </span><span class="koboSpan" id="kobo.481.2">We don’t consider the letters, just the words. </span><span class="koboSpan" id="kobo.481.3">Please note that even with words, tokenization can be challenging; for example, in the sentence </span><em class="italic"><span class="koboSpan" id="kobo.482.1">I’m writing code</span></em><span class="koboSpan" id="kobo.483.1">, we have many tokens – three or four. </span><span class="koboSpan" id="kobo.483.2">In the first case, </span><em class="italic"><span class="koboSpan" id="kobo.484.1">I’m</span></em><span class="koboSpan" id="kobo.485.1"> is a unique token, while in the second case, we can consider </span><em class="italic"><span class="koboSpan" id="kobo.486.1">I’m</span></em><span class="koboSpan" id="kobo.487.1"> as two words, with two </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">different tokens.</span></span></p>
<p><span class="koboSpan" id="kobo.489.1">There is no right or wrong approach but everything depends on the language and the use case to be considered. </span><span class="koboSpan" id="kobo.489.2">Lemmas are made of so-called </span><em class="italic"><span class="koboSpan" id="kobo.490.1">plain text</span></em><span class="koboSpan" id="kobo.491.1">, so if we say </span><em class="italic"><span class="koboSpan" id="kobo.492.1">code</span></em><span class="koboSpan" id="kobo.493.1">, </span><em class="italic"><span class="koboSpan" id="kobo.494.1">coding</span></em><span class="koboSpan" id="kobo.495.1">, or </span><em class="italic"><span class="koboSpan" id="kobo.496.1">coder</span></em><span class="koboSpan" id="kobo.497.1">, we can assume that for all these three words, the lemma is </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">just </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.499.1">code</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">For </span><em class="italic"><span class="koboSpan" id="kobo.502.1">Tokens&amp;Lemmas</span></em><span class="koboSpan" id="kobo.503.1">, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">spacy</span></strong><span class="koboSpan" id="kobo.505.1">, a very powerful NLP package we imported in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.506.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.507.1">. </span><span class="koboSpan" id="kobo.507.2">Maybe you remember that, in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.508.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.509.1">, we also downloaded the English model used by spaCy (</span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">en_core_web_sm</span></strong><span class="koboSpan" id="kobo.511.1">). </span><span class="koboSpan" id="kobo.511.2">Now we are using both the library and </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">the model.</span></span></p>
<p><span class="koboSpan" id="kobo.513.1">As we did </span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.514.1">for summarization, let’s write a function that takes care </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.515.1">of tokens and lemmas. </span><span class="koboSpan" id="kobo.515.2">We can write, immediately </span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.516.1">after the summarization function, something </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer121">
<span class="koboSpan" id="kobo.518.1"><img alt="Figure 5.24: Lemmas and tokens function" src="image/B21147_05_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.519.1">Figure 5.24: Lemmas and tokens function</span></p>
<p><span class="koboSpan" id="kobo.520.1">First of all, we load </span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.521.1">in spaCy the English model, then create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">nlp</span></strong><span class="koboSpan" id="kobo.523.1"> object (an object specific to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">spacy</span></strong><span class="koboSpan" id="kobo.525.1"> library) from a text (</span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">doc=nlp(text)</span></strong><span class="koboSpan" id="kobo.527.1">), and thanks to this object, we can extract tokens and lemmas (</span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">token.text and token.lemma_</span></strong><span class="koboSpan" id="kobo.529.1">), saving them into a dictionary (a key:value data structure) named </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">allData</span></strong><span class="koboSpan" id="kobo.531.1">. </span><span class="koboSpan" id="kobo.531.2">At the very end, we return this </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">allData</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.533.1"> variable.</span></span></p>
<p><span class="koboSpan" id="kobo.534.1">Please note the strange </span><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">@st.cache_data</span></strong><span class="koboSpan" id="kobo.536.1"> at the beginning of our function. </span><span class="koboSpan" id="kobo.536.2">It’s a </span><em class="italic"><span class="koboSpan" id="kobo.537.1">decorator</span></em><span class="koboSpan" id="kobo.538.1"> that tells Streamlit to save in a cache the data managed by this function, so unless the function’s input doesn’t change, any time we select the function, the response will be </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">very fast.</span></span></p>
<p><span class="koboSpan" id="kobo.540.1">Please check Streamlit’s official documentation about caching (</span><a href="https://docs.streamlit.io/library/advanced-features/caching"><span class="koboSpan" id="kobo.541.1">https://docs.streamlit.io/library/advanced-features/caching</span></a><span class="koboSpan" id="kobo.542.1">) because it’s really something that can help a lot with </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">response time:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer122">
<span class="koboSpan" id="kobo.544.1"><img alt="Figure 5.25: Streamlit’s official documentation on caching" src="image/B21147_05_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.545.1">Figure 5.25: Streamlit’s official documentation on caching</span></p>
<p><span class="koboSpan" id="kobo.546.1">Our </span><em class="italic"><span class="koboSpan" id="kobo.547.1">Tokens&amp;Lemmas</span></em><span class="koboSpan" id="kobo.548.1"> function is </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.549.1">ready so we can use it inside our </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">final expander.</span></span></p>
<h2 id="_idParaDest-66"><a id="_idTextAnchor066"/><span class="koboSpan" id="kobo.551.1">Using the text_analysis function</span></h2>
<p><span class="koboSpan" id="kobo.552.1">Before </span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.553.1">using the </span><em class="italic"><span class="koboSpan" id="kobo.554.1">Tokens&amp;Lemmas</span></em><span class="koboSpan" id="kobo.555.1"> function, we will </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.556.1">clean the text a little bit; let’s see how to </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">do it:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer123">
<span class="koboSpan" id="kobo.558.1"><img alt="Figure 5.26: Tokens&amp;Lemmas expander" src="image/B21147_05_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.559.1">Figure 5.26: Tokens&amp;Lemmas expander</span></p>
<p><span class="koboSpan" id="kobo.560.1">Before using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">text_analysis</span></strong><span class="koboSpan" id="kobo.562.1"> function we just discussed, we will clean the text with </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">neattext</span></strong><span class="koboSpan" id="kobo.564.1">. </span><span class="koboSpan" id="kobo.564.2">First of all, we </span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.565.1">will remove </span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.566.1">stopwords from it, then we will remove the punctuation, and finally, we will remove special characters such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">"@"</span></strong><span class="koboSpan" id="kobo.568.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">"#"</span></strong><span class="koboSpan" id="kobo.570.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.572.1">We will pass this cleaned text to </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">text_analyzer</span></strong><span class="koboSpan" id="kobo.574.1"> and then print the result on </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">the screen.</span></span></p>
<p><span class="koboSpan" id="kobo.576.1">Please note that, since the </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">text_analyzer</span></strong><span class="koboSpan" id="kobo.578.1"> function returns a dictionary – or better, a list of dictionaries – we are printing it in the JSON format (</span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">st.json(tandl)</span></strong><span class="koboSpan" id="kobo.580.1">); this is </span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer124">
<span class="koboSpan" id="kobo.582.1"><img alt="Figure 5.27: Tokens&amp;Lemmas on the screen" src="image/B21147_05_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.583.1">Figure 5.27: Tokens&amp;Lemmas on the screen</span></p>
<p><span class="koboSpan" id="kobo.584.1">To make </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.585.1">it very clear, tokens are the words of </span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.586.1">our text after we clean it, while lemmas are something called </span><em class="italic"><span class="koboSpan" id="kobo.587.1">the normal shape</span></em><span class="koboSpan" id="kobo.588.1"> of the words; for example, we can see that the word </span><em class="italic"><span class="koboSpan" id="kobo.589.1">spending</span></em><span class="koboSpan" id="kobo.590.1"> has </span><em class="italic"><span class="koboSpan" id="kobo.591.1">spend</span></em><span class="koboSpan" id="kobo.592.1"> as a lemma, the token </span><em class="italic"><span class="koboSpan" id="kobo.593.1">traveling</span></em><span class="koboSpan" id="kobo.594.1"> has </span><em class="italic"><span class="koboSpan" id="kobo.595.1">travel</span></em><span class="koboSpan" id="kobo.596.1"> as a lemma, and </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.598.1">Finally, to test that everything works properly, we can copy some text from the web – for example, an extract from some article from the CNN website – and put it in our web application. </span><span class="koboSpan" id="kobo.598.2">This is the result in the case of an article about traveling </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">and journeys:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer125">
<span class="koboSpan" id="kobo.600.1"><img alt="Figure 5.28: Text Analysis test" src="image/B21147_05_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.601.1">Figure 5.28: Text Analysis test</span></p>
<p><span class="koboSpan" id="kobo.602.1">The result </span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.603.1">is quite impressive; please consider that </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.604.1">by using only Python, Streamlit, and some libraries, we’ve already got a very good-looking, working web application that can be used directly online. </span><span class="koboSpan" id="kobo.604.2">All we need is </span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">a browser!</span></span></p>
<p><span class="koboSpan" id="kobo.606.1">If possible, try to use the application from a device – for example, a tablet or smartphone – that is on the same (Wi-Fi) network as the computer from which you are coding. </span><span class="koboSpan" id="kobo.606.2">This is the great point of these web applications: immediately accessible from everywhere! </span><span class="koboSpan" id="kobo.606.3">We write code once and can use it from everywhere, with no need to install locally, manage patches, manage new versions, and so on. </span><span class="koboSpan" id="kobo.606.4">Everything stays in one place and it’s accessed by a web browser. </span><span class="koboSpan" id="kobo.606.5">In case of changes or new versions, we only need to update the code </span><em class="italic"><span class="koboSpan" id="kobo.607.1">server</span></em><span class="koboSpan" id="kobo.608.1">-side, meaning no pain for users. </span><span class="koboSpan" id="kobo.608.2">Smooth, clean, </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">and easy!</span></span></p>
<p><span class="koboSpan" id="kobo.610.1">As usual, here are the screenshots of the code produced up </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">to now:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer126">
<span class="koboSpan" id="kobo.612.1"><img alt="Figure 5.29: Code – part 1" src="image/B21147_05_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.613.1">Figure 5.29: Code – part 1</span></p>
<p><span class="koboSpan" id="kobo.614.1">In part 1, we </span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.615.1">imported the packages, set the page configuration, and </span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.616.1">defined the </span><strong class="source-inline"><span class="koboSpan" id="kobo.617.1">"summarize_text"</span></strong><span class="koboSpan" id="kobo.618.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.619.1">"</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">text_analyzer"</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.621.1"> functions.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer127">
<span class="koboSpan" id="kobo.622.1"><img alt="Figure 5.30: Code – part 2" src="image/B21147_05_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.623.1">Figure 5.30: Code – part 2</span></p>
<p><span class="koboSpan" id="kobo.624.1">In part 2, we </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.625.1">wrote the </span><strong class="source-inline"><span class="koboSpan" id="kobo.626.1">"main"</span></strong><span class="koboSpan" id="kobo.627.1"> function </span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.628.1">that visualizes the main title of the application, the menu in the sidebar that uses an </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">IF</span></strong><span class="koboSpan" id="kobo.630.1"> clause to make the menu’s voices selection possible, and used some interesting widgets such as columns </span><span class="No-Break"><span class="koboSpan" id="kobo.631.1">and expanders.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer128">
<span class="koboSpan" id="kobo.632.1"><img alt="Figure 5.31: Code – part 3" src="image/B21147_05_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.633.1">Figure 5.31: Code – part 3</span></p>
<p><span class="koboSpan" id="kobo.634.1">In part 3, we </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.635.1">completed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">"main"</span></strong><span class="koboSpan" id="kobo.637.1"> function, then created </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.638.1">placeholders for the </span><strong class="bold"><span class="koboSpan" id="kobo.639.1">Translation</span></strong><span class="koboSpan" id="kobo.640.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.641.1">Sentiment Analysis</span></strong><span class="koboSpan" id="kobo.642.1"> features, and finally, created a beautiful </span><strong class="bold"><span class="koboSpan" id="kobo.643.1">About</span></strong><span class="koboSpan" id="kobo.644.1"> section, leveraging </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">simple markdown.</span></span></p>
<p><span class="koboSpan" id="kobo.646.1">Let’s underline once again how powerful Streamlit can be, since with a few lines of code, we are able to create a complete web application made of both back and </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">frontend parts.</span></span></p>
<h1 id="_idParaDest-67"><a id="_idTextAnchor067"/><span class="koboSpan" id="kobo.648.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.649.1">In this chapter, we started completing the decorations by adding a beautiful picture in the sidebar. </span><span class="koboSpan" id="kobo.649.2">The application should always work correctly but giving it a quite beautiful </span><em class="italic"><span class="koboSpan" id="kobo.650.1">shape</span></em><span class="koboSpan" id="kobo.651.1"> is always a </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">good idea.</span></span></p>
<p><span class="koboSpan" id="kobo.653.1">After decoration, we focused on the first voice of the menu: </span><strong class="bold"><span class="koboSpan" id="kobo.654.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.655.1">. </span><strong class="bold"><span class="koboSpan" id="kobo.656.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.657.1"> is a quite complex section and in order to make it clear, good-looking, and well-performing, we decided to arrange our web application into different sections that cover different topics. </span><span class="koboSpan" id="kobo.657.2">The best solution to make this possible is to learn how to use columns and expanders. </span><span class="koboSpan" id="kobo.657.3">The </span><strong class="bold"><span class="koboSpan" id="kobo.658.1">Text Analysis</span></strong><span class="koboSpan" id="kobo.659.1"> section we created has two layers, one for </span><strong class="bold"><span class="koboSpan" id="kobo.660.1">Basic Functions</span></strong><span class="koboSpan" id="kobo.661.1"> and another for </span><strong class="bold"><span class="koboSpan" id="kobo.662.1">Advanced Features</span></strong><span class="koboSpan" id="kobo.663.1">, and by using columns and expanders, we can manage both layers in a very effective and </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">elegant way.</span></span></p>
<p><span class="koboSpan" id="kobo.665.1">Columns allow us to place everything we want into pillars, while expanders allow us to </span><em class="italic"><span class="koboSpan" id="kobo.666.1">expand</span></em><span class="koboSpan" id="kobo.667.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.668.1">collapse</span></em><span class="koboSpan" id="kobo.669.1"> anything we want to show </span><span class="No-Break"><span class="koboSpan" id="kobo.670.1">or hide.</span></span></p>
<p><span class="koboSpan" id="kobo.671.1">Having good-looking sections and well-arranged topics in our application is very important, but an extremely important point is having very </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">well-performing code.</span></span></p>
<p><span class="koboSpan" id="kobo.673.1">Code should run in a fast and smooth way, without taking a long time to load and show information on the screen. </span><span class="koboSpan" id="kobo.673.2">This is the reason why we also had a first look at caching </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">in Streamlit.</span></span></p>
<p><span class="koboSpan" id="kobo.675.1">In the next chapter, we are going to complete the two remaining voices of our menu: </span><strong class="bold"><span class="koboSpan" id="kobo.676.1">Translation</span></strong><span class="koboSpan" id="kobo.677.1"> and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.678.1">Sentiment Analysis</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">.</span></span></p>
</div>
</body></html>