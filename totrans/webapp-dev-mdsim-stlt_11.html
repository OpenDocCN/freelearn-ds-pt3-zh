<html><head></head><body>
<div id="_idContainer245">
<h1 class="chapter-number" id="_idParaDest-116"><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 id="_idParaDest-117"><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.2.1">Deploying and Managing Complex Libraries on Streamlit Share</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Let’s continue our exploration of deployment on Streamlit Share, a service provided by the Streamlit framework that allows users to deploy their web applications, implemented with Streamlit, to the cloud with just a few clicks. </span><span class="koboSpan" id="kobo.3.2">This time, we have to pack up the </span><em class="italic"><span class="koboSpan" id="kobo.4.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.5.1"> app and try to deploy it. </span><span class="koboSpan" id="kobo.5.2">Many heavy libraries will be involved here, so this time, the task is a little bit </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">more complex.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">When we deal with heavy files, the deployment task becomes more difficult because GitHub has some limitations regarding file size; in fact, it is not possible to directly upload files with a size over 25 MB. </span><span class="koboSpan" id="kobo.7.2">In the case of our </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.9.1"> app, unfortunately, the file of the AI model is over 25 MB. </span><span class="koboSpan" id="kobo.9.2">Files to be uploaded on GitHub can’t be any bigger than this, at least at the time of writing </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">this book.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">There are some techniques we can use to bypass this limit; I’ll show you a rather smart way to do this in </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">In this chapter, we’ll cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Consolidating cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">deployment skills</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Avoiding </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">bad behavior</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Managing </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">difficult libraries</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Deploying the app on </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">Streamlit Cloud</span></span></li>
</ul>
<h1 id="_idParaDest-118"><a id="_idTextAnchor118"/><span class="koboSpan" id="kobo.23.1">Technical requirements</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.24.1">In this chapter, we will use the following libraries, packages, </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">and tools:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.26.1">Sublime Text</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.27.1">Python 3</span></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.28.1">pipenv</span></strong></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Streamlit</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.30.1">GitHub</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.31.1">Streamlit Cloud</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.32.1">The code for this chapter can be found in this book’s GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">repository: </span></span><a href="https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/8e8d3b20f3de84b5ce02bc2352f86ad1c8018a4a/Chapter11"><span class="No-Break"><span class="koboSpan" id="kobo.34.1">https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/8e8d3b20f3de84b5ce02bc2352f86ad1c8018a4a/Chapter11</span></span></a></li>
</ul>
<h1 id="_idParaDest-119"><a id="_idTextAnchor119"/><span class="koboSpan" id="kobo.35.1">Consolidating cloud deployment skills</span></h1>
<p><span class="koboSpan" id="kobo.36.1">Considering that we are at </span><a href="B21147_11.xhtml#_idTextAnchor116"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.37.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.38.1"> of this book, we should be aware of the fact that implementing a </span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.39.1">web application is only one part of the process and that the process ends only when the web app is deployed </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">and shared.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">We already understand the importance of web application deployment as we covered this when we created the NLP web application in the first part of this book, as well as because it’s one of the first things we see when we land on </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">Streamlit’s website:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer228">
<span class="koboSpan" id="kobo.43.1"><img alt="Figure 11.1: Streamlit’s slogan about app sharing" src="image/B21147_11_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.44.1">Figure 11.1: Streamlit’s slogan about app sharing</span></p>
<p><span class="koboSpan" id="kobo.45.1">When we </span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.46.1">click on the </span><strong class="bold"><span class="koboSpan" id="kobo.47.1">Cloud</span></strong><span class="koboSpan" id="kobo.48.1"> voice of the main menu, we are redirected to a page containing a quick video about the deployment and an important declaration: </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">Deploy, manage, and share your apps with the world, directly from Streamlit — all </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.50.1">for free</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer229">
<span class="koboSpan" id="kobo.52.1"><img alt="Figure 11.2: Streamlit Cloud" src="image/B21147_11_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.53.1">Figure 11.2: Streamlit Cloud</span></p>
<p><span class="koboSpan" id="kobo.54.1">The most </span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.55.1">important message here is </span><em class="italic"><span class="koboSpan" id="kobo.56.1">share your apps with the world</span></em><span class="koboSpan" id="kobo.57.1">. </span><span class="koboSpan" id="kobo.57.2">A web application is something that lives on the web – that’s its </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">real essence.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">When we deployed the NLP application, we adopted quite a </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">smooth process:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.61.1">We created a </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">requirements file.</span></span></li>
<li><span class="koboSpan" id="kobo.63.1">We hosted the web application </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">on GitHub.</span></span></li>
<li><span class="koboSpan" id="kobo.65.1">We signed into </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">Streamlit Cloud.</span></span></li>
<li><span class="koboSpan" id="kobo.67.1">We shared the web application through a Streamlit </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">Cloud/GitHub connection.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.69.1">The procedure will be the same for our </span><em class="italic"><span class="koboSpan" id="kobo.70.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.71.1"> app, with one important difference: we must manage an external and large file – that is, the CNN pretrained model needed to detect Covid-19 cases. </span><span class="koboSpan" id="kobo.71.2">Let’s learn how to deal with this kind of </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">large artifact.</span></span></p>
<h1 id="_idParaDest-120"><a id="_idTextAnchor120"/><span class="koboSpan" id="kobo.73.1">Avoiding bad behavior</span></h1>
<p><span class="koboSpan" id="kobo.74.1">Bad behavior is any kind of missing, wrong, or incomplete action that produces a runtime </span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.75.1">problem during the deployment, where the result is the deployment task failing. </span><span class="koboSpan" id="kobo.75.2">For this reason, in this section, we will learn about the steps that are required to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">any deployment.</span></span></p>
<h2 id="_idParaDest-121"><a id="_idTextAnchor121"/><span class="koboSpan" id="kobo.77.1">Creating a list of all the packages that were installed and used to develop the Python code</span></h2>
<p><span class="koboSpan" id="kobo.78.1">The first thing we need to run our web application is the list of all the packages that were </span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.79.1">installed and used to develop the Python code. </span><span class="koboSpan" id="kobo.79.2">As we know, there are several ways to get this list, but the easiest one is to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">pipreqs</span></strong><span class="koboSpan" id="kobo.81.1">. </span><span class="koboSpan" id="kobo.81.2">Let’s take </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">a look:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.83.1">First of all, let’s install </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">pipreqs</span></strong><span class="koboSpan" id="kobo.85.1"> by typing the following command in </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">the Terminal:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.87.1">pipenv install pipreqs (simply "pip install pipreqs" if you are not using pipenv)</span></strong></pre></li> <li><span class="koboSpan" id="kobo.88.1">Then, we can create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">requirements.txt</span></strong><span class="koboSpan" id="kobo.90.1"> file with the following </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">simple instruction:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.92.1">pipreqs ./covid</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.93.1">Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.94.1">covid</span></strong><span class="koboSpan" id="kobo.95.1"> is the name of the directory containing all the code for our </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">web application.</span></span></p></li> <li><span class="koboSpan" id="kobo.97.1">Finally, let’s check that the required file contains everything by simply writing the </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">following instruction:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.99.1">cat ./covid/requirements.txt</span></strong></pre></li> </ol>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.100.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.101.1">.3</span></em><span class="koboSpan" id="kobo.102.1"> shows the contents of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">requirements.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.104.1"> file:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer230">
<span class="koboSpan" id="kobo.105.1"><img alt="Figure 11.3: The requirements.txt file" src="image/B21147_11_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.106.1">Figure 11.3: The requirements.txt file</span></p>
<p><span class="koboSpan" id="kobo.107.1">Now that </span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.108.1">we have all the code and the requirements file, we are ready to create a dedicated repository </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">on GitHub.</span></span></p>
<h2 id="_idParaDest-122"><a id="_idTextAnchor122"/><span class="koboSpan" id="kobo.110.1">Creating a GitHub repository</span></h2>
<p><span class="koboSpan" id="kobo.111.1">Let’s log </span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.112.1">into GitHub with the same account we will be using later on to connect to </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">Streamlit Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.114.1">Once on GitHub, we can create a new repository by following </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.116.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">New</span></strong><span class="koboSpan" id="kobo.118.1"> tab on the </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Repositories</span></strong><span class="koboSpan" id="kobo.120.1"> page. </span><span class="koboSpan" id="kobo.120.2">We should see the </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">following screen:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer231">
<span class="koboSpan" id="kobo.122.1"><img alt="Figure 11.4: Creating a new repository on GitHub" src="image/B21147_11_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.123.1">Figure 11.4: Creating a new repository on GitHub</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.124.1">Insert a </span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.125.1">repository name, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">covid19-book</span></strong><span class="koboSpan" id="kobo.127.1">, and add a description (this is </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">not necessary).</span></span></li>
<li><span class="koboSpan" id="kobo.129.1">Keep the repository public and check </span><strong class="bold"><span class="koboSpan" id="kobo.130.1">Add a </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.131.1">README file</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.133.1">Finally, click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.134.1">Create repository</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.136.1">After a little while, we’ll get the </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">following page:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer232">
<span class="koboSpan" id="kobo.138.1"><img alt="Figure 11.5: The new repository is empty" src="image/B21147_11_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.139.1">Figure 11.5: The new repository is empty</span></p>
<p><span class="koboSpan" id="kobo.140.1">As we can see, the new repository is empty. </span><span class="koboSpan" id="kobo.140.2">We must add the Python file and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">requirements.txt</span></strong><span class="koboSpan" id="kobo.142.1"> file to it. </span><span class="koboSpan" id="kobo.142.2">This operation is very easy – we just need to click </span><strong class="bold"><span class="koboSpan" id="kobo.143.1">Add file</span></strong><span class="koboSpan" id="kobo.144.1"> and upload the files of </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">our interest.</span></span></p>
<p><span class="koboSpan" id="kobo.146.1">In principle, we are </span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.147.1">ready to go to Streamlit Cloud to deploy the application and share it with </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">the world.</span></span></p>
<p><span class="koboSpan" id="kobo.149.1">However, every time we are at this stage of the deployment process, we must pay great attention to our actions. </span><span class="koboSpan" id="kobo.149.2">If we try to deploy the files contained in the newly created repository to Streamlit Cloud, we’ll get a runtime error and the application won’t run. </span><span class="koboSpan" id="kobo.149.3">Let’s learn how to </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">fix that.</span></span></p>
<h2 id="_idParaDest-123"><a id="_idTextAnchor123"/><span class="koboSpan" id="kobo.151.1">Avoiding runtime errors</span></h2>
<p><span class="koboSpan" id="kobo.152.1">To avoid runtime errors during deployment, we have to think about what our web application needs to </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">run properly.</span></span></p>
<p><span class="koboSpan" id="kobo.154.1">The first item </span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.155.1">we need is the Covid-19 image that we display in the left sidebar of our </span><em class="italic"><span class="koboSpan" id="kobo.156.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.157.1"> app. </span><span class="koboSpan" id="kobo.157.2">This operation is very easy since we just have to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">covid19.jpeg</span></strong><span class="koboSpan" id="kobo.159.1"> file to </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">our repository.</span></span></p>
<p><span class="koboSpan" id="kobo.161.1">The second point of attention is that the Streamlit version available at the time of writing this book has some problems with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">opencv</span></strong><span class="koboSpan" id="kobo.163.1"> library: there are issues when it attempts to import this library. </span><span class="koboSpan" id="kobo.163.2">To avoid this issue, we must create a new file in the repository by clicking </span><strong class="bold"><span class="koboSpan" id="kobo.164.1">Add file</span></strong><span class="koboSpan" id="kobo.165.1">, and then selecting </span><strong class="bold"><span class="koboSpan" id="kobo.166.1">Create new file</span></strong><span class="koboSpan" id="kobo.167.1">. </span><span class="koboSpan" id="kobo.167.2">We must call this file </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">packages.txt</span></strong><span class="koboSpan" id="kobo.169.1">. </span><span class="koboSpan" id="kobo.169.2">This new file must contain the </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">following instruction:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.171.1">
libgl1</span></pre> <p><span class="koboSpan" id="kobo.172.1">In this way, all the right dependencies will be installed by Streamlit Cloud at </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">deployment time.</span></span></p>
<p><span class="koboSpan" id="kobo.174.1">The third item we must pay extra attention to when using the </span><em class="italic"><span class="koboSpan" id="kobo.175.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.176.1"> app is as follows. </span><span class="koboSpan" id="kobo.176.2">When we upload the X-ray image and click on </span><strong class="bold"><span class="koboSpan" id="kobo.177.1">Diagnosis</span></strong><span class="koboSpan" id="kobo.178.1"> to determine whether or not it represents a case of Covid-19, the pretrained CNN model is run. </span><span class="koboSpan" id="kobo.178.2">If the web application is unable to locate the model, we may </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">encounter issues.</span></span></p>
<p><span class="koboSpan" id="kobo.180.1">The point of </span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.181.1">attention here is that uploading the AI model file is not enough because if we double-check the code we wrote on </span><em class="italic"><span class="koboSpan" id="kobo.182.1">line 81</span></em><span class="koboSpan" id="kobo.183.1">, we’ll see that this model must be put inside a directory named </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">models</span></strong><span class="koboSpan" id="kobo.185.1">, living at the same level as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">app.py</span></strong><span class="koboSpan" id="kobo.187.1"> file. </span><span class="koboSpan" id="kobo.187.2">In short, we must recreate the same files and directory order indicated in our Python code in our GitHub repository; otherwise, the files we need – specifically the CNN model – will never </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">be found:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer233">
<span class="koboSpan" id="kobo.189.1"><img alt="Figure 11.6: Line 81 indicates where we need to put the CNN model file" src="image/B21147_11_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.190.1">Figure 11.6: Line 81 indicates where we need to put the CNN model file</span></p>
<p><span class="koboSpan" id="kobo.191.1">Finally, a rather big issue arises. </span><span class="koboSpan" id="kobo.191.2">When we try to upload </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1">Covid19_CNN_Classifier.h5</span></strong><span class="koboSpan" id="kobo.193.1">, we discover that this operation is not possible since the file is larger than 25 MB and GitHub on the web only accepts files that are smaller than </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">this size.</span></span></p>
<p><span class="koboSpan" id="kobo.195.1">In the next section, we’ll learn how to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">this problem.</span></span></p>
<h1 id="_idParaDest-124"><a id="_idTextAnchor124"/><span class="koboSpan" id="kobo.197.1">Managing difficult libraries</span></h1>
<p><span class="koboSpan" id="kobo.198.1">To fix the problem of file size, we must install the GitHub Desktop application, which at the time of </span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.199.1">writing is only available for Windows or macOS. </span><span class="koboSpan" id="kobo.199.2">So, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.201.1">Download the GitHub Desktop application from </span><a href="http://desktop.github.com"><span class="koboSpan" id="kobo.202.1">desktop.github.com</span></a><span class="koboSpan" id="kobo.203.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">install it.</span></span></li>
<li><span class="koboSpan" id="kobo.205.1">Then, log into your GitHub account and authorize. </span><span class="koboSpan" id="kobo.205.2">You should see the </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">following window:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer234">
<span class="koboSpan" id="kobo.207.1"><img alt="Figure 11.7: GitHub Desktop application" src="image/B21147_11_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.208.1">Figure 11.7: GitHub Desktop application</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.209.1">Now, select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">covid19-book</span></strong><span class="koboSpan" id="kobo.211.1"> repository (if you used another name, you must look for it) and </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.213.1">Clone...</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.215.1">A clone of the repository will be created on your machine, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.216.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.217.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer235">
<span class="koboSpan" id="kobo.219.1"><img alt="Figure 11.8: Cloning the GitHub repository locally" src="image/B21147_11_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.220.1">Figure 11.8: Cloning the GitHub repository locally</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.221.1">Once the </span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.222.1">cloning operation is finished, open the local folder of the repository on your Mac Finder or via Windows File Explorer, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.223.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.224.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer236">
<span class="koboSpan" id="kobo.226.1"><img alt="Figure 11.9: Local folder of the repository" src="image/B21147_11_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.227.1">Figure 11.9: Local folder of the repository</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.228.1">Now, create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">models</span></strong><span class="koboSpan" id="kobo.230.1"> directory and copy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">Covid19_CNN_Classifier.h5</span></strong><span class="koboSpan" id="kobo.232.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">inside it:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer237">
<span class="koboSpan" id="kobo.234.1"><img alt="Figure 11.10: Big file copied into the proper directory" src="image/B21147_11_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.235.1">Figure 11.10: Big file copied into the proper directory</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.236.1">Move back to </span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.237.1">the GitHub Desktop application. </span><span class="koboSpan" id="kobo.237.2">Here, you will see the big file we just added. </span><span class="koboSpan" id="kobo.237.3">Write something in the </span><strong class="bold"><span class="koboSpan" id="kobo.238.1">Summary (required)</span></strong><span class="koboSpan" id="kobo.239.1"> text box, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">adding cnn model</span></strong><span class="koboSpan" id="kobo.241.1">, and click </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">Commit </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.243.1">to main</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer238">
<span class="koboSpan" id="kobo.245.1"><img alt="Figure 11.11: Big file copied into the proper directory" src="image/B21147_11_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.246.1">Figure 11.11: Big file copied into the proper directory</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.247.1">Now, select </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">Push origin</span></strong><span class="koboSpan" id="kobo.249.1">, as suggested in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.250.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.251.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer239">
<span class="koboSpan" id="kobo.253.1"><img alt="Figure 11.12: Push origin" src="image/B21147_11_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.254.1">Figure 11.12: Push origin</span></p>
<p><span class="koboSpan" id="kobo.255.1">Now, you can </span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.256.1">check in your browser whether the big file is included in your </span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">GitHub repository:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer240">
<span class="koboSpan" id="kobo.258.1"><img alt="Figure 11.13: The GitHub repository containing all the necessary files" src="image/B21147_11_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.259.1">Figure 11.13: The GitHub repository containing all the necessary files</span></p>
<p><span class="koboSpan" id="kobo.260.1">What we have learned here is very important since it is common to deal with difficult libraries or heavy files is quite frequent, and knowing how to manage this issue properly makes a big difference. </span><span class="koboSpan" id="kobo.260.2">Managing this kind of issue makes it possible to deploy any kind of web application we </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">could develop.</span></span></p>
<h1 id="_idParaDest-125"><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.262.1">Deploying the app on Streamlit Cloud</span></h1>
<p><span class="koboSpan" id="kobo.263.1">The hardest part is over. </span><span class="koboSpan" id="kobo.263.2">From here on, we can follow the same procedure we adopted for the </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.264.1">NLP web application. </span><span class="koboSpan" id="kobo.264.2">Here are </span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">the steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.266.1">Sign into Streamlit Cloud by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.267.1">Continue with Github</span></strong><span class="koboSpan" id="kobo.268.1">, authorizing and using the same account you used </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">for GitHub.</span></span></li>
<li><span class="koboSpan" id="kobo.270.1">Once you’re in, select </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.271.1">New app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.273.1">You should only have the application we created in </span><a href="B21147_07.xhtml#_idTextAnchor080"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.274.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.275.1"> among the deployed applications. </span><span class="koboSpan" id="kobo.275.2">The window should look like what’s shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.276.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.277.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer241">
<span class="koboSpan" id="kobo.279.1"><img alt="Figure 11.14: Creating a new app on Streamlit Cloud" src="image/B21147_11_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.280.1">Figure 11.14: Creating a new app on Streamlit Cloud</span></p>
<ol>
<li><span class="koboSpan" id="kobo.281.1">After selecting </span><strong class="bold"><span class="koboSpan" id="kobo.282.1">New app</span></strong><span class="koboSpan" id="kobo.283.1">, in the new form, choose the right repository, the main branch, and the name of the Python file (it should be </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">app.py</span></strong><span class="koboSpan" id="kobo.285.1">), and specify a meaningful name to the app URL, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.286.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.287.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer242">
<span class="koboSpan" id="kobo.289.1"><img alt="Figure 11.15: Deploying the web app on Streamlit Cloud" src="image/B21147_11_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.290.1">Figure 11.15: Deploying the web app on Streamlit Cloud</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.291.1">When </span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.292.1">everything is ready, click </span><strong class="bold"><span class="koboSpan" id="kobo.293.1">Deploy!</span></strong><span class="koboSpan" id="kobo.294.1"> and wait since </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">Your app is in </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.296.1">the oven</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer243">
<span class="koboSpan" id="kobo.298.1"><img alt="Figure 11.16: Deploying animation" src="image/B21147_11_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.299.1">Figure 11.16: Deploying animation</span></p>
<p><span class="koboSpan" id="kobo.300.1">At the end of this process, your </span><em class="italic"><span class="koboSpan" id="kobo.301.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.302.1"> app will be deployed and ready to be shared </span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">with everyone.</span></span></p>
<p><span class="koboSpan" id="kobo.304.1">Here’s how </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.305.1">our new web application looks once the deployment process </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">is completed:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer244">
<span class="koboSpan" id="kobo.307.1"><img alt="Figure 11.17: The Covid-19 Detection Tool app deployed on Streamlit Cloud" src="image/B21147_11_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.308.1">Figure 11.17: The Covid-19 Detection Tool app deployed on Streamlit Cloud</span></p>
<p><span class="koboSpan" id="kobo.309.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.310.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.311.1">.17</span></em><span class="koboSpan" id="kobo.312.1">, the application now lives on the web, and its URL is self-explanatory since it contains </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">covid19-book-chapter11</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.314.1">in it.</span></span></p>
<p><span class="koboSpan" id="kobo.315.1">Once again, it’s very important to highlight how crucial proper deployment capabilities are in the web application development process. </span><span class="koboSpan" id="kobo.315.2">We can only consider this process completed once the web application lives on the cloud and anybody can use it. </span><span class="koboSpan" id="kobo.315.3">The contents of this chapter have enabled us to deploy any kind of web app, even those including difficult libraries and </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">big files.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.317.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.318.1">Depending on the versions of the packages you installed, it might be necessary to install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">opencv-python</span></strong><span class="koboSpan" id="kobo.320.1"> library as well. </span><span class="koboSpan" id="kobo.320.2">If you get this suggestion during deployment, just install the library as usual (using </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">pipenv install...</span></strong><span class="koboSpan" id="kobo.322.1">), add it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">requirements.txt</span></strong><span class="koboSpan" id="kobo.324.1"> file, and let the standard deployment process from GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">be completed.</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.326.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.327.1">Great job! </span><span class="koboSpan" id="kobo.327.2">Deploying the </span><em class="italic"><span class="koboSpan" id="kobo.328.1">Covid-19 Detection Tool</span></em><span class="koboSpan" id="kobo.329.1"> app was complex. </span><span class="koboSpan" id="kobo.329.2">As we saw, there are many potential problems </span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">to avoid.</span></span></p>
<p><span class="koboSpan" id="kobo.331.1">First of all, we needed to recreate the same structure of files and directories that were used in the Python code, and not forget to also include the picture files in the </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">GitHub repository.</span></span></p>
<p><span class="koboSpan" id="kobo.333.1">The second problem was allowing Streamlit Cloud to manage all the dependencies related to </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">opencv</span></strong><span class="koboSpan" id="kobo.335.1">. </span><span class="koboSpan" id="kobo.335.2">To do this, it was necessary to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">packages.txt</span></strong><span class="koboSpan" id="kobo.337.1"> file to the repository containing the instructions to get </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">these dependencies.</span></span></p>
<p><span class="koboSpan" id="kobo.339.1">Finally, we found out that GitHub – at least its online version – only manages files that are smaller than 25 MB, but sometimes, such as with the CNN AI model, we need to upload bigger files. </span><span class="koboSpan" id="kobo.339.2">This operation requires us to install the GitHub Desktop application and the local (on our computers) cloning of the repository. </span><span class="koboSpan" id="kobo.339.3">Once we have the repository on our computers, we can add this big file and push it back toward the origin (the Git </span><em class="italic"><span class="koboSpan" id="kobo.340.1">server</span></em><span class="koboSpan" id="kobo.341.1">). </span><span class="koboSpan" id="kobo.341.2">In this way, even our AI model file, which is over 50 MB, will be hosted in the GitHub repository </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">of interest.</span></span></p>
<p><span class="koboSpan" id="kobo.343.1">Once we’ve tackled all these issues, we are ready to deploy the web application to Streamlit Cloud and share it </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">with everybody.</span></span></p>
<p><span class="koboSpan" id="kobo.345.1">Starting from the next chapter, we are going to cover some very advanced topics, such as smart file uploading, adding login and signup functionality to our web apps, managing databases, </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">and more.</span></span></p>
</div>


<div class="Content" id="_idContainer246">
<h1 id="_idParaDest-127" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.1.1">Part 4: Advanced Techniques for Secure and Customizable Web Applications</span></h1>
<p><span class="koboSpan" id="kobo.2.1">Part 4 of the book is dedicated to mastering advanced techniques that are essential for creating secure and highly customizable web applications. </span><span class="koboSpan" id="kobo.2.2">It starts with an exploration of smart file uploading methods, tailored for professional-grade web applications, ensuring efficient and user-friendly file management. </span><span class="koboSpan" id="kobo.2.3">The section then addresses the critical aspect of security, providing in-depth guidance on creating secure login and signup processes, a cornerstone for any web application dealing with user data. </span><span class="koboSpan" id="kobo.2.4">Next, it dives into the customization of pages, personalization of themes, and implementation of multi-page layouts, allowing for a more tailored and engaging user experience. </span><span class="koboSpan" id="kobo.2.5">The part also covers enhancing web applications with forms, session state management, and the use of customizable subdomains, adding a layer of sophistication and functionality to web apps. </span><span class="koboSpan" id="kobo.2.6">The book concludes with key takeaways and a thoughtful conclusion, encapsulating what you have learned and preparing you for the future of web app development. </span><span class="koboSpan" id="kobo.2.7">This final part is essential for those looking to elevate their web apps from functional to exceptional, focusing on customization, security, and advanced </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">user engagement.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B21147_12.xhtml#_idTextAnchor128"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Smart File Uploading – Advanced Techniques for Professional Web Applications</span></em></li>
<li><a href="B21147_13.xhtml#_idTextAnchor138"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Creating a Secure Login and Signup Process for Web Applications</span></em></li>
<li><a href="B21147_14.xhtml#_idTextAnchor150"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 14</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Customizing Pages, Personalizing Themes, and Implementing Multi-Pages</span></em></li>
<li><a href="B21147_15.xhtml#_idTextAnchor160"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 15</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Enhancing Web Apps with Forms, Session State, and Customizable Subdomains</span></em></li>
<li><a href="B21147_16.xhtml#_idTextAnchor169"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 16</span></em></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Takeaways and Conclusion</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer247">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer248">
</div>
</div>
</body></html>