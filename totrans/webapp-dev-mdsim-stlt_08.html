<html><head></head><body>
<div id="_idContainer193">
<h1 class="chapter-number" id="_idParaDest-91"><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 id="_idParaDest-92"><a id="_idTextAnchor092"/><span class="koboSpan" id="kobo.2.1">Advanced Environment Setup and Package Management for Building an AI-Powered Web App</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In </span><em class="italic"><span class="koboSpan" id="kobo.4.1">Chapters 8</span></em><span class="koboSpan" id="kobo.5.1"> through </span><em class="italic"><span class="koboSpan" id="kobo.6.1">12</span></em><span class="koboSpan" id="kobo.7.1">, we will be building a new web app together: a tool that can detect the presence of COVID-19 from an image. </span><span class="koboSpan" id="kobo.7.2">To do so, we will leverage a pre-trained model (we are not delving into AI and model training but just using a pre-trained convolutional neural network) and in this way, we will learn how to integrate our AI models into our web applications by building up an entire set of services </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">around them!</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">In very few words, a pre-trained model is an AI model that has been trained previously by someone else in order to make predictions – for example, classifications or regressions. </span><span class="koboSpan" id="kobo.9.2">To train the model, a dataset of cases related to the problem under scrutiny is typically needed. </span><span class="koboSpan" id="kobo.9.3">So, in the case of COVID-19 detection, a binary classification model (binary means only two possible solutions: COVID or no COVID) has been trained in the past and is now ready to be used in our </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">This chapter covers in a deeper way what we already saw in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.13.1">. </span><span class="koboSpan" id="kobo.13.2">The chapter is designed to help you better understand how to develop a web application from scratch, adding more features that require higher skills. </span><span class="koboSpan" id="kobo.13.3">So, once again, we will set up a virtual environment, install and manage packages, create an app skeleton, and add a menu and decorations to the app. </span><span class="koboSpan" id="kobo.13.4">In this part, we will build a new web app together to acquire much more </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">high-level skills.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.17.1">Configuring </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">our environment</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Installing and </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">importing packages</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Building the </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">app skeleton</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Building the menu and </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">adding decorations</span></span></li>
</ul>
<h1 id="_idParaDest-93"><a id="_idTextAnchor093"/><span class="koboSpan" id="kobo.25.1">Technical requirements</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.26.1">In this chapter, we will use the following libraries, packages, </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">and tools:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.28.1">Sublime Text</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Python 3</span></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.30.1">pipenv</span></strong></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.31.1">Streamlit</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.32.1">Code in the chapter can be accessed through the following GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">link: </span></span><a href="https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/d5860f2916d79752d4b03c615da68f5bbdb4ed63/Chapter08"><span class="No-Break"><span class="koboSpan" id="kobo.34.1">https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/d5860f2916d79752d4b03c615da68f5bbdb4ed63/Chapter08</span></span></a></li>
</ul>
<h1 id="_idParaDest-94"><a id="_idTextAnchor094"/><span class="koboSpan" id="kobo.35.1">Configuring our environment</span></h1>
<p><span class="koboSpan" id="kobo.36.1">Actually, we already created a</span><a id="_idIndexMarker303"/><span class="koboSpan" id="kobo.37.1"> virtual environment at the beginning of the previous project, in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.38.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.39.1">, so we should be quite skilled at this task. </span><span class="koboSpan" id="kobo.39.2">Let’s start by creating an empty directory, which can be simply named </span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">covid</span></strong><span class="koboSpan" id="kobo.41.1">. </span><span class="koboSpan" id="kobo.41.2">So, let’s write in our terminal the </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">following instruction:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.43.1">
mkdir covid</span></pre> <p><span class="koboSpan" id="kobo.44.1">Then, we can move inside the new directory just by typing </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">the following:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.46.1">
cd covid</span></pre> <p><span class="koboSpan" id="kobo.47.1">It’s now time to create our virtual environment. </span><span class="koboSpan" id="kobo.47.2">We know that this operation is very easy since we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.48.1">pipenv</span></strong><span class="koboSpan" id="kobo.49.1">, as we already did in </span><a href="B21147_04.xhtml#_idTextAnchor045"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.50.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.51.1">. </span><span class="koboSpan" id="kobo.51.2">So, once again, let’s write from our directory (it’s very important to be inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">covid</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.53.1"> directory):</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.54.1">
pipenv shell</span></pre> <p><span class="koboSpan" id="kobo.55.1">The virtual environment will be created quite quickly, and we should be at a stage like the one in the </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<span class="koboSpan" id="kobo.57.1"><img alt="Figure 8.1: Virtual environment creation" src="image/B21147_08_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.58.1">Figure 8.1: Virtual environment creation</span></p>
<p><span class="koboSpan" id="kobo.59.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.60.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.61.1">.1</span></em><span class="koboSpan" id="kobo.62.1">, a new directory named </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">covid</span></strong><span class="koboSpan" id="kobo.64.1"> is created. </span><span class="koboSpan" id="kobo.64.2">Then, we enter this directory and, by writing </span><strong class="source-inline"><span class="koboSpan" id="kobo.65.1">pipenv shell</span></strong><span class="koboSpan" id="kobo.66.1">, we create the virtual environment, assigning to it the name of the directory. </span><span class="koboSpan" id="kobo.66.2">The tool we are using to make the virtual environment (</span><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">pipenv</span></strong><span class="koboSpan" id="kobo.68.1">) provides a positive </span><a id="_idIndexMarker304"/><span class="koboSpan" id="kobo.69.1">output (the text in green) and automatically opens the new virtual environment. </span><span class="koboSpan" id="kobo.69.2">In fact, at the beginning of the last line in the screenshot, the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">covid</span></strong><span class="koboSpan" id="kobo.71.1"> between the parentheses indicates that we are inside the </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">virtual environment.</span></span></p>
<p><span class="koboSpan" id="kobo.73.1">At this point, the environment is ready but still empty, since we are still missing all the libraries we are going to use in our code. </span><span class="koboSpan" id="kobo.73.2">Let’s see what packages </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">we need.</span></span></p>
<h1 id="_idParaDest-95"><a id="_idTextAnchor095"/><span class="koboSpan" id="kobo.75.1">Installing and importing packages</span></h1>
<p><span class="koboSpan" id="kobo.76.1">Now that we are inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">covid</span></strong><span class="koboSpan" id="kobo.78.1"> directory and our virtual environment has been created, it’s time to install all the packages </span><a id="_idIndexMarker305"/><span class="koboSpan" id="kobo.79.1">we are going to use in our </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">We need five </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">different libraries:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.83.1">Streamlit</span></strong><span class="koboSpan" id="kobo.84.1">, our wonderful framework for </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">web applications</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">numpy</span></strong><span class="koboSpan" id="kobo.87.1">, a library for advanced </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">numeric calculations</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">tensorflow</span></strong><span class="koboSpan" id="kobo.90.1">, the package needed to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">neural networks</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.92.1">Pillow</span></strong><span class="koboSpan" id="kobo.93.1">, a library for </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">image management</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.95.1">opencv-python</span></strong><span class="koboSpan" id="kobo.96.1">, the computer </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">vision package</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.98.1">Let’s install everything by typing the following instructions one </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">by one:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.100.1">
pipenv install streamlit numpy tensorflow Pillow opencv-python</span></pre> <p><span class="koboSpan" id="kobo.101.1">This installation can take</span><a id="_idIndexMarker306"/><span class="koboSpan" id="kobo.102.1"> a little while. </span><span class="koboSpan" id="kobo.102.2">When it finishes, we should have something like this on </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">our screen:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<span class="koboSpan" id="kobo.104.1"><img alt="Figure 8.2: Package installation" src="image/B21147_08_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.105.1">Figure 8.2: Package installation</span></p>
<p><span class="koboSpan" id="kobo.106.1">We can now launch our editor, Sublime Text. </span><span class="koboSpan" id="kobo.106.2">You’ll see that in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.107.1">covid</span></strong><span class="koboSpan" id="kobo.108.1"> directory, there are now the two </span><em class="italic"><span class="koboSpan" id="kobo.109.1">famous</span></em><span class="koboSpan" id="kobo.110.1"> files, </span><strong class="source-inline"><span class="koboSpan" id="kobo.111.1">Pipfile</span></strong><span class="koboSpan" id="kobo.112.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.113.1">Pipfile.lock</span></strong><span class="koboSpan" id="kobo.114.1">, containing the configuration of our virtual environment with the installed libraries and the </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">dependencies list:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<span class="koboSpan" id="kobo.116.1"><img alt="Figure 8.3: ﻿Pipfile" src="image/B21147_08_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.117.1">Figure 8.3: Pipfile</span></p>
<p><span class="koboSpan" id="kobo.118.1">Now we can create a </span><a id="_idIndexMarker307"/><span class="koboSpan" id="kobo.119.1">new file and call it, as usual, </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">app.py</span></strong><span class="koboSpan" id="kobo.121.1">, so let’s write </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">the following:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.123.1">
   touch app.py</span></pre> <p><span class="koboSpan" id="kobo.124.1">Everything is finally ready to </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">start coding.</span></span></p>
<p><span class="koboSpan" id="kobo.126.1">Obviously, we have to</span><a id="_idIndexMarker308"/><span class="koboSpan" id="kobo.127.1"> start by importing the libraries, and this is very easy, as we can see in the </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer182">
<span class="koboSpan" id="kobo.129.1"><img alt="Figure 8.4: Importing the libraries" src="image/B21147_08_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.130.1">Figure 8.4: Importing the libraries</span></p>
<p><span class="koboSpan" id="kobo.131.1">As for the previous web application, we need to create a main function. </span><span class="koboSpan" id="kobo.131.2">Let’s do it by adding some </span><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">html</span></strong><span class="koboSpan" id="kobo.133.1"> code just to give a title to our app, and since we already imported Streamlit, as usual, let’s add as the first instruction, after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.134.1">import streamlit as st</span></strong><span class="koboSpan" id="kobo.135.1"> line, the code for the page </span><a id="_idIndexMarker309"/><span class="koboSpan" id="kobo.136.1">configuration (we just set the title, an icon – you can use any picture you want – and the initial sidebar state). </span><span class="koboSpan" id="kobo.136.2">The full code is </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer183">
<span class="koboSpan" id="kobo.138.1"><img alt="Figure 8.5: First app draft" src="image/B21147_08_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.139.1">Figure 8.5: First app draft</span></p>
<p><span class="koboSpan" id="kobo.140.1">At the moment, we’ve just imported the libraries and added very few lines of code, but the web app can be launched. </span><span class="koboSpan" id="kobo.140.2">Let’s do it by typing the following </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">well-known instruction:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.142.1">
pipenv run streamlit run app.py</span></pre> <p><span class="koboSpan" id="kobo.143.1">In the following figure, the</span><a id="_idIndexMarker310"/><span class="koboSpan" id="kobo.144.1"> result we get upon opening the browser on localhost port </span><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">8501</span></strong><span class="koboSpan" id="kobo.146.1"> can </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">be seen:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer184">
<span class="koboSpan" id="kobo.148.1"><img alt="Figure 8.6: First launch of the app" src="image/B21147_08_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.149.1">Figure 8.6: First launch of the app</span></p>
<p><span class="koboSpan" id="kobo.150.1">No errors! </span><span class="koboSpan" id="kobo.150.2">We can continue to build the app </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">skeleton now.</span></span></p>
<h1 id="_idParaDest-96"><a id="_idTextAnchor096"/><span class="koboSpan" id="kobo.152.1">Building the app skeleton</span></h1>
<p><span class="koboSpan" id="kobo.153.1">At this point, we should be quite expert at building the application’s skeleton, since we did a very good job with the NLP web app developed previously. </span><span class="koboSpan" id="kobo.153.2">In fact, if you recall, we first defined and built up a simple </span><a id="_idIndexMarker311"/><span class="koboSpan" id="kobo.154.1">skeleton containing just a menu with all the functions supposed to be present in the web application and only in a second moment, we implemented those functions one by one. </span><span class="koboSpan" id="kobo.154.2">Now we are going to adopt the </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">same approach.</span></span></p>
<p><span class="koboSpan" id="kobo.156.1">Before building up the skeleton for the </span><em class="italic"><span class="koboSpan" id="kobo.157.1">COVID</span></em><span class="koboSpan" id="kobo.158.1"> app, let us just add a couple of other decorations to our app – for example, some text just below the title and an image in </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">the sidebar.</span></span></p>
<p><span class="koboSpan" id="kobo.160.1">The code with the two new lines of code is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer185">
<span class="koboSpan" id="kobo.162.1"><img alt="Figure 8.7: Text below the title and sidebar creation" src="image/B21147_08_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.163.1">Figure 8.7: Text below the title and sidebar creation</span></p>
<p><span class="koboSpan" id="kobo.164.1">As we already know, the code</span><a id="_idIndexMarker312"/><span class="koboSpan" id="kobo.165.1"> in the third line is responsible for the web application configuration, setting the page title (</span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">Covid-19 Detection Tool</span></strong><span class="koboSpan" id="kobo.167.1">), page icon (</span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">covid19.jpeg image</span></strong><span class="koboSpan" id="kobo.169.1">), and page </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">layout (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">centered</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.173.1">The result produced on the web side is </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.175.1"><img alt="Figure 8.8: Image in the sidebar and text below the title" src="image/B21147_08_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.176.1">Figure 8.8: Image in the sidebar and text below the title</span></p>
<p><span class="koboSpan" id="kobo.177.1">Now, let’s add to the sidebar a very important widget: </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">file_uploader</span></strong><span class="koboSpan" id="kobo.179.1">. </span><span class="koboSpan" id="kobo.179.2">The instruction we will use is </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">the following:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.181.1">
image_file = st.sidebar.file_uploader("Upload an X-Ray Image (jpg, png or jpeg)", type=["jpg", "png", "jpeg"])</span></pre> <p><span class="koboSpan" id="kobo.182.1">As we can see on the web-side, </span><strong class="bold"><span class="koboSpan" id="kobo.183.1">File Uploader</span></strong><span class="koboSpan" id="kobo.184.1"> is a widget that lets us upload (or even drag and drop) an image, saving it in a variable named, in our case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">image_file</span></strong><span class="koboSpan" id="kobo.186.1">. </span><span class="koboSpan" id="kobo.186.2">The first argument is just a label (the text </span><strong class="bold"><span class="koboSpan" id="kobo.187.1">Upload an...</span></strong><span class="koboSpan" id="kobo.188.1">), while the second argument (</span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">type</span></strong><span class="koboSpan" id="kobo.190.1">) contains a list with the types of files users are enabled </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">to select.</span></span></p>
<p><span class="koboSpan" id="kobo.192.1">Immediately after </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">file_uploader</span></strong><span class="koboSpan" id="kobo.194.1">, it’s a good idea to insert a check (an </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">if</span></strong><span class="koboSpan" id="kobo.196.1"> clause) just to be sure that an image has been uploaded and, only in this case, to open it (leveraging the </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">Pillow</span></strong><span class="koboSpan" id="kobo.198.1"> library we imported at </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">the beginning).</span></span></p>
<p><span class="koboSpan" id="kobo.200.1">Once we have the image, and</span><a id="_idIndexMarker313"/><span class="koboSpan" id="kobo.201.1"> only when the image we uploaded can be opened, we can perform some other actions – for example, an </span><strong class="bold"><span class="koboSpan" id="kobo.202.1">Image Preview</span></strong><span class="koboSpan" id="kobo.203.1">. </span><span class="koboSpan" id="kobo.203.2">This new action can be executed by just nesting another </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">if</span></strong><span class="koboSpan" id="kobo.205.1"> clause inside the previous one. </span><span class="koboSpan" id="kobo.205.2">So, finally, our code inside the main function will be </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.207.1"><img alt="Figure 8.9: How to manage the image" src="image/B21147_08_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.208.1">Figure 8.9: How to manage the image</span></p>
<p><span class="koboSpan" id="kobo.209.1">Very easily, we can select an image and when we click on the </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Image Preview</span></strong><span class="koboSpan" id="kobo.211.1"> button, we can see it on the screen, in the </span><a id="_idIndexMarker314"/><span class="koboSpan" id="kobo.212.1">sidebar, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer188">
<span class="koboSpan" id="kobo.214.1"><img alt="Figure 8.10: Image upload and preview in the sidebar" src="image/B21147_08_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.215.1">Figure 8.10: Image upload and preview in the sidebar</span></p>
<p><span class="koboSpan" id="kobo.216.1">At this point, we have a complete app skeleton and are able to upload and show an image in the sidebar. </span><span class="koboSpan" id="kobo.216.2">We are now ready to build up </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">the menu.</span></span></p>
<h1 id="_idParaDest-97"><a id="_idTextAnchor097"/><span class="koboSpan" id="kobo.218.1">Building the menu and adding decorations</span></h1>
<p><span class="koboSpan" id="kobo.219.1">Now, we can add a selectbox in the sidebar, which will be the menu of the web application, and guidelines for its development. </span><span class="koboSpan" id="kobo.219.2">This menu will have three voices – </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">Image Enhance</span></strong><span class="koboSpan" id="kobo.221.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.222.1">Diagnosis</span></strong><span class="koboSpan" id="kobo.223.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Disclaimer and Info</span></strong><span class="koboSpan" id="kobo.225.1"> – and it will be placed below the second </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">if</span></strong><span class="koboSpan" id="kobo.227.1"> clause, the inner one, because it makes sense only if a valid image has already</span><a id="_idIndexMarker315"/><span class="koboSpan" id="kobo.228.1"> been uploaded. </span><span class="koboSpan" id="kobo.228.2">For sure, after the selectbox, we can place the three options (three </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">if</span></strong><span class="koboSpan" id="kobo.230.1"> clauses) that will contain the code for each one of the </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">menu voices.</span></span></p>
<p><span class="koboSpan" id="kobo.232.1">We have already built up a menu in the same way in the NLP web application; the code is </span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">very easy:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer189">
<span class="koboSpan" id="kobo.234.1"><img alt="Figure 8.11: The menu (choice) and its voice﻿ sections" src="image/B21147_08_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.235.1">Figure 8.11: The menu (choice) and its voice sections</span></p>
<p><span class="koboSpan" id="kobo.236.1">Here’s what we </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">are </span></span><span class="No-Break"><a id="_idIndexMarker316"/></span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">doing:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.239.1">At </span><em class="italic"><span class="koboSpan" id="kobo.240.1">line 38</span></em><span class="koboSpan" id="kobo.241.1">, we create a list</span><a id="_idIndexMarker317"/><span class="koboSpan" id="kobo.242.1"> containing all the </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">menu voices</span></span></li>
<li><span class="koboSpan" id="kobo.244.1">Then, at </span><em class="italic"><span class="koboSpan" id="kobo.245.1">line 39</span></em><span class="koboSpan" id="kobo.246.1">, we add a selectbox in the sidebar in order to visualize all the items contained in </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">this list.</span></span></li>
<li><span class="koboSpan" id="kobo.248.1">After that, from </span><em class="italic"><span class="koboSpan" id="kobo.249.1">line 41</span></em><span class="koboSpan" id="kobo.250.1"> up to </span><em class="italic"><span class="koboSpan" id="kobo.251.1">line 48</span></em><span class="koboSpan" id="kobo.252.1">, we double-check which one of menu’s voices has been selected and just print the information on the screen – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">st.subheader</span></strong><span class="koboSpan" id="kobo.254.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.255.1">Image Enhancement</span></strong><span class="koboSpan" id="kobo.256.1">) or, in the case of </span><strong class="bold"><span class="koboSpan" id="kobo.257.1">Diagnosis</span></strong><span class="koboSpan" id="kobo.258.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">just </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">pass</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.262.1">The messages we print with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">st.subheader</span></strong><span class="koboSpan" id="kobo.264.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">pass</span></strong><span class="koboSpan" id="kobo.266.1"> function (it’s just a function doing nothing) are simple placeholders and, in the next chapters, we are going to develop the code related to each one of them. </span><span class="koboSpan" id="kobo.266.2">Here’s how the app’s menu looks </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">thus far:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.268.1"><img alt="Figure 8.12: The menu in the browser" src="image/B21147_08_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.269.1">Figure 8.12: The menu in the browser</span></p>
<p><span class="koboSpan" id="kobo.270.1">As a final decoration, before</span><a id="_idIndexMarker318"/><span class="koboSpan" id="kobo.271.1"> closing the chapter, we can add an </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">About the Author</span></strong><span class="koboSpan" id="kobo.273.1"> button on the sidebar, showing in this way all the information about the author</span><a id="_idIndexMarker319"/><span class="koboSpan" id="kobo.274.1"> of the web application, the link to their website, their email, and so on. </span><span class="koboSpan" id="kobo.274.2">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">the code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.276.1"><img alt="Figure 8.13: About the Author button code" src="image/B21147_08_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.277.1">Figure 8.13: About the Author button code</span></p>
<p><span class="koboSpan" id="kobo.278.1">This is the effect in </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">the browser:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.280.1"><img alt="Figure 8.14: About the Author details" src="image/B21147_08_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.281.1">Figure 8.14: About the Author details</span></p>
<p><span class="koboSpan" id="kobo.282.1">In this section, we created</span><a id="_idIndexMarker320"/><span class="koboSpan" id="kobo.283.1"> the menu for our new web application. </span><span class="koboSpan" id="kobo.283.2">Now, in the sidebar, there are several voices, and the user can clearly select what they want to do. </span><span class="koboSpan" id="kobo.283.3">This approach is very useful since it can be applied anytime we start working on a new </span><a id="_idIndexMarker321"/><span class="koboSpan" id="kobo.284.1">app. </span><span class="koboSpan" id="kobo.284.2">On the left side, in the sidebar, we have a menu with the list of all the features available in the web application, and in the main part, we show the title and information and let the user insert data from </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">their case.</span></span></p>
<h1 id="_idParaDest-98"><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.286.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.287.1">In this chapter, we consolidated our knowledge about virtual environments and package installation. </span><span class="koboSpan" id="kobo.287.2">After that, as usual, we started from an empty file and developed the skeleton of </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">our app.</span></span></p>
<p><span class="koboSpan" id="kobo.289.1">First, we imported all the libraries and created a main function. </span><span class="koboSpan" id="kobo.289.2">We also created some nice decorations such as a title in html, a beautiful icon, and a very interesting image in the sidebar. </span><span class="koboSpan" id="kobo.289.3">We also discovered how to upload files by filtering their types and, once imported, we learned how to visualize those images thanks to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">Pillow</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.291.1"> library.</span></span></p>
<p><span class="koboSpan" id="kobo.292.1">Another important step was to build up the menu of our app with all its voices and, at the end, we created a button showing all the information about the author, with some linkable elements, such as their website and </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">email address</span></span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.295.1">Starting from the next chapter, we will focus on developing the three voices of the menu, which,, at the moment, are just empty containers: </span><strong class="bold"><span class="koboSpan" id="kobo.296.1">Image Enhance</span></strong><span class="koboSpan" id="kobo.297.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.298.1">Diagnosis</span></strong><span class="koboSpan" id="kobo.299.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.300.1">Disclaimer </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.301.1">and Info</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">.</span></span></p>
</div>
</body></html>