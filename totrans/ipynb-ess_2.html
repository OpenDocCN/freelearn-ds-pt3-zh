<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;The Notebook Interface"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. The Notebook Interface</h1></div></div></div><p>The IPython notebook has an extensive user interface that makes it appropriate for the creation of richly formatted documents. In this chapter, we will thoroughly explore the notebook's capabilities. We will also consider the pitfalls and best practices of using the notebook.</p><p>In this chapter, the following topics will be covered:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Notebook editing and navigation, which includes cell types; adding, deleting, and moving cells; loading and saving notebooks; and keyboard shortcuts</li><li class="listitem" style="list-style-type: disc">IPython magics</li><li class="listitem" style="list-style-type: disc">Interacting with the operating system</li><li class="listitem" style="list-style-type: disc">Running scripts, loading data, and saving data</li><li class="listitem" style="list-style-type: disc">Embedding images, video, and other media with IPython's rich display system</li></ul></div><div class="section" title="Editing and navigating a notebook"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Editing and navigating a notebook</h1></div></div></div><p>When we<a class="indexterm" id="id51"/> open a notebook (by either clicking on its name in the dashboard<a class="indexterm" id="id52"/> or creating a new notebook), we see the following in the browser window:</p><div class="mediaobject"><img alt="Editing and navigating a notebook" src="graphics/8341OS_02_01.jpg"/></div><p>In the preceding screenshot, from the top to the bottom, we see the following components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <a class="indexterm" id="id53"/><span class="strong"><strong>Title</strong></span> bar (area marked <span class="strong"><strong>1</strong></span>) that contains the name of the notebook (in the preceding example, we can see<span class="strong"><strong> Chapter 2</strong></span>) and information about the notebook version</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Menu</strong></span> bar (area marked <span class="strong"><strong>2</strong></span>) looks <a class="indexterm" id="id54"/>like a regular application menu</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Toolbar </strong></span>(area marked <span class="strong"><strong>3</strong></span>) is used for quick access to the most frequently used <a class="indexterm" id="id55"/>functionality</li><li class="listitem" style="list-style-type: disc">In the <a class="indexterm" id="id56"/>area marked <span class="strong"><strong>4</strong></span>, an empty computation cell is shown</li></ul></div><p>Starting with<a class="indexterm" id="id57"/> IPython Version 2.0, the notebook has two modes of operation:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Edit</strong></span>: In <a class="indexterm" id="id58"/>this mode, a single cell comes into focus <a class="indexterm" id="id59"/>and we can enter text, execute code, and perform tasks related to that single cell. The Edit mode is activated by clicking on a cell or pressing the <span class="emphasis"><em>Enter</em></span> key.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Command</strong></span>: In this mode, we perform tasks related to the whole notebook structure, such<a class="indexterm" id="id60"/> as moving, copying, cutting, and pasting cells. A series of keyboard shortcuts are available to<a class="indexterm" id="id61"/> make these operations more efficient. The Command mode is activated by clicking anywhere on the notebook, outside any cell, or by pressing the <span class="emphasis"><em>Esc</em></span> key.</li></ul></div><p>When we open a notebook, it's in the Command mode. Let's enter into the Edit mode in our new notebook. For this, either click on the empty cell or hit <span class="emphasis"><em>Enter</em></span>. The notebook's appearance will change slightly, as shown in the following screenshot:</p><div class="mediaobject"><img alt="Editing and navigating a notebook" src="graphics/8341OS_02_02.jpg"/></div><p>Notice the thick border around the selected cell and the small pencil icon on the top-right corner of the notebook menu. These indicate that the notebook is in the Edit mode.</p><p>In the upcoming subsections, we will explore each of the notebook modes in detail.</p><div class="section" title="Getting help and interrupting computations"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec09"/>Getting help and interrupting computations</h2></div></div></div><p>The notebook is a complex tool that integrates several different technologies. It is unlikely<a class="indexterm" id="id62"/> that new (or even experienced) users will be able to <a class="indexterm" id="id63"/>memorize all the commands and shortcuts. The <span class="strong"><strong>Help</strong></span> menu<a class="indexterm" id="id64"/> in the notebook has links to<a class="indexterm" id="id65"/> relevant documentation that should be consulted as often as necessary.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Newcomers <a class="indexterm" id="id66"/>may want to visit the Notebook Interface Tour, which is available at <a class="ulink" href="http://nbviewer.ipython.org/github/ipython/ipython/blob/2.x/examples/Notebook/User%20Interface.ipynb">http://nbviewer.ipython.org/github/ipython/ipython/blob/2.x/examples/Notebook/User%20Interface.ipynb</a>, to get started.</p></div></div><p>It is also easy to get help on any object (including functions and methods). For example, to access help on the <code class="literal">sum()</code> function, run the following line of code in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sum?</strong></span>
</pre></div><p>Appending <code class="literal">??</code> to an object's name will provide more detailed information. Incidentally, just running <code class="literal">?</code> by itself in a cell displays information about IPython features.</p><p>The other important thing to know right from the start is how to interrupt a computation. This can be done through the <span class="strong"><strong>Kernel</strong></span> menu, where the kernel process running the notebook code can be interrupted and restarted. The kernel can also be interrupted by clicking on the <span class="strong"><strong>Stop</strong></span> button on the toolbar.</p></div><div class="section" title="The Edit mode"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec10"/>The Edit mode</h2></div></div></div><p>The Edit <a class="indexterm" id="id67"/>mode is used to enter text in cells and to execute code. Let's type<a class="indexterm" id="id68"/> some code in the fresh notebook we created. As usual, we want to import <code class="literal">NumPy</code> and <code class="literal">matplotlib</code> to the current namespace, so we enter the following magic command in the first cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%pylab inline</strong></span>
</pre></div><p>Press <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span> or click on the Play button on the toolbar to execute the code. Notice that either of the options causes a new cell to be added under the current cell.</p><p>Just to have something concrete to work with, let's suppose we want to compute the interest accumulated in an investment. Type the following code in three successive cells:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">In cell 1, enter the following command lines:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>def return_on_investment(principal, interest_rate, number_of_years):</strong></span>
<span class="strong"><strong>    return principal * e ** (interest_rate * number_of_years)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">In cell 2, enter the following command lines:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>principal = 250</strong></span>
<span class="strong"><strong>interest_rate = .034</strong></span>
<span class="strong"><strong>tstart = 0.0</strong></span>
<span class="strong"><strong>tend = 5.0</strong></span>
<span class="strong"><strong>npoints = 6</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">In cell 3, enter the following command lines<span class="strong"><strong>:</strong></span><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>tvalues = linspace(tstart, tend, npoints)</strong></span>
<span class="strong"><strong>amount_values = return_on_investment(principal, interest_rate, tvalues)</strong></span>
<span class="strong"><strong>plot(tvalues, amount_values, 'o')</strong></span>
<span class="strong"><strong>title('Return on investment, years {} to {}'.format(tstart, tend))</strong></span>
<span class="strong"><strong>xlabel('Years')</strong></span>
<span class="strong"><strong>ylabel('Return')</strong></span>
<span class="strong"><strong>tstart += tend</strong></span>
<span class="strong"><strong>tend += tend</strong></span>
</pre></div></li></ul></div><p>Now, perform<a class="indexterm" id="id69"/> the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Run cell 1 and cell 2 in the usual way by pressing <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span>.</li><li class="listitem">Run cell 3 by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Enter</em></span> instead.</li></ol></div><p>Notice that<a class="indexterm" id="id70"/> cell 3 continues to be selected after being executed. Keep pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Enter</em></span> while having cell 3 selected. The plot will be updated each time to display the return on the investment for a different 5-year period.</p><p>This is how the code works:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">In cell 1, we defined a function that computes the return on investment for given principal, interest rate, and number of years.</li><li class="listitem" style="list-style-type: disc">In cell 2, we set actual values for the principal and interest, and then initialized variables to define the period for which we want to do the computation.</li><li class="listitem" style="list-style-type: disc">Cell 3 computed the amount returned for a period of 5 years and plotted the results.</li><li class="listitem" style="list-style-type: disc">Then, the variables <code class="literal">tstart</code> and <code class="literal">tend</code> were updated. The command lines are as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>tstart += tend</strong></span>
<span class="strong"><strong>tend += tend</strong></span>
</pre></div></li></ul></div><p>The effect is that, the next time the cell gets updated, time advances to the next 5-year period. So, by repeatedly pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Enter</em></span>, we can quickly see how the investment grows in successive 5-year periods.</p><p>There is a third way to run commands in a cell. Select cell 2 again by clicking on it. Then, press <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Enter</em></span> in Windows or <span class="emphasis"><em>Option</em></span> + <span class="emphasis"><em>Enter</em></span> on a Mac. This will run cell 2 and insert a new cell under it. Leave the new cell alone for a while. We don't really need that cell, and we will learn how to delete it in the next subsection.</p><p>So, there are<a class="indexterm" id="id71"/> three ways to run the contents of a cell:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Pressing <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span> or the Play button on the toolbar. This will run the cell and select <a class="indexterm" id="id72"/>the next cell (create a new cell if at the end of the notebook). This is the most usual way to execute a cell.</li><li class="listitem" style="list-style-type: disc">Pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Enter</em></span>. This will run the cell and keep the same cell selected. It's useful when we want to repeatedly execute the same cell. For example, if we want to make modifications to the existing code.</li><li class="listitem" style="list-style-type: disc">Pressing <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Enter</em></span>. This will run the cell and insert a new cell immediately below it.</li></ul></div><p>Another useful<a class="indexterm" id="id73"/> feature of the Edit mode is <span class="strong"><strong>tab completion</strong></span>. Select an empty cell and type the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>print am</strong></span>
</pre></div><p>Then, press the <span class="emphasis"><em>Tab</em></span> key. A list of suggested completions appears. Using the arrow keys of the keyboard or the mouse, we can select <code class="literal">amount_values</code> and then press <span class="emphasis"><em>Enter</em></span> to accept the completion.</p><p>A very important feature of IPython is easy access to help information. Click on an empty cell and type:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>linspace</strong></span>
</pre></div><p>Then, press <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Tab</em></span>. A tooltip containing information about the <code class="literal">linspace</code> function will appear. More information can be obtained by clicking on the <span class="strong"><strong>+</strong></span> symbol at the top-right of the tooltip window. By clicking on the <span class="strong"><strong>^</strong></span> symbol, the information is displayed in an information area at the bottom of the notebook.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>The <span class="emphasis"><em>Tab</em></span> and <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Tab</em></span> features are the most useful ones of the notebook; be sure to use them often!</p></div></div></div><div class="section" title="The Command mode"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec11"/>The Command mode</h2></div></div></div><p>The number<a class="indexterm" id="id74"/> of shortcuts available in the Command mode is <a class="indexterm" id="id75"/>substantially larger than those available in the Edit mode. Fortunately, it is not necessary to memorize all of them at once, since most actions in the Command mode are also available in the menu. In this section, we will only describe some common features of the Command mode. The following table lists some of the useful<a class="indexterm" id="id76"/> shortcuts for editing cells; the other shortcuts <a class="indexterm" id="id77"/>will be described later:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Shortcut</p>
</th><th style="text-align: left" valign="bottom">
<p>Action</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Enter</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Activates <a class="indexterm" id="id78"/>the Edit mode</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Esc</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Activates<a class="indexterm" id="id79"/> the Command mode</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>H</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Displays<a class="indexterm" id="id80"/> the list of keyboard shortcuts</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>S</em></span> or <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>S</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Saves<a class="indexterm" id="id81"/> the <a class="indexterm" id="id82"/>notebook</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>A</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Inserts<a class="indexterm" id="id83"/> a cell above</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>B</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Inserts <a class="indexterm" id="id84"/>a cell below</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>D</em></span> (press twice)</p>
</td><td style="text-align: left" valign="top">
<p>Deletes<a class="indexterm" id="id85"/> the cell</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Z</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Undoes the last delete</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>K</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Moves<a class="indexterm" id="id86"/> the cell up</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>J</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Moves<a class="indexterm" id="id87"/> the cell down</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>X</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Cuts<a class="indexterm" id="id88"/> the content of the cell</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>C</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Copies<a class="indexterm" id="id89"/> the content of the cell</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>V</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Pastes<a class="indexterm" id="id90"/> the content of the cell below the current cell</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>V</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Pastes<a class="indexterm" id="id91"/> the content of the cell above the current cell</p>
</td></tr></tbody></table></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>One of the most common (and frustrating) mistakes when using the notebook is to type something in the wrong mode. Remember to use <span class="emphasis"><em>Esc</em></span> to switch to the Command mode and <span class="emphasis"><em>Enter</em></span> to switch to the Edit mode. Also, remember that clicking on a cell automatically places it in the Edit mode, so it will be necessary to press <span class="emphasis"><em>Esc</em></span> to go to the Command mode.</p></div></div><p>Go ahead and try some of the editing shortcuts in the sample notebook. Here is one example that you can try:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Press <span class="emphasis"><em>Esc</em></span> to go to the Command mode.</li><li class="listitem">Use the arrow keys to move to the empty cell we created between cell 2 and cell 3 in the previous subsection.</li><li class="listitem">Press <span class="emphasis"><em>D</em></span> twice. This will cause the cell to be deleted. To get the cell back, press <span class="emphasis"><em>Z</em></span>.</li></ol></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>Notice that some of the shortcuts do not conform to the usual shortcuts in other software. For <a class="indexterm" id="id92"/>example, the shortcuts for cutting, copying, and<a class="indexterm" id="id93"/> pasting cells are not preceded by the <span class="emphasis"><em>Ctrl</em></span> key.</p></div></div></div><div class="section" title="Cell types"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec12"/>Cell types</h2></div></div></div><p>So far, we<a class="indexterm" id="id94"/> have used the notebook cells only to enter code. We<a class="indexterm" id="id95"/> can, however, use cells to enter the explanatory text and give structure to the notebook. The <a class="indexterm" id="id96"/>notebook uses the <span class="strong"><strong>Markdown</strong></span> language to allow easy insertion of rich text in a cell. Markdown was created by John Gruber<a class="indexterm" id="id97"/> for plain text editing of HTML. See the project page at <a class="ulink" href="http://daringfireball.net/projects/markdown/basics">http://daringfireball.net/projects/markdown/basics</a> for the basics of the syntax.</p><p>Let's see how it works in the notebook. If you created any other cells to experiment with the keyboard shortcuts in the previous section, delete them now so that the notebook only has the <code class="literal">%pylab inline</code> cell and the three cells where the interest computation is done.</p><p>Click on the <code class="literal">%pylab inline</code> cell and insert a cell right below it. You can either use the menu, or go to the Command mode (using the <span class="emphasis"><em>Esc</em></span> key) and use the shortcut key <span class="emphasis"><em>B</em></span>.</p><p>We now want to convert the new cell type to Markdown. There are three ways to do that. Start by clicking on the cell to select it, and then perform one of the following steps:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Click on the notebook menu item <span class="strong"><strong>Cell</strong></span>, select <span class="strong"><strong>Cell Type</strong></span>, and then click on <span class="strong"><strong>Markdown</strong></span> as shown in the following screenshot</li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Markdown</strong></span> from the drop-down box on the notebook's toolbar</li><li class="listitem" style="list-style-type: disc">Go to the Command mode by pressing <span class="emphasis"><em>Esc</em></span> and then press <span class="emphasis"><em>M</em></span></li></ul></div><div class="mediaobject"><img alt="Cell types" src="graphics/8341OS_02_03.jpg"/></div><p>Notice<a class="indexterm" id="id98"/> that once the cell is converted to Markdown, it is automatically<a class="indexterm" id="id99"/> in the Edit mode. Now, enter the following in the new Markdown cell (be careful to leave an extra blank line where indicated):</p><div class="informalexample"><pre class="programlisting">We want to know how an investment grows with a fixed interest.

The <span class="strong"><strong>*</strong></span>compound interest<span class="strong"><strong>*</strong></span> formula states that:
<span class="strong"><strong>$$</strong></span>R = Pe^{rt}<span class="strong"><strong>$$</strong></span>
where:

<span class="strong"><strong>-</strong></span> <span class="strong"><strong>$</strong></span>P<span class="strong"><strong>$</strong></span> is the principal (initial investment).
- $r$ is the annual interest rate, as a decimal.
- $t$ is the time in years.
- $e$ is the base of natural logarithms.
- $R$ is the total return after $t$ years (including principal)

For details, see the <span class="strong"><strong>[corresponding Wikipedia entry](http://en.wikipedia.org/wiki/Compound_interest)</strong></span>.

We start by defining a Python function that implements this formula.</pre></div><p>After the text is entered, press <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span> to execute the cell. Instead of using the IPython <a class="indexterm" id="id100"/>interpreter to evaluate the cell, the notebook runs it through the <a class="indexterm" id="id101"/>Markdown interpreter and the cell is rendered using HTML, producing the output displayed in the following screenshot:</p><div class="mediaobject"><img alt="Cell types" src="graphics/8341OS_02_04.jpg"/></div><p>In this<a class="indexterm" id="id102"/> example, we use the following Markdown features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Text is entered normally and a new paragraph is indicated by letting an extra blank line within the text.</li><li class="listitem" style="list-style-type: disc">Italics are indicated by enclosing the text between asterisks, as in <code class="literal">*compound interest*</code>.</li><li class="listitem" style="list-style-type: disc">Formulae enclosed in double dollar (<code class="literal">$$</code>) signs, as in <code class="literal">$$R = Pe^{rt}$$</code>, are displayed centered in the page.</li><li class="listitem" style="list-style-type: disc">An unordered list is indicated by lines starting with a dash (<code class="literal">-</code>). It is important to leave blank lines before and after the list.</li><li class="listitem" style="list-style-type: disc">A single dollar (<code class="literal">$</code>) sign causes the formula to be typeset inline.</li><li class="listitem" style="list-style-type: disc">Hyperlinks are specified in the following format: <code class="literal">[corresponding Wikipedia entry]( http://en.wikipedia.org/wiki/Compound_interest)</code>.</li></ul></div><p>In a Markdown <a class="indexterm" id="id103"/>cell, mathematical formulae can be entered in <span class="strong"><strong>LaTeX</strong></span>, which is an extensive language for technical typesetting that is beyond the scope of this book. Fortunately, we don't need to use the full-fledged formatting capabilities of LaTeX, but only the formula-editing features. A good quick introduction to LaTeX can be found<a class="indexterm" id="id104"/> at <a class="ulink" href="http://en.wikibooks.org/wiki/LaTeX/Mathematics">http://en.wikibooks.org/wiki/LaTeX/Mathematics</a>. Learning a bit of LaTeX is very useful, since it is also used in other Python libraries. For instance, <code class="literal">matplotlib</code> allows LaTeX to <a class="indexterm" id="id105"/>be used in plot titles and axis labels. In the notebook, LaTeX is<a class="indexterm" id="id106"/> rendered by MathJax, a LaTeX interpreter implemented<a class="indexterm" id="id107"/> in JavaScript by Davide Cervone. Visit <a class="ulink" href="http://www.mathjax.org/">http://www.mathjax.org/</a> for details.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>To edit the contents of a Markdown cell once it has been displayed, simply double-click on the cell. After the edits are done, run the cell using <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span> to render it again.</p></div></div><p>To add structure to the notebook, we can add headings of different sizes. Let's add a global heading to our notebook:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Add a new cell at the very top of the notebook and change its type to <span class="strong"><strong>Heading 1</strong></span>. Recall that there are three alternatives to do this:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">By navigating to <span class="strong"><strong>Cell</strong></span> | <span class="strong"><strong>Cell Type</strong></span></li><li class="listitem" style="list-style-type: disc">Using the <span class="strong"><strong>Cell Type</strong></span> dropdown on the toolbar</li><li class="listitem" style="list-style-type: disc">Using the keyboard shortcut <span class="emphasis"><em>1</em></span> in the Command mode</li></ul></div></li><li class="listitem">Enter a title for the notebook and run the cell using <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span>.</li></ol></div><p>The notebook supports six heading sizes, from <span class="strong"><strong>Heading 1</strong></span> (the largest) to <span class="strong"><strong>Heading 6</strong></span> (the smallest).</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note15"/>Note</h3><p>The Markdown language also allows the insertion of headings, using the hash (<code class="literal">#</code>) symbol. Even though this saves typing, we recommend the use of the Heading 1 to Heading 6 cells. Having the headings in separate cells keeps the structure <a class="indexterm" id="id108"/>of the notebook when it is saved. This structure is used by the <code class="literal">nbconvert</code> utility.</p></div></div><p>The following table summarizes the types of cells we considered so far:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Cell type</p>
</th><th style="text-align: left" valign="bottom">
<p>Command mode shortcuts</p>
</th><th style="text-align: left" valign="bottom">
<p>Use</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Code</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Y</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>This allows <a class="indexterm" id="id109"/>you to edit and write new code to the IPython interpreter. The Default language is Python.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Markdown</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>M</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a class="indexterm" id="id110"/> allows you to write an explanatory text.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Heading 1 to Heading 6</p>
</td><td style="text-align: left" valign="top">
<p>Keys<span class="emphasis"><em> 1 </em></span>to<span class="emphasis"><em> 6</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id111"/>allows you to structure the document </p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Raw NBConvert</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>R</em></span>
</p>
</td><td style="text-align: left" valign="top">
<p>The<a class="indexterm" id="id112"/> content of this cell remains unmodified when the notebook is converted to a different format</p>
</td></tr></tbody></table></div></div></div></div>
<div class="section" title="IPython magics"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>IPython magics</h1></div></div></div><p>Magics<a class="indexterm" id="id113"/> are special instructions to the IPython interpreter that perform specialized actions. There are two types of magics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Line-oriented</strong></span>: This <a class="indexterm" id="id114"/>type of magics start with<a class="indexterm" id="id115"/> a single percent (<code class="literal">%</code>) sign</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Cell-oriented</strong></span>: This<a class="indexterm" id="id116"/> type of magics start<a class="indexterm" id="id117"/> with double percent (<code class="literal">%%</code>) signs</li></ul></div><p>We are already familiar with one of the magic command, that is, <code class="literal">%pylab inline</code>. This particular magic does two of the following things: it imports <code class="literal">NumPy</code> and <code class="literal">matplotlib</code>, and sets up the notebook for inline plots. To see one of the other options, change the cell to <code class="literal">%pylab</code>.</p><p>Run this cell and then run the cell that produces the plot again. Instead of drawing the graph inline, IPython will now open a new window with the plot as shown in the following screenshot:</p><div class="mediaobject"><img alt="IPython magics" src="graphics/8341OS_02_05.jpg"/></div><p>This window is interactive and you can resize the graph, move it, and save it to a file from here.</p><p>Another useful magic is <code class="literal">%timeit</code>, which records the time it takes to run a line of Python code. Run the following code in a new cell in the notebook:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%timeit return_on_investment(principal, interest_rate, tvalues)</strong></span>
</pre></div><p>The output <a class="indexterm" id="id118"/>will be something like this:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>100000 loops, best of 3: 3.73 µs per loop</strong></span>
</pre></div><p>To obtain a better estimate, the command is run 10,000 times and the runtime is averaged. This is done three times and the best result is reported.</p><p>The <code class="literal">%timeit</code> magic<a class="indexterm" id="id119"/> is also available in the Edit mode. To demonstrate this, run the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>principal = 250</strong></span>
<span class="strong"><strong>interest_rates = [0.0001 * i for i in range(100000)]</strong></span>
<span class="strong"><strong>tfinal = 10</strong></span>
</pre></div><p>In the next cell, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%timeit</strong></span>
<span class="strong"><strong>returns = []</strong></span>
<span class="strong"><strong>for r in interest_rates:</strong></span>
<span class="strong"><strong>    returns.append(return_on_investment(principal, r, tfinal))</strong></span>
</pre></div><p>The preceding code computes a list with the returns for 100,000 different values of the interest rate, but uses plain Python code only. The reported time for this code is displayed in the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>10 loops, best of 3: 31.6 ms per loop</strong></span>
</pre></div><p>Let's now rewrite the same computation using <code class="literal">NumPy</code> arrays. Run the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>principal = 250</strong></span>
<span class="strong"><strong>interest_rates = arange(0, 10, 0.0001)</strong></span>
<span class="strong"><strong>tfinal = 10</strong></span>
</pre></div><p>In the next cell, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%timeit</strong></span>
<span class="strong"><strong>returns = return_on_investment(principal, interest_rates, tfinal)</strong></span>
</pre></div><p>Now, the runtime is displayed in the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>100 loops, best of 3: 5.53 ms per loop</strong></span>
</pre></div><p>When comparing the two outputs, we can see the speed gain obtained using <code class="literal">NumPy</code>.</p><p>To list all magics that are available, run the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%lsmagic</strong></span>
</pre></div><p>Once you have the list of all magics, you can inquire about a particular one by running a cell with the magic name appended by a question mark: <code class="literal">%pylab?</code>.</p><p>This will display the information about the <code class="literal">%pylab</code> magic in a separate window at the bottom of the browser.</p><p>Another interesting<a class="indexterm" id="id120"/> feature is the capability to run code that is written in other languages. Just to illustrate the possibilities, we'll see how to accelerate the code using Cython, because Cython compiles Python code into C. Let's write a function that computes approximations of areas bounded by a sine curve. Here is how we could define the function in pure Python:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>import math</strong></span>
<span class="strong"><strong>def sin_area(a, b, nintervals):</strong></span>
<span class="strong"><strong>    dx = (b-a)/nintervals</strong></span>
<span class="strong"><strong>    sleft = 0.0</strong></span>
<span class="strong"><strong>    sright = 0.0</strong></span>
<span class="strong"><strong>    for i in range(nintervals):</strong></span>
<span class="strong"><strong>        sleft += math.sin(a + i * dx)</strong></span>
<span class="strong"><strong>        sright += math.sin(a + (i + 1) * dx)</strong></span>
<span class="strong"><strong>    return dx * (sright + sleft) / 2 </strong></span>
</pre></div><p>We will approximate the area by taking the average of the left and right endpoint rules (which is equivalent to the Trapezoidal rule). The code is admittedly inefficient and unpythonic. Notice in particular that we use the Python library version of the <code class="literal">sin()</code> function, instead <a class="indexterm" id="id121"/>of the <code class="literal">NumPy</code> implementation. The <code class="literal">NumPy</code> implementation, in this case, actually yields a slower code due to the repeated conversions between lists and arrays.</p><p>To run a<a class="indexterm" id="id122"/> simple test, execute the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sin_area(0, pi, 10000)</strong></span>
</pre></div><p>We get the following output after running the preceding cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>1.9999999835506606</strong></span>
</pre></div><p>The output makes sense, since the actual value of the area is 2. Let's now time the execution using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%timeit sin_area(0, pi, 10000)</strong></span>
</pre></div><p>We will get the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>100 loops, best of 3: 3.7 ms per loop</strong></span>
</pre></div><p>Let's now implement the same function in Cython. Since the Cython magic is in an extension module, we need to load that module first. We will load the extension module using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%load_ext cythonmagic</strong></span>
</pre></div><p>Now, we will define the Cython function. We will not discuss the syntax in detail, but notice that it is pretty similar to Python (the main difference in this example is that we must declare <a class="indexterm" id="id123"/>the variables to specify their C type):</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%cython</strong></span>
<span class="strong"><strong>cimport cython</strong></span>
<span class="strong"><strong>from libc.math cimport sin</strong></span>

<span class="strong"><strong>@cython.cdivision(True)</strong></span>
<span class="strong"><strong>def sin_area_cython(a, b, nintervals):</strong></span>
<span class="strong"><strong>    cdef double dx, sleft, sright</strong></span>
<span class="strong"><strong>    cdef int i</strong></span>
<span class="strong"><strong>    dx = (b-a)/nintervals</strong></span>
<span class="strong"><strong>    sleft = 0.0</strong></span>
<span class="strong"><strong>    sright = 0.0</strong></span>
<span class="strong"><strong>    for i in range(nintervals):</strong></span>
<span class="strong"><strong>        sleft += sin(a + i * dx)</strong></span>
<span class="strong"><strong>        sright += sin(a + (i + 1) * dx)</strong></span>
<span class="strong"><strong>    return dx * (sright + sleft) / 2</strong></span>
</pre></div><p>Test the preceding function using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sin_area_cython(0, pi, 10000)</strong></span>
</pre></div><p>After running the preceding function, we get the same output as earlier:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>1.9999999835506608</strong></span>
</pre></div><p>Let's now time the function using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%timeit sin_area_cython(0, pi, 10000)</strong></span>
</pre></div><p>The runtime is displayed in the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>1000 loops, best of 3: 1.12 ms per loop</strong></span>
</pre></div><p>We see that the Cython code runs in about 30 percent of the total time taken by the Python code. It is important to emphasize that this is not the recommended way to speed up this code. A simpler solution would be to use <code class="literal">NumPy</code> to vectorize the computation:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>def sin_area_numpy(a, b, nintervals):</strong></span>
<span class="strong"><strong>    dx = (b - a) / nintervals</strong></span>
<span class="strong"><strong>    xvalues = arange(a, b, dx)</strong></span>
<span class="strong"><strong>    sleft = sum(sin(xvalues))</strong></span>
<span class="strong"><strong>    sright = sum(sin(xvalues + dx))</strong></span>
<span class="strong"><strong>    return dx * (sleft + sright) / 2</strong></span>
</pre></div><p>The time after running the preceding code is displayed in the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>1000 loops, best of 3: 248 µs per loop</strong></span>
</pre></div><p>There is a lesson here; when we try to speed up the code, the first thing to try is to always write it using <code class="literal">NumPy</code> arrays, taking the advantage of vectorized functions. If further speedups <a class="indexterm" id="id124"/>are needed, we can use specialized libraries such as<a class="indexterm" id="id125"/> <span class="strong"><strong>Numba</strong></span> and <span class="strong"><strong>NumbaPro</strong></span> (which will be discussed later in this book) to accelerate<a class="indexterm" id="id126"/> the code. In fact, these libraries provide a simpler approach to compile the code into C than using Cython directly.</p></div>
<div class="section" title="Interacting with the operating system"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Interacting with the operating system</h1></div></div></div><p>Any <a class="indexterm" id="id127"/>code with some degree of complexity will interact with the computer's operating system when files must be opened and closed, scripts must be run, or online data must be accessed. Plain Python already has a lot of tools to access these facilities, and IPython and the notebook add another level of functionality and convenience.</p><div class="section" title="Saving the notebook"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec13"/>Saving the notebook</h2></div></div></div><p>The<a class="indexterm" id="id128"/> notebook is autosaved in periodic intervals. The <a class="indexterm" id="id129"/>default interval is 2 minutes, but this can be changed in the configuration files or using the <code class="literal">%autosave</code> magic. For example, to change the autosave interval to 5 minutes, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%autosave 300</strong></span>
</pre></div><p>Notice that the time is entered in seconds. To disable the autosave feature, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%autosave 0</strong></span>
</pre></div><p>We can<a class="indexterm" id="id130"/> also save the notebook using the <span class="strong"><strong>File</strong></span> menu or by<a class="indexterm" id="id131"/> clicking on the disk icon on the toolbar. This creates <a class="indexterm" id="id132"/>a <span class="strong"><strong>checkpoint</strong></span>. Checkpoints are stored in a hidden folder and can be restored from the <span class="strong"><strong>File</strong></span> menu. Notice that only the latest checkpoint is made available.</p><p>Notebooks are saved as plain text files with the <code class="literal">.ipynb</code> extension, using JSON. JSON is a format widely used for information exchange in web applications, and is documented in <a class="ulink" href="http://www.json.org/">http://www.json.org/</a>. This makes it easy to exchange notebooks with other people: simply give<a class="indexterm" id="id133"/> them the <code class="literal">.ipynb</code> file, and it can then be copied to the appropriate working directory. The next time the notebook server is opened in that directory, the new notebook will be available (or the directory list can be refreshed from the dashboard). Also, since JSON is in a plain text format, it can be easily versioned.</p></div><div class="section" title="Converting the notebook to other formats"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec14"/>Converting the notebook to other formats</h2></div></div></div><p>Notebooks<a class="indexterm" id="id134"/> can be converted <a class="indexterm" id="id135"/>to other formats using the <code class="literal">nbconvert</code> utility. This<a class="indexterm" id="id136"/> is a command-line utility. So, to use it, open a terminal window in the directory that contains your notebook files.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>Windows users can press <span class="emphasis"><em>Shift</em></span> and right-click on the name of the directory that contains the notebook files and then select <span class="strong"><strong>Open command window here</strong></span>.</p></div></div><p>Open a shell window and enter the following line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>ipython nbconvert "Chapter 2.ipynb"</strong></span>
</pre></div><p>You must, of course, replace <code class="literal">Chapter 2.ipynb</code> with the name of the file that contains your notebook. The file name must be enclosed by quotes.</p><p>The preceding command will convert the notebook to a static HTML page that can be directly placed in a web server.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>An alternative<a class="indexterm" id="id137"/> way to publish notebooks on the Web is to use the site <a class="ulink" href="http://nbviewer.ipython.org/">http://nbviewer.ipython.org/</a>.</p></div></div><p>It is also <a class="indexterm" id="id138"/>possible to create a slideshow with <code class="literal">nbconvert</code> using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>ipython nbconvert "Chapter 2.ipynb" --to slides</strong></span>
</pre></div><p>However, to<a class="indexterm" id="id139"/> get a decent presentation, we must first specify its structure in the notebook. To do so, go to the notebook and select <span class="strong"><strong>Slide show</strong></span> on the <span class="strong"><strong>Cell</strong></span> toolbar drop-down list. Then, determine for each cell if it should be a slide, a sub-slide, or a fragment.</p><p>To view the <a class="indexterm" id="id140"/>slide show, you need to install the <code class="literal">reveal.js</code> file in the same directory as the web page containing the presentation. You can download this file from <a class="ulink" href="https://github.com/hakimel/reveal.js">https://github.com/hakimel/reveal.js</a>. If necessary, rename the directory that contains all the files to <code class="literal">reveal.js</code>. We are then ready to open the HTML file that contains the presentation.</p><p>It is also possible to convert notebooks to LaTeX and PDF. However, this requires the installation of packages not included in Anaconda.</p></div><div class="section" title="Running shell commands"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec15"/>Running shell commands</h2></div></div></div><p>We can <a class="indexterm" id="id141"/>run any shell command from the notebook by<a class="indexterm" id="id142"/> starting a cell with an exclamation (<code class="literal">!</code>) mark. For example, to obtain a directory listing in Windows, run the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>!dir</strong></span>
</pre></div><p>The equivalent command in Linux or OS X is the following:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>!ls</strong></span>
</pre></div><p>You can enter command lines of any complexity in the cell. For example, the following line would compile the famous "Hello, world!" program every student of C has to try:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>!cc hello.c –o hello</strong></span>
</pre></div><p>Of course, this will not run correctly in your computer unless you have the C compiler, <code class="literal">cc</code>, installed and the <code class="literal">hello.c</code> file with the proper code.</p><p>Instead of using shell commands directly, a lot of the same functionality is provided by magic commands. For example, a directory listing (in any operating system) is obtained by running the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%ls</strong></span>
</pre></div><p>The following<a class="indexterm" id="id143"/> table shows a list of some of the most commonly used magics to interact with the system:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Magic</p>
</th><th style="text-align: left" valign="bottom">
<p>Purpose</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%cd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Changes<a class="indexterm" id="id144"/> the directory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%pwd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Prints<a class="indexterm" id="id145"/> the current directory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%ls</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Lists<a class="indexterm" id="id146"/> the current directory contents</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%mkdir</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Creates <a class="indexterm" id="id147"/>a new directory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%rmdir</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Removes<a class="indexterm" id="id148"/> a directory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%echo</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Prints <a class="indexterm" id="id149"/>a string</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%alias</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Creates<a class="indexterm" id="id150"/> an alias</p>
</td></tr></tbody></table></div><p>The <code class="literal">%echo</code> magic<a class="indexterm" id="id151"/> is frequently used to print values of environment variables. For example, to print the contents of the <code class="literal">PATH</code> environment variable in Windows, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%echo %PATH%</strong></span>
</pre></div><p>In Linux or OS X, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%echo $PATH</strong></span>
</pre></div><p>The <code class="literal">%alias</code> magic<a class="indexterm" id="id152"/> creates an alias for frequently used commands. For example, to define a macro that displays the <code class="literal">PATH</code> value in Windows, execute the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%alias show_path echo %PATH%</strong></span>
</pre></div><p>In Linux or OS X, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%alias show_path echo $PATH</strong></span>
</pre></div><p>After the preceding command is defined, we can run the following command to display the path:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>show_path</strong></span>
</pre></div><p>To make entering<a class="indexterm" id="id153"/> commands even easier, a feature called <span class="strong"><strong>automagic</strong></span> allows line-oriented magics to be entered without the <code class="literal">%</code> symbol (as shown in the preceding command). For example, to create a directory, we can simply enter the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mkdir my-directory</strong></span>
</pre></div><p>If we <a class="indexterm" id="id154"/>change our mind, we can remove the <a class="indexterm" id="id155"/>directory using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>rmdir my-directory</strong></span>
</pre></div><p>The automagic feature is controlled by the <code class="literal">%automagic</code> magic. For example, use the following command to turn automagic off:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%automagic off</strong></span>
</pre></div></div></div>
<div class="section" title="Running scripts, loading data, and saving data"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Running scripts, loading data, and saving data</h1></div></div></div><p>When<a class="indexterm" id="id156"/> working with projects of some complexity, it is common to have the<a class="indexterm" id="id157"/> need<a class="indexterm" id="id158"/> to run scripts written by others. It is also always necessary to load data and save results. In this section, we will describe the facilities that IPython provides for these tasks.</p><div class="section" title="Running Python scripts"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec16"/>Running Python scripts</h2></div></div></div><p>The<a class="indexterm" id="id159"/> following Python script generates a plot of a solution of the Lorenz equations, a famous example in the theory of chaos. If you are typing the code, do not type it in a cell in the notebook. Instead, use a text editor and save the file with the name <code class="literal">lorenz.py</code> in the same directory that contains the notebook file. The code is as follows:</p><div class="informalexample"><pre class="programlisting">import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import odeint
from mpl_toolkits.mplot3d import Axes3D

def make_lorenz(sigma, r, b):
    def func(statevec, t):
        x, y, z = statevec
        return [ sigma * (y - x),
                 r * x - y - x * z,
                 x * y - b * z ]
    return func
    
lorenz_eq = make_lorenz(10., 28., 8./3.)
 
tmax = 50
tdelta = 0.005
tvalues = np.arange(0, tmax, tdelta) 
ic = np.array([0.0, 1.0, 0.0])
sol = odeint(lorenz_eq, ic, tvalues)

x, y, z = np.array(zip(*sol))

fig = plt.figure(figsize=(10,10))
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z, lw=1, color='red')
ax.set_xlabel('$x$')
ax.set_ylabel('$y$')
ax.set_zlabel('$z$')
plt.show()</pre></div><p>Now, go to<a class="indexterm" id="id160"/> the notebook and run a cell using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%run lorenz.py</strong></span>
</pre></div><p>This will run the script and produce a plot of the solution, as shown in the following figure:</p><div class="mediaobject"><img alt="Running Python scripts" src="graphics/8341OS_02_06.jpg"/></div><p>The <code class="literal">%run</code> magic<a class="indexterm" id="id161"/> executes the script in the notebook's namespace so that all global variables, functions, and classes defined in the script are made available in the current notebook.</p><p>It is also possible <a class="indexterm" id="id162"/>to use the <code class="literal">%load</code> magic for the same purpose:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%load lorenz.py</strong></span>
</pre></div><p>The difference<a class="indexterm" id="id163"/> is that <code class="literal">%load</code> does not immediately run the script, but places its code in a cell. It can then be run from the cell it was inserted in. A slightly annoying behavior of the <code class="literal">%load</code> magic is that it inserts a new cell with the script code even if there already is one from a previous use of <code class="literal">%load</code>. The notebook has no way of knowing if the user wants to overwrite the code in the existing cell, so this is the safest behavior. However, unwanted code must be deleted manually.</p><p>The <code class="literal">%load</code> magic also allows code to be loaded directly from the web by providing a URL as input:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%load http://matplotlib.org/mpl_examples/pylab_examples/boxplot_demo2.py</strong></span>
</pre></div><p>This will load the code for a box plot example from the matplotlib site to a cell. To display the image, the script must be run in the cell.</p></div><div class="section" title="Running scripts in other languages"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec17"/>Running scripts in other languages</h2></div></div></div><p>We <a class="indexterm" id="id164"/>can also run scripts written in other languages<a class="indexterm" id="id165"/> directly in the notebook. The<a class="indexterm" id="id166"/> following<a class="indexterm" id="id167"/> table contains some <a class="indexterm" id="id168"/>of<a class="indexterm" id="id169"/> the supported languages:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Cell magic</p>
</th><th style="text-align: left" valign="bottom">
<p>Language</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%HTML</code> or <code class="literal">%%html</code>
</p>
</td><td style="text-align: left" valign="top">
<p>HTML</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%SVG</code> or <code class="literal">%%svg</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Scaled Vector Graphics Language</strong></span> (<span class="strong"><strong>SVGL</strong></span>)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%bash</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The<a class="indexterm" id="id170"/> Bash scripting language, which is available in Unix-like systems such as Ubuntu and Mac OS X</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%cmd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>MS <a class="indexterm" id="id171"/>Windows command-line language</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%javascript</code>
</p>
</td><td style="text-align: left" valign="top">
<p>JavaScript</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%latex</code>
</p>
</td><td style="text-align: left" valign="top">
<p>LaTeX, the<a class="indexterm" id="id172"/> scientific-oriented document preparation language</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%perl</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The<a class="indexterm" id="id173"/> PERL scripting language</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%powershell</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The<a class="indexterm" id="id174"/> MS Windows PowerShell language</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%python2</code> or <code class="literal">%%python3  </code>
</p>
</td><td style="text-align: left" valign="top">
<p>Run <a class="indexterm" id="id175"/>a <a class="indexterm" id="id176"/>script written in a version of Python different than the one the notebook is running</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%%ruby</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The<a class="indexterm" id="id177"/> Ruby scripting language</p>
</td></tr></tbody></table></div><p>Now, let's see some examples of scripts in some of these languages. Run the following code in <a class="indexterm" id="id178"/>a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%SVG</strong></span>
<span class="strong"><strong>&lt;svg width="400" height="300"&gt;</strong></span>
<span class="strong"><strong>    &lt;circle  cx="200" cy="150" r="100"</strong></span>
<span class="strong"><strong>        style="fill:Wheat; stroke:SteelBlue; stroke-width:5;"/&gt;</strong></span>
<span class="strong"><strong>    &lt;line x1="10" y1="10" x2="250" y2="85"</strong></span>
<span class="strong"><strong>        style="stroke:SlateBlue; stroke-width:4"/&gt;</strong></span>
<span class="strong"><strong>    &lt;polyline points="20,30 50,70 100,25 200,120"</strong></span>
<span class="strong"><strong>        style="stroke:orange; stroke-width:3; </strong></span>
<span class="strong"><strong>               fill:olive; opacity:0.65;"/&gt;</strong></span>
<span class="strong"><strong>    &lt;rect x="30" y="150" width="120" height="75"</strong></span>
<span class="strong"><strong>        style="stroke:Navy; stroke-width:4; fill:LightSkyBlue;"/&gt;</strong></span>
<span class="strong"><strong>    &lt;ellipse cx="310" cy="220" rx="55" ry="75"</strong></span>
<span class="strong"><strong>        style="stroke:DarkSlateBlue; stroke-width:4;</strong></span>
<span class="strong"><strong>               fill:DarkOrange; fill-opacity:0.45;"/&gt;</strong></span>
<span class="strong"><strong>    &lt;polygon points="50,50 15,100 75,200 45,100"</strong></span>
<span class="strong"><strong>        style="stroke:DarkTurquoise; stroke-width:5; fill:Beige;"/&gt;</strong></span>
<span class="strong"><strong>&lt;/svg&gt;</strong></span>
</pre></div><p>This displays<a class="indexterm" id="id179"/> a graphic composition with basic shapes, described using SVG. SVG is an HTML standard, so this code will run in modern browsers that support the standard.</p><p>To illustrate the use of JavaScript, let's first define (in a computation cell) an HTML element that can be easily accessed:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%html</strong></span>
<span class="strong"><strong>&lt;h1 id="hellodisplay"&gt;Hello, world!&lt;/h1&gt;</strong></span>
</pre></div><p>Run this cell. The message "Hello, world!" in the size <code class="literal">h1</code> is displayed. Then enter the following commands in another cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%javascript</strong></span>
<span class="strong"><strong>element = document.getElementById("hellodisplay")</strong></span>
<span class="strong"><strong>element.style.color = 'blue'</strong></span>
</pre></div><p>When the second cell is run, the color of the text of the "Hello, world!" message changes from black to blue.</p><p>The notebook can actually run any scripting language that is installed in your system. This is<a class="indexterm" id="id180"/> done using the <code class="literal">%%script</code> cell magic. As an example, let's<a class="indexterm" id="id181"/> run some code in the <span class="strong"><strong>Julia</strong></span> scripting language. Julia is a new language for technical computing and can be downloaded from <a class="ulink" href="http://julialang.org/">http://julialang.org/</a>. The following example assumes that Julia is installed and can be <a class="indexterm" id="id182"/>accessed with the <code class="literal">julia</code> command (this requires that the executable for the language interpreter is in the operating system's path). Enter the following code in a cell and run it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%%script julia</strong></span>
<span class="strong"><strong>function factorial(n::Int)</strong></span>
<span class="strong"><strong>    fact = 1</strong></span>
<span class="strong"><strong>    for k=1:n</strong></span>
<span class="strong"><strong>      fact *= k</strong></span>
<span class="strong"><strong>    end</strong></span>
<span class="strong"><strong>    fact</strong></span>
<span class="strong"><strong>end</strong></span>

<span class="strong"><strong>println(factorial(10))</strong></span>
</pre></div><p>The preceding code defines a function (written in <code class="literal">julia</code>) that computes the factorial of an<a class="indexterm" id="id183"/> integer, and then prints the factorial of 10. The following output is produced:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>factorial (generic function with 1 method)</strong></span>
<span class="strong"><strong>3628800</strong></span>
</pre></div><p>The first line is a message from the <code class="literal">julia</code> interpreter and the second is the factorial of 10.</p></div><div class="section" title="Loading and saving data"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec18"/>Loading and saving data</h2></div></div></div><p>The manner in<a class="indexterm" id="id184"/> which data is loaded or saved is dependent on both the nature<a class="indexterm" id="id185"/> of the data and the format expected by the application that is using the data. Since it's impossible to account for all combinations of data structure and application, we will only cover the most basic methods of loading and saving data using <code class="literal">NumPy</code> in this section. The recommended way to load and save structured data in Python is to use specialized libraries that have been optimized for each particular data type. When<a class="indexterm" id="id186"/> working with tabular data, for example, we can use <span class="strong"><strong>pandas</strong></span>, as described in <a class="link" href="ch04.html" title="Chapter 4. Handling Data with pandas">Chapter 4</a>, <span class="emphasis"><em>Handling Data with pandas</em></span>.</p><p>A single array can be saved with a call to the <code class="literal">save()</code> function of <code class="literal">NumPy</code>. Here is an example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>A = rand(5, 10)</strong></span>
<span class="strong"><strong>print A</strong></span>
<span class="strong"><strong>save('random_array.npy', A)</strong></span>
</pre></div><p>This code generates an array of random values with five rows and 10 columns, prints it, and then saves it <a class="indexterm" id="id187"/>to a file named <code class="literal">random_array.npy</code>. The <code class="literal">.npy</code> format is specific for <code class="literal">NumPy</code> arrays. Let's now delete the variable containing the array using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>del A</strong></span>
<span class="strong"><strong>A</strong></span>
</pre></div><p>Running a cell with the preceding commands will produce an error, since we request the variable <code class="literal">A</code> to be displayed after it has been deleted. To restore the array, run the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>A = load('random_array.npy')</strong></span>
<span class="strong"><strong>A</strong></span>
</pre></div><p>It is also<a class="indexterm" id="id188"/> possible to save several arrays to a single compressed file, as shown in<a class="indexterm" id="id189"/> the following example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>xvalues = arange(0.0, 10.0, 0.5)</strong></span>
<span class="strong"><strong>xsquares = xvalues ** 2</strong></span>
<span class="strong"><strong>print xvalues</strong></span>
<span class="strong"><strong>print xsquares</strong></span>
<span class="strong"><strong>savez('values_and_squares.npz', values=xvalues, squares=xsquares)</strong></span>
</pre></div><p>Notice how keyword arguments are given to specify names for the saved arrays in disk. The arrays are now saved to a file in the <code class="literal">.npz</code> format. The data can be recovered from disk <a class="indexterm" id="id190"/>using the <code class="literal">load()</code> function, which can read files in both formats used by <code class="literal">NumPy</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>my_data = load('values_and_squares.npz')</strong></span>
</pre></div><p>If the file passed to <code class="literal">load()</code> is of the <code class="literal">.npz</code> type, the returned value is an object of the <code class="literal">NpzFile</code> type. This object does not read the data immediately. Reading is delayed to the point where the data is required. To figure out which arrays are stored in the file, execute the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>my_data.files</strong></span>
</pre></div><p>In our example, the preceding command produces the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>['squares', 'values']</strong></span>
</pre></div><p>To assign the arrays to variables, use the Python dictionary access notation as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>xvalues = my_data['values']</strong></span>
<span class="strong"><strong>xsquares = my_data['squares']</strong></span>
<span class="strong"><strong>plot(xvalues, xsquares)</strong></span>
</pre></div><p>The preceding code produces the plot of half of a parabola:</p><div class="mediaobject"><img alt="Loading and saving data" src="graphics/8341OS_02_07.jpg"/></div></div></div>
<div class="section" title="The rich display system"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>The rich display system</h1></div></div></div><p>In an <a class="indexterm" id="id191"/>exciting development, recent versions of IPython include the capability to display images, video, sound, and other media directly in the notebook. The classes that support the display system are in the <code class="literal">IPython.display</code> module. In this section, we will discuss some of the supported formats.</p><div class="section" title="Images and YouTube videos"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec19"/>Images and YouTube videos</h2></div></div></div><p>Images<a class="indexterm" id="id192"/> can be loaded either from the local filesystem <a class="indexterm" id="id193"/>or from the web. To display <a class="indexterm" id="id194"/>the image contained in the <code class="literal">character.png</code> file, for example, run<a class="indexterm" id="id195"/> the following command in a cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from IPython.display import Image</strong></span>
<span class="strong"><strong>Image('character.png')</strong></span>
</pre></div><p>It is also possible to store the image in a variable to be displayed at a later time:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>img = Image('character.png')</strong></span>
</pre></div><p>The <code class="literal">character.png</code> file can be downloaded from the web page of this book.</p><p>To display the image, we can use either <code class="literal">img</code> or <code class="literal">display(img)</code>. The following image is displayed:</p><div class="mediaobject"><img alt="Images and YouTube videos" src="graphics/8341OS_02_08.jpg"/></div><p>To load <a class="indexterm" id="id196"/>an image from the Web, simply give its <a class="indexterm" id="id197"/>URL as an argument:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Image('http://www.imagesource.com/Doc/IS0/Media/TR5/7/7/f/4/IS09A9H4K.jpg')</strong></span>
</pre></div><p>The preceding<a class="indexterm" id="id198"/> command line loads the image of a flower:</p><div class="mediaobject"><img alt="Images and YouTube videos" src="graphics/8341OS_02_09.jpg"/></div><p>By default, images<a class="indexterm" id="id199"/> are embedded in the notebook so that they can be viewed offline. To insert a link to the image, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Image('http://www.imagesource.com/Doc/IS0/Media/TR5/7/7/f/4/IS09A9H4K.jpg', embed=False)</strong></span>
</pre></div><p>The image will be displayed as shown in the preceding example, but this time only a link to the image is inserted in the notebook. This results in a smaller size for the notebook file, but there is a caveat! If the image is changed online, the change will be reflected in the notebook.</p><p>It is also very easy to embed video directly from YouTube. The following code displays a beautiful <a class="indexterm" id="id200"/>animation<a class="indexterm" id="id201"/> of the<a class="indexterm" id="id202"/> Mandelbrot <a class="indexterm" id="id203"/>set:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from IPython.display import YouTubeVideo</strong></span>
<span class="strong"><strong>YouTubeVideo('G_GBwuYuOOs')</strong></span>
</pre></div></div><div class="section" title="HTML"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec20"/>HTML</h2></div></div></div><p>To finish this<a class="indexterm" id="id204"/> section, we present an extended example using<a class="indexterm" id="id205"/> IPython's capability to display HTML. The goal of the example is to build and display an HTML table of mathematical curves. We start by generating the plots and saving them to disk:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%matplotlib</strong></span>
<span class="strong"><strong>xvalues = linspace(-pi,pi,200)</strong></span>
<span class="strong"><strong>fcts = [('sin', sin), ('cos', cos), ('exp', exp)]</strong></span>
<span class="strong"><strong>for fctname, fct in fcts:</strong></span>
<span class="strong"><strong>    yvalues = fct(xvalues)</strong></span>
<span class="strong"><strong>    fig=figure()</strong></span>
<span class="strong"><strong>    ax = fig.add_subplot(1,1,1)</strong></span>
<span class="strong"><strong>    ax.plot(xvalues, yvalues, color='red')</strong></span>
<span class="strong"><strong>    ax.set_xlabel('$x$')</strong></span>
<span class="strong"><strong>    strname = '$\\%s(x)$' % fctname</strong></span>
<span class="strong"><strong>    ax.set_ylabel(strname)</strong></span>
<span class="strong"><strong>    fig.savefig(fctname + '.png')</strong></span>
</pre></div><p>The cell starts with the <code class="literal">%matplotlib</code> magic with no arguments, since we don't want the graphics to be inserted online (they will still be generated in an external viewer). We then define the <code class="literal">fcts</code> list holding the curves we want to plot. Each curve is specified by a tuple with two elements: the name of a function and the actual object representing the function. Then, the plots are generated in a loop. The Python code here is somewhat more complex than what we have seen so far, and the <code class="literal">matplotlib</code> functions used will be explained in detail in <a class="indexterm" id="id206"/>the next chapter. For now, just notice the call at the end of the cell:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>fig.savefig(fctname + '.png')</strong></span>
</pre></div><p>The preceding command saves the figure file to the disk, using the <code class="literal">.png</code> format.</p><p>Next, we generate the HTML to create the table and store it in the <code class="literal">html_string</code> variable as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>html_string = '&lt;table style="padding:20px"&gt;\n'</strong></span>
<span class="strong"><strong>for fctname, fct in fcts:</strong></span>
<span class="strong"><strong>    strname = strname = '$\\%s(x)$' % fctname</strong></span>
<span class="strong"><strong>    filename = fctname + '.png'</strong></span>
<span class="strong"><strong>    html_string += '&lt;tr&gt;\n'</strong></span>
<span class="strong"><strong>    html_string += '&lt;td style="width:80px;"&gt;%s&lt;/td&gt;\n' % strname</strong></span>
<span class="strong"><strong>    html_string += '&lt;td style="width:500px;"&gt;'</strong></span>
<span class="strong"><strong>    html_string += '&lt;img src="%s"&gt;' % filename</strong></span>
<span class="strong"><strong>    html_string += '&lt;/td&gt;\n'</strong></span>
<span class="strong"><strong>    html_string += '&lt;/tr&gt;\n'</strong></span>
<span class="strong"><strong>    html_string += '&lt;/table&gt;\n'</strong></span>
</pre></div><p>The HTML<a class="indexterm" id="id207"/> code is generated one piece at a time. We start by <a class="indexterm" id="id208"/>adding the <code class="literal">&lt;table&gt;</code> element in the first line of the cell. Then, in the loop, we generate one row of the table per iteration. To make the code more readable, we add only one HTML element in each line of code.</p><p>We can then print the HTML we generated to check if it is correct:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>print html_string</strong></span>
</pre></div><p>The preceding command produces the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&lt;table style="padding:20px"&gt;</strong></span>
<span class="strong"><strong>&lt;tr&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:80px;"&gt;$\sin(x)$&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:500px;"&gt;&lt;img src="sin.png"&gt;&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;/tr&gt;</strong></span>
<span class="strong"><strong>&lt;tr&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:80px;"&gt;$\cos(x)$&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:500px;"&gt;&lt;img src="cos.png"&gt;&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;/tr&gt;</strong></span>
<span class="strong"><strong>&lt;tr&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:80px;"&gt;$\exp(x)$&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;td style="width:500px;"&gt;&lt;img src="exp.png"&gt;&lt;/td&gt;</strong></span>
<span class="strong"><strong>&lt;/tr&gt;</strong></span>
<span class="strong"><strong>&lt;/table&gt;</strong></span>
</pre></div><p>This seems to be correct, so we are ready to render the HTML:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from IPython.display import HTML</strong></span>
<span class="strong"><strong>HTML(html_string)</strong></span>
</pre></div><p>If all is correct, the following table of curves will be displayed:</p><div class="mediaobject"><img alt="HTML" src="graphics/8341OS_02_10.jpg"/></div><p>At the <a class="indexterm" id="id209"/>end of the example, don't forget to run the following <a class="indexterm" id="id210"/>command to restore the inline graphics:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>%matplotlib inline</strong></span>
</pre></div><p>The IPython HTML display object is extremely powerful, as shown in the preceding example. HTML5-rich media, such as sound and video, can also be embedded; although, the support for all formats currently varies from browser to browser.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Summary</h1></div></div></div><p>In this chapter, we went through a comprehensive tour of the IPython Notebook Interface. We covered features that are used daily when working with the notebook, such as navigation, magics, interacting with the operating system, running scripts, and loading and saving data. We finished with a discussion of how to display richly formatted data in the notebook.</p><p>In the next chapter, you will learn how to use the <code class="literal">matplotlib</code> library to produce presentation-quality scientific graphs and data displays, with an emphasis on interactive graphs.</p></div></body></html>