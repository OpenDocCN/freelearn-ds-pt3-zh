<html><head></head><body>
		<div id="_idContainer068">
			<h1 id="_idParaDest-64"><em class="italic"><a id="_idTextAnchor065"/>Chapter 6</em>: Beautifying Streamlit Apps</h1>
			<p>Welcome to Section 2 of the book! In <em class="italic">Section 1</em>, <em class="italic">Creating Basic Streamlit Applications</em>, we focused on the basics – visualization, deployment, and data munging, all the topics that are crucial to getting started with Streamlit. In this part of the book, the purpose is to explore Streamlit through more complex applications and use cases, with the intent of turning you into an expert Streamlit user. </p>
			<p>Throughout this chapter, we'll work with elements including sidebars, columns, colors, and themes to extend our ability to make beautiful Streamlit applications. By the end of this chapter, you should feel much more comfortable creating applications that are better than the average <strong class="bold">Minimum Viable Product</strong> (<strong class="bold">MVP</strong>). We'll start by learning about columns and move on to the rest of the elements discussed, weaving each into the main Streamlit app for the chapter. </p>
			<p>Specifically, in this chapter, we will cover the following topics:</p>
			<ul>
				<li>Setting up the SF (San Francisco) Trees dataset</li>
				<li>Working with columns in Streamlit</li>
				<li>Exploring page configuration</li>
				<li>Using the Streamlit sidebar</li>
				<li>Picking colors with Color Picker</li>
				<li>Utilizing Streamlit themes</li>
			</ul>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor066"/>Technical requirements</h1>
			<p>This chapter requires a free GitHub account, which can be obtained at <a href="https://www.github.com">https://www.github.com</a>. A full primer on GitHub, along with detailed setup instructions, can be found in the <em class="italic">A quick primer on GitHub</em> section in the previous chapter, <a href="B16864_05_Final_VK_ePub.xhtml#_idTextAnchor056"><em class="italic">Chapter 5</em></a>, <em class="italic">Deploying Streamlit with Streamlit Sharing</em>.</p>
			<h1 id="_idParaDest-66"><a id="_idTextAnchor067"/>Setting up the SF Trees dataset</h1>
			<p>For this chapter, we will <a id="_idIndexMarker209"/>be working with the SF Trees dataset again, the same dataset that we used in <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>. As we did in the previous chapters, we need to follow this list of steps for the setup:</p>
			<ol>
				<li>Create a new folder for the chapter.</li>
				<li>Add our data to the folder.</li>
				<li>Create a Python file for our app.</li>
			</ol>
			<p>Let's see each of these steps in detail.</p>
			<p>In our main <strong class="source-inline">streamlit_apps</strong> folder, run the following code in your terminal to make a new folder cleverly called <strong class="source-inline">pretty_trees</strong>. You can also create a new folder manually outside the terminal:</p>
			<p class="source-code">mkdir pretty_trees</p>
			<p>Now, we need to move our data from <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, into our folder for this chapter. The following code copies the data into the correct folder: </p>
			<p class="source-code">cp trees_app/trees.csv pretty_trees</p>
			<p>If you do not have the <strong class="source-inline">trees_app</strong> folder and have not yet completed <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, you can also download the necessary data from <a href="https://github.com/tylerjrichards/Getting-Started-with-Streamlit-for-Data-Science">https://github.com/tylerjrichards/Getting-Started-with-Streamlit-for-Data-Science</a> within the folder entitled <strong class="source-inline">trees_app</strong>. </p>
			<p>Now that we have our data ready, we need to create a Python file to host our Streamlit app's code; the following code does precisely this:</p>
			<p class="source-code">touch pretty_trees.py</p>
			<p>The <strong class="source-inline">pretty_trees</strong> file will hold our Python code, so go ahead and open it up in the text editor of your choice and the chapter can officially begin with us learning how to work with columns in Streamlit!</p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor068"/>Working with columns in Streamlit</h1>
			<p>In all of our <a id="_idIndexMarker210"/>apps prior to this point, we have viewed each Streamlit task as a <a id="_idIndexMarker211"/>top-down experience. We output text as our title, collect some user input below, and then put our visualizations below that. However, Streamlit allows us to format our app into dynamic columns using the <strong class="source-inline">st.beta_columns()</strong> feature. As of now, the columns feature is in beta (hence the <strong class="source-inline">beta_</strong> in the function name), but the feature should be out of beta at some point in 2021, where it will be called <strong class="source-inline">st.columns()</strong>. </p>
			<p>We can divide our Streamlit app into multiple columns of variable lengths, and then treat each column as its own unique space in our app to include text, graphs, images, or anything else we would like. </p>
			<p>The syntax for columns in Streamlit uses <strong class="source-inline">with</strong> notation, which you may already be familiar with for use cases such as resource management and dealing with opening and writing to files in Python. The easiest way to think about <strong class="source-inline">with</strong> notation in Streamlit columns is that they are self-contained blocks of code that tell Streamlit exactly where to place items in our apps. Let's check out an example to see how it works. The following code imports our SF Trees dataset and creates three columns of equal length within it, writing text into each one: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns((1,1,1))</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.write('First column')</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.write('Second column')</p>
			<p class="source-code">with col3:</p>
			<p class="source-code">     st.write('Third column')</p>
			<p>The preceding code will create the app shown in the following screenshot:</p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/B16864_06_01.jpg" alt="Figure 6.1 – First three columns&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.1 – First three columns</p>
			<p>As we<a id="_idIndexMarker212"/> can see, <strong class="source-inline">st.beta_columns()</strong> defines three columns of equal length, and <a id="_idIndexMarker213"/>we use the <strong class="source-inline">with</strong> notation to print some text in each. We can also call the <strong class="source-inline">st.write()</strong> function (or any other Streamlit function that writes content to our Streamlit app) directly on our predefined columns for the same outcome, as shown in the following code. The following code will have the exact same output as the preceding code block:</p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns((1,1,1))</p>
			<p class="source-code">col1.write('First column')</p>
			<p class="source-code">col2.write('Second column')</p>
			<p class="source-code">col3.write('Third column')</p>
			<p>As we <a id="_idIndexMarker214"/>write more complex Streamlit apps with more content in each column, <strong class="source-inline">with</strong> statements tend to make for cleaner apps that are easier to understand and debug. The<a id="_idIndexMarker215"/> majority of this book will use <strong class="source-inline">with</strong> statements whenever possible. </p>
			<p>In Streamlit, the column width is relative to the size of the other defined columns. Because of this, if we scale up the width of each column to <strong class="source-inline">10</strong> instead of <strong class="source-inline">1</strong>, our app will not change at all. Additionally, we can also pass a single number into <strong class="source-inline">st.beta_columns()</strong>, and <strong class="source-inline">st.beta_columns()</strong> will return that number of columns of equal width. The following code block shows three options for column width that all result in the same column widths: </p>
			<p class="source-code">#option 1</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns((1,1,1))</p>
			<p class="source-code">#option 2</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns((10,10,10))</p>
			<p class="source-code">#option 3</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns(3)</p>
			<p>As a final example, the following code block allows the user input to determine the width of each column. Go ahead and play around with the resulting app to better understand<a id="_idIndexMarker216"/> how we can<a id="_idIndexMarker217"/> use columns to change the format behind our Streamlit apps: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">first_width = st.number_input('First Width', min_value=1, value=1)</p>
			<p class="source-code">second_width = st.number_input('Second Width', min_value=1, value=1)</p>
			<p class="source-code">third_width = st.number_input('Third Width', min_value=1, value=1)</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns(</p>
			<p class="source-code">      (first_width,second_width,third_width))</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.write('First column')</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.write('Second column')</p>
			<p class="source-code">with col3:</p>
			<p class="source-code">     st.write('Third column')</p>
			<p>In <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, we used the <a id="_idIndexMarker218"/>following code to show the difference between the<a id="_idIndexMarker219"/> built-in Streamlit functions <strong class="source-inline">st.line_chart()</strong>, <strong class="source-inline">st.bar_chart()</strong>, and <strong class="source-inline">st.area_chart()</strong>: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p class="source-code">st.line_chart(df_dbh_grouped)</p>
			<p class="source-code">st.bar_chart(df_dbh_grouped)</p>
			<p class="source-code">st.area_chart(df_dbh_grouped)</p>
			<p>The preceding code block creates the following Streamlit app, with three graphs of San Francisco trees grouped by their width placed one right after the other (only the two graphs are shown for brevity):</p>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/B16864_06_02.jpg" alt="Figure 6.2 – SF line and bar charts&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.2 – SF line and bar charts</p>
			<p>The point<a id="_idIndexMarker220"/> of this exercise was to better understand the three Streamlit functions, but how can <a id="_idIndexMarker221"/>we do that if we need to scroll to see them all? Let's improve on this by putting our three graphs side by side using three columns. The following code predefines three equally wide columns and places one graph in each: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns(3)</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.line_chart(df_dbh_grouped)</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.bar_chart(df_dbh_grouped)</p>
			<p class="source-code">with col3:</p>
			<p class="source-code">     st.area_chart(df_dbh_grouped)</p>
			<p>When we run<a id="_idIndexMarker222"/> the preceding <a id="_idIndexMarker223"/>code, we get a strange result shown in the following screenshot:</p>
			<div>
				<div id="_idContainer059" class="IMG---Figure">
					<img src="image/B16864_06_03.jpg" alt="Figure 6.3 – Skinny graphs&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.3 – Skinny graphs</p>
			<p>This is <a id="_idIndexMarker224"/>most certainly<a id="_idIndexMarker225"/> not what we wanted! Each graph is far too narrow. Luckily for us, this brings us to our next mini-topic, page configuration in Streamlit.</p>
			<h1 id="_idParaDest-68"><a id="_idTextAnchor069"/>Exploring page configuration </h1>
			<p>Streamlit allows us to <a id="_idIndexMarker226"/>configure a few essential page-specific features at the top of each Streamlit app. So far, we have been using the Streamlit defaults, but at the top of our Streamlit app, we can manually configure everything, from the page title shown on the web browser used to open our Streamlit apps, to the page layout, to the sidebar default state (we will cover the sidebar in the <em class="italic">Using the Streamlit sidebar</em> section!). </p>
			<p>The default for Streamlit apps is to have a centered page layout, which is why there is copious white space on the edges of our apps. The following code sets up our Streamlit app in a wide format instead of our default centered one:</p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.set_page_config(layout='wide')</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p class="source-code">col1, col2, col3 = st.beta_columns(3)</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.line_chart(df_dbh_grouped)</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.bar_chart(df_dbh_grouped)</p>
			<p class="source-code">with col3:</p>
			<p class="source-code">     st.area_chart(df_dbh_grouped)</p>
			<p>When we run the<a id="_idIndexMarker227"/> preceding code, we now see that our three graphs are well spaced and we can easily compare between the three. The following screenshot shows the Streamlit app in a wide format: </p>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/B16864_06_04.jpg" alt="Figure 6.4 – Wide-format graphs&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.4 – Wide-format graphs</p>
			<p>This concludes our<a id="_idIndexMarker228"/> exploration of using columns in Streamlit, and also concludes our first look at page configuration defaults. We will increasingly use both of these skills in the remainder of the book. Our next topic is to introduce the Streamlit sidebar. </p>
			<h1 id="_idParaDest-69"><a id="_idTextAnchor070"/>Using the Streamlit sidebar</h1>
			<p>As we have already seen in <a id="_idIndexMarker229"/>Streamlit, when we start to both accept large amounts of user input and also start to develop longer Streamlit apps, we often lose the ability for the user to see both their input and the output on the same screen. In other cases, we may want to put all the user input into its own section to clearly separate input and output in our Streamlit app. For both of these use cases, we can use the Streamlit sidebar, which allows us to place a minimizable sidebar on the left side of the Streamlit app and add any Streamlit component to it. </p>
			<p>To begin with, we can make a basic example that takes one of the graphs from our preceding app and filter the data behind it based on the user's input. In this case, we can ask the user to specify the type of tree owner (for example, a private owner, or the Department of Public Works), and filter on those conditions using the <strong class="source-inline">st.multiselect()</strong> function, which allows the user to select multiple options from a list: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW. The '</p>
			<p class="source-code">         'histogram below is filtered by tree owner.')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">owners = st.sidebar.multiselect(</p>
			<p class="source-code">     'Tree Owner Filter', trees_df['caretaker'].unique())</p>
			<p class="source-code">if owners:</p>
			<p class="source-code">     trees_df = trees_df[trees_df['caretaker'].isin(owners)] </p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p class="source-code">st.line_chart(df_dbh_grouped)</p>
			<p>The preceding code will <a id="_idIndexMarker230"/>create the following Streamlit app. As we have done before, we hide the <strong class="source-inline">owners</strong> variable within an <strong class="source-inline">if</strong> statement, as we would like the app to run with the entire dataset if the user has yet to select from the options. The sidebar allows the user to easily see both the options they selected and the output to our app:</p>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/B16864_06_05.jpg" alt="Figure 6.5 – First sidebar&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.5 – First sidebar</p>
			<p>Our next step for <a id="_idIndexMarker231"/>this app is going to be to add a few more visualizations, starting with the tree map we created in <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, and then combine the sidebar with what we have already learned about columns in this chapter. </p>
			<p>The following code places the map of trees throughout San Francisco, filtered by our multi-select box, below the histogram: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">owners = st.sidebar.multiselect(</p>
			<p class="source-code">     'Tree Owner Filter', trees_df['caretaker'].unique())</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW. The '</p>
			<p class="source-code">         'histogram below is filtered by tree owner.')</p>
			<p class="source-code">st.write('The current analysis is of trees owned by {}'.format(owners))</p>
			<p class="source-code">if owners:</p>
			<p class="source-code">     trees_df = trees_df[trees_df['caretaker'].isin(owners)] </p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p class="source-code">st.line_chart(df_dbh_grouped)</p>
			<p class="source-code">trees_df = trees_df.dropna(subset=['longitude', 'latitude'])</p>
			<p class="source-code">trees_df = trees_df.sample(n = 1000, replace=True)</p>
			<p class="source-code">st.map(trees_df)</p>
			<p>The following screenshot<a id="_idIndexMarker232"/> shows the Streamlit app from the preceding code, with the line chart just above the new map of the trees in SF, filtered by tree owner: </p>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/B16864_06_06.jpg" alt="Figure 6.6 – Filtered map with sidebar&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.6 – Filtered map with sidebar</p>
			<p>Our next step for this <a id="_idIndexMarker233"/>application is going to be to combine what we learned about columns with the sidebar by adding another graph on top of the geographic map. In <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, we created a histogram of the age of the trees. We can use that as our third graph in this Streamlit app. The following code block does this, and also switches the line graph into the same library (<strong class="source-inline">seaborn</strong>) as our tree age graph: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">import seaborn as sns</p>
			<p class="source-code">import datetime as dt</p>
			<p class="source-code">import matplotlib.pyplot as plt</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW. The '</p>
			<p class="source-code">         'histogram below is filtered by tree owner.')</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">trees_df['age'] = (pd.to_datetime('today') -</p>
			<p class="source-code">                   pd.to_datetime(trees_df['date'])).dt.days</p>
			<p class="source-code">owners = st.sidebar.multiselect(</p>
			<p class="source-code">     'Tree Owner Filter', trees_df['caretaker'].unique())</p>
			<p class="source-code">if owners:</p>
			<p class="source-code">     trees_df = trees_df[trees_df['caretaker'].isin(owners)] </p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p>This first <a id="_idIndexMarker234"/>section does the following:</p>
			<ol>
				<li value="1">It loads the trees dataset.</li>
				<li>It adds an age column based on the date column in our dataset.</li>
				<li>It creates a multi-select widget on the sidebar.</li>
				<li>It filters based on the sidebar.</li>
			</ol>
			<p>Our next step is to create our three graphs: </p>
			<p class="source-code">#define multiple columns, add two graphs</p>
			<p class="source-code">col1, col2 = st.beta_columns(2)</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.write('Trees by Width')</p>
			<p class="source-code">     fig_1, ax_1 = plt.subplots()</p>
			<p class="source-code">     ax_1 = sns.histplot(trees_df['dbh'])</p>
			<p class="source-code">     plt.xlabel('Tree Width')</p>
			<p class="source-code">     st.pyplot(fig_1)</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.write('Trees by Age')</p>
			<p class="source-code">     fig_2, ax_2 = plt.subplots()</p>
			<p class="source-code">     ax_2 = sns.histplot(trees_df['age'])</p>
			<p class="source-code">     plt.xlabel('Age (Days)')</p>
			<p class="source-code">     st.pyplot(fig_2)</p>
			<p class="source-code">st.write('Trees by Location')</p>
			<p class="source-code">trees_df = trees_df.dropna(subset=['longitude', 'latitude'])</p>
			<p class="source-code">trees_df = trees_df.sample(n = 1000, replace=True)</p>
			<p class="source-code">st.map(trees_df)</p>
			<p>As we have already<a id="_idIndexMarker235"/> discussed in <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>, built-in Streamlit functions such as <strong class="source-inline">st.map()</strong> and <strong class="source-inline">st.line_chart()</strong> are useful for quick visualizations but lack some configurability options, such as proper titles or axis renaming. The following screenshot shows our Streamlit application with a few tree owner filters pre-set: </p>
			<div>
				<div id="_idContainer063" class="IMG---Figure">
					<img src="image/B16864_06_07.jpg" alt="Figure 6.7 – Three filtered graphs&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.7 – Three filtered graphs</p>
			<p>Our next feature to<a id="_idIndexMarker236"/> discuss in this chapter is how to get and use user input on color, which will be covered in the next section. </p>
			<h1 id="_idParaDest-70"><a id="_idTextAnchor071"/>Picking colors with Color Picker</h1>
			<p>Colors are very<a id="_idIndexMarker237"/> difficult to take in as user input in applications. If a user wants red, do they want light red or dark red? Maroon or a pinkish red? Streamlit's approach to this problem is <strong class="source-inline">st.color_picker()</strong>, which lets the user pick a color, and returns that color in a hex string (which is a unique string that defines very specific color shades used by most graphing libraries as input). The following code adds this color picker to our previous app and changes the color of the Seaborn graphs to be based on the color that the user selects: </p>
			<p class="source-code">import streamlit as st</p>
			<p class="source-code">import pandas as pd</p>
			<p class="source-code">import seaborn as sns</p>
			<p class="source-code">import datetime as dt</p>
			<p class="source-code">import matplotlib.pyplot as plt</p>
			<p class="source-code">st.title('SF Trees')</p>
			<p class="source-code">st.write('This app analyses trees in San Francisco using'</p>
			<p class="source-code">         ' a dataset kindly provided by SF DPW. The '</p>
			<p class="source-code">         'histogram below is filtered by tree owner.')</p>
			<p class="source-code">#load trees dataset, add age column in days</p>
			<p class="source-code">trees_df = pd.read_csv('trees.csv')</p>
			<p class="source-code">trees_df['age'] = (pd.to_datetime('today') -</p>
			<p class="source-code">                   pd.to_datetime(trees_df['date'])).dt.days</p>
			<p class="source-code">#add tree owner filter to sidebar, then filter, get color </p>
			<p class="source-code">owners = st.sidebar.multiselect(</p>
			<p class="source-code">     'Tree Owner Filter', trees_df['caretaker'].unique())</p>
			<p class="source-code">graph_color = st.sidebar.color_picker('Graph Colors')</p>
			<p class="source-code">if owners:</p>
			<p class="source-code">     trees_df = trees_df[trees_df['caretaker'].isin(owners)] </p>
			<p class="source-code">#group by dbh for leftmost graph</p>
			<p class="source-code">df_dbh_grouped = pd.DataFrame(trees_df.groupby(['dbh']).count()['tree_id'])</p>
			<p class="source-code">df_dbh_grouped.columns = ['tree_count']</p>
			<p>The change here<a id="_idIndexMarker238"/> from our previous app is to add the <strong class="source-inline">graph_color</strong> variable, which is a result of the <strong class="source-inline">st.color_picker()</strong> function. We added a name to this color picker and placed the color picker in the sidebar right under the owner's multi-select widget. Now that we have the color input from the user, we can use this to change the colors in our graphs, as shown in the following code:</p>
			<p class="source-code">#define multiple columns, add two graphs</p>
			<p class="source-code">col1, col2 = st.beta_columns(2)</p>
			<p class="source-code">with col1:</p>
			<p class="source-code">     st.write('Trees by Width')</p>
			<p class="source-code">     fig_1, ax_1 = plt.subplots()</p>
			<p class="source-code">     ax_1 = sns.histplot(trees_df['dbh'], </p>
			<p class="source-code">          color=graph_color)</p>
			<p class="source-code">     plt.xlabel('Tree Width')</p>
			<p class="source-code">     st.pyplot(fig_1)</p>
			<p class="source-code">with col2:</p>
			<p class="source-code">     st.write('Trees by Age')</p>
			<p class="source-code">     fig_2, ax_2 = plt.subplots()</p>
			<p class="source-code">     ax_2 = sns.histplot(trees_df['age'],</p>
			<p class="source-code">          color=graph_color)</p>
			<p class="source-code">     plt.xlabel('Age (Days)')</p>
			<p class="source-code">     st.pyplot(fig_2)</p>
			<p class="source-code">st.write('Trees by Location')</p>
			<p class="source-code">trees_df = trees_df.dropna(subset=['longitude', 'latitude'])</p>
			<p class="source-code">trees_df = trees_df.sample(n = 1000, replace=True)</p>
			<p class="source-code">st.map(trees_df)</p>
			<p>When you run this<a id="_idIndexMarker239"/> Streamlit app, you can see exactly how the color picker works (this book is published in grayscale, so is not visible in the hard copy). It has a default color (in our case, black) that you can change by selecting the component and then clicking on your color of choice. The following screenshot shows both the component <a id="_idIndexMarker240"/>when clicked on and the result in our SF Trees app: </p>
			<div>
				<div id="_idContainer064" class="IMG---Figure">
					<img src="image/B16864_06_08.jpg" alt="Figure 6.8 – Color picker&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.8 – Color picker</p>
			<p>Now that we know how to change the colors of visualizations in Streamlit, how can we change the entire format and color scheme of Streamlit apps themselves? The next chapter explores Streamlit themes, and how to set up different themes to beautify Streamlit apps. </p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor072"/>Utilizing Streamlit themes</h1>
			<p>So far, our applications<a id="_idIndexMarker241"/> have all had the exact same background and color scheme, apart from the previous section on the color picker. Streamlit allows us to update our applications and change the color of the background and the various components in our app as a customization feature. Using this, we can create Streamlit apps that default to dark mode, or that have the perfect colors for our app, or even create themes that ensure that people affected by color-blindness can see all of our visualizations. </p>
			<p>There are two ways to edit the <em class="italic">theme</em> of an app – through the UI or through the same <strong class="source-inline">config.toml</strong> setup we used in <a href="B16864_03_Final_VK_ePub.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, <em class="italic">Data Visualization</em>. When we run our Streamlit apps, in the top-right corner, there is a little hamburger icon. When we click that icon and then click <strong class="bold">Settings</strong>, we will see the following options pop up in the middle of our<a id="_idIndexMarker242"/> screen:</p>
			<div>
				<div id="_idContainer065" class="IMG---Figure">
					<img src="image/B16864_06_09.jpg" alt="Figure 6.9 – Theme edits&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.9 – Theme edits</p>
			<p>Using the preceding menu, we can switch between <strong class="bold">Light</strong> and <strong class="bold">Dark</strong> themes, and when we click on <strong class="bold">Edit active theme</strong>, we can see all of our theme editing options as demonstrated in the following screenshot: </p>
			<div>
				<div id="_idContainer066" class="IMG---Figure">
					<img src="image/B16864_06_10.jpg" alt="Figure 6.10 – Editing active themes&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.10 – Editing active themes</p>
			<p>From the preceding <a id="_idIndexMarker243"/>screenshot, we can observe that the following can be switched:</p>
			<ul>
				<li><strong class="bold">Primary color</strong>: For interactive colors </li>
				<li><strong class="bold">Background color</strong>: Background of the app</li>
				<li><strong class="bold">Secondary background color</strong>: Background within components </li>
				<li><strong class="bold">Text color/font</strong>: The color and font of the app text </li>
			</ul>
			<p>Feel free to click on them and change the colors and see how this affects your Streamlit app. Once you have found a few colors that you like for our SF Trees app, you can add them to the theme section of your <strong class="source-inline">.streamlit</strong>/<strong class="source-inline">config.toml</strong> file as the instructions in <strong class="bold">Settings</strong> tell you to, and this will change the theme whenever you open the app. The following code block is added<a id="_idIndexMarker244"/> to the <strong class="source-inline">config.toml</strong> file and shows the colors I have selected for my theme: </p>
			<p class="source-code">[theme]</p>
			<p class="source-code"># Primary accent color for interactive elements.</p>
			<p class="source-code">primaryColor = "#de8ba1"</p>
			<p class="source-code"># Background color for the main content area.</p>
			<p class="source-code">backgroundColor = "#f4f1ea"</p>
			<p class="source-code"># Background color used for the sidebar and most interactive widgets.</p>
			<p class="source-code">secondaryBackgroundColor = "#9fe4cc"</p>
			<p class="source-code"># Color used for almost all text.</p>
			<p class="source-code">textColor = "#262730"</p>
			<p>When we save this file and rerun our application, we will see in the next screenshot that our app now has a custom theme, as expected:</p>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/B16864_06_11.jpg" alt="Figure 6.11 – Custom theme output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.11 – Custom theme output</p>
			<p>The easiest way I have<a id="_idIndexMarker245"/> found to make your Streamlit themes look great is to edit in the in-browser editor live, and then copy and paste your results to the Streamlit configuration file, as we just did in this example. But, as with all things, have fun with it! Try new combinations and make your Streamlit apps as beautiful as they can be. </p>
			<h1 id="_idParaDest-72"><a id="_idTextAnchor073"/>Summary</h1>
			<p>This concludes our adventures with the SF Trees dataset, and with learning about the various ways to make our Streamlit apps more aesthetically pleasing. We covered separating our apps into columns and page configuration, along with gathering user input in the sidebar, getting specific colors in user input through the <strong class="source-inline">st.color_picker()</strong> feature, and finally learning how to use Streamlit themes. </p>
			<p>In the next chapter, we will learn about the open source community around Streamlit, by understanding how to download and use Streamlit components built by users. </p>
		</div>
	</body></html>